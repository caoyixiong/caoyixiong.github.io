<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Git 备忘清单 | 毅栈</title><meta name="author" content="毅栈"><meta name="copyright" content="毅栈"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本备忘单总结了常用的 Git 命令行指令，以供快速参考。 入门创建存储库创建一个新的本地存储库 $ git init [项目名称]  克隆存储库(代码仓库) $ git clone &lt;git_url&gt;  将存储库克隆到指定目录 $ git clone &lt;git_url&gt; 指定目录  将存储库克隆到指定目录，并指定分支 $ git clone &lt;git_url&gt;">
<meta property="og:type" content="website">
<meta property="og:title" content="Git 备忘清单">
<meta property="og:url" content="https://caoyixiong.com/reference/git/index.html">
<meta property="og:site_name" content="毅栈">
<meta property="og:description" content="本备忘单总结了常用的 Git 命令行指令，以供快速参考。 入门创建存储库创建一个新的本地存储库 $ git init [项目名称]  克隆存储库(代码仓库) $ git clone &lt;git_url&gt;  将存储库克隆到指定目录 $ git clone &lt;git_url&gt; 指定目录  将存储库克隆到指定目录，并指定分支 $ git clone &lt;git_url&gt;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://caoyixiong.com/img/avatar.jpg">
<meta property="article:published_time" content="2024-08-10T06:16:15.710Z">
<meta property="article:modified_time" content="2024-08-10T06:16:15.710Z">
<meta property="article:author" content="毅栈">
<meta property="article:tag" content="博客，生活，技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://caoyixiong.com/img/avatar.jpg"><link rel="shortcut icon" href="/img/logo.png"><link rel="canonical" href="https://caoyixiong.com/reference/git/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"3NQ1I8Z7GZ","apiKey":"df5bcd27157ba7efa007752258f185fd","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 毅栈","link":"链接: ","source":"来源: 毅栈","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Git 备忘清单',
  isPost: false,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-08-10 14:16:15'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="/css/universe.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">15</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/reference/"><i class="fa-fw fas fa-list"></i><span> 备忘清单</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/sponsor/"><i class="fa-fw fas fa-money-check-alt"></i><span> 赞助墙</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header" style="background-image: url('/img/home.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="毅栈"><img class="site-icon" src="/img/logo.png"/><span class="site-name">毅栈</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/reference/"><i class="fa-fw fas fa-list"></i><span> 备忘清单</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/sponsor/"><i class="fa-fw fas fa-money-check-alt"></i><span> 赞助墙</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="page-site-info"><h1 id="site-title">Git 备忘清单</h1></div></header><main class="layout" id="content-inner"><div id="page"><div id="article-container"><p>本备忘单总结了常用的 <a target="_blank" rel="noopener" href="https://git-scm.com/">Git</a> 命令行指令，以供快速参考。</p>
<h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><h3 id="创建存储库"><a href="#创建存储库" class="headerlink" title="创建存储库"></a>创建存储库</h3><p>创建一个新的本地存储库</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git init [项目名称]</span></span><br></pre></td></tr></table></figure>

<p>克隆存储库(代码仓库)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> &lt;git_url&gt;</span></span><br></pre></td></tr></table></figure>

<p>将存储库克隆到指定目录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> &lt;git_url&gt; 指定目录</span></span><br></pre></td></tr></table></figure>

<p>将存储库克隆到指定目录，并指定分支</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">clone</span> &lt;git_url&gt; -b &lt;分支名称&gt; 指定目录</span></span><br></pre></td></tr></table></figure>

<h3 id="做出改变"><a href="#做出改变" class="headerlink" title="做出改变"></a>做出改变</h3><!--rehype:wrap-class=row-span-3-->

<p>在工作目录中<strong>显示</strong>修改后的文件，为您的下一次提交暂存</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git status</span></span><br></pre></td></tr></table></figure>

<p>暂存文件，准备提交</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add [file]</span></span><br></pre></td></tr></table></figure>

<p>暂存<strong>所有</strong>更改的文件，准备提交</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add .</span></span><br></pre></td></tr></table></figure>

<p>将所有暂存文件提交到版本化历史记录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit -m <span class="string">&quot;commit message&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>将所有跟踪的文件提交到版本化历史记录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit -am <span class="string">&quot;commit message&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>取消暂存文件，保留文件更改</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git reset [file]</span></span><br></pre></td></tr></table></figure>

<p>将所有内容恢复到最后一次提交</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git reset --hard</span></span><br></pre></td></tr></table></figure>

<p>已更改但未暂存内容的差异</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git diff</span></span><br></pre></td></tr></table></figure>

<p>已 commited 但尚未提交的内容的差异</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git diff --staged</span></span><br></pre></td></tr></table></figure>

<p>在指定分支之前应用当前分支的任何提交</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git rebase [branch]</span></span><br></pre></td></tr></table></figure>

<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><!--rehype:wrap-class=row-span-2-->

<p>设置将附加到您的提交和标签的名称</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global user.name <span class="string">&quot;name&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>设置将附加到您的提交和标签 tags 的<strong>电子邮件地址</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global user.email <span class="string">&quot;email&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>启用 Git 输出的一些着色</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global color.ui auto</span></span><br></pre></td></tr></table></figure>

<p>在文本编辑器中编辑全局配置文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global --edit</span></span><br></pre></td></tr></table></figure>

<p>显示本地 <code>repo</code> 配置设置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --list</span></span><br></pre></td></tr></table></figure>

<p>删除全局设置</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git config --global --<span class="built_in">unset</span> &lt;entry-name&gt;</span><br></pre></td></tr></table></figure>

<h3 id="使用分支"><a href="#使用分支" class="headerlink" title="使用分支"></a>使用分支</h3><!--rehype:wrap-class=row-span-3-->

<p>列出所有本地分支</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch</span></span><br></pre></td></tr></table></figure>

<p>列出所有分支，本地和远程</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -av</span></span><br></pre></td></tr></table></figure>

<p>切换到 <code>my_branch</code>，并更新工作目录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout my_branch</span></span><br></pre></td></tr></table></figure>

<p>创建并切换到新分支<code>new_branch</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout -b new_branch</span></span><br></pre></td></tr></table></figure>

<p>删除名为 <code>my_branch</code> 的分支</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -d my_branch</span></span><br></pre></td></tr></table></figure>

<p>删除本地存在远程不存在的分支</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git remote prune origin</span></span><br></pre></td></tr></table></figure>

<p>将分支 <code>A</code> 合并到分支 <code>B</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout branchB</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git merge branchA</span></span><br></pre></td></tr></table></figure>

<p>标记当前提交</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git tag my_tag</span></span><br></pre></td></tr></table></figure>

<p>从远程分支中创建并切换到本地分支</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout -b &lt;branch-name&gt; origin/&lt;branch-name&gt;</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="临时提交"><a href="#临时提交" class="headerlink" title="临时提交"></a>临时提交</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">保存已修改和分阶段的更改</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git stash</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">列出隐藏文件更改的堆栈顺序</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git stash list</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">从存储堆栈顶部编写工作</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git stash pop</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">丢弃存储堆栈顶部的更改</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git stash drop</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">回到某个 stash 的状态</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git stash apply &lt;stash@&#123;n&#125;&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除所有的 stash</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git stash clear</span></span><br></pre></td></tr></table></figure>

<h3 id="观察你的存储库"><a href="#观察你的存储库" class="headerlink" title="观察你的存储库"></a>观察你的存储库</h3><!--rehype:wrap-class=row-span-2-->

<p>显示当前活动分支的提交历史</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span></span></span><br></pre></td></tr></table></figure>

<p>显示 branchA 上不在 branchB 上的提交</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> branchB..branchA</span></span><br></pre></td></tr></table></figure>

<p>显示更改文件的提交，即使跨重命名</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> --follow [file]</span></span><br></pre></td></tr></table></figure>

<p>显示 branchA 中的内容与 branchB 中的内容的差异</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git diff branchB...branchA</span></span><br></pre></td></tr></table></figure>

<p>以人类可读的格式显示 Git 中的任何对象</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git show [SHA]</span></span><br></pre></td></tr></table></figure>

<h3 id="忽略文件-gitignore"><a href="#忽略文件-gitignore" class="headerlink" title="忽略文件 .gitignore"></a>忽略文件 .gitignore</h3><!--rehype:wrap-class=row-span-4-->

<p>文件 <code>.gitignore</code> 指定了 <code>Git</code> 应该忽略的 <strong>未跟踪的</strong> 文件</p>
<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left">行首 <code>#</code></td>
<td align="left">全行注释，不支持行尾类注释 <em>(转义 <code>\#</code>)</em></td>
</tr>
<tr>
<td align="left">行首 <strong><code>!</code></strong></td>
<td align="left">否定模式 <em>(转义 <code>\!</code>)</em></td>
</tr>
<tr>
<td align="left"><code>**</code></td>
<td align="left">匹配任意路径</td>
</tr>
<tr>
<td align="left"><code>*</code></td>
<td align="left">匹配任意多个字符</td>
</tr>
<tr>
<td align="left"><code>?</code></td>
<td align="left">匹配任意一个字符</td>
</tr>
<tr>
<td align="left"><code>doc/**</code></td>
<td align="left">匹配 <code>doc</code> 文件夹下的全部内容</td>
</tr>
<tr>
<td align="left"><code>doc/**/a</code></td>
<td align="left">匹配任意深度路径下的 <code>a</code> 文件或文件夹</td>
</tr>
<tr>
<td align="left"><code>/</code></td>
<td align="left">表示路径分隔符，不区分操作系统</td>
</tr>
<tr>
<td align="left"><code>/</code> 结尾</td>
<td align="left">仅会匹配文件夹，否则会匹配文件和文件夹</td>
</tr>
<tr>
<td align="left">空行</td>
<td align="left">不匹配任何文件</td>
</tr>
<tr>
<td align="left">行尾空格</td>
<td align="left">默认被忽略，可使用<code>\</code>进行转义</td>
</tr>
<tr>
<td align="left">行首空格</td>
<td align="left">被正常处理，不会被忽略</td>
</tr>
</tbody></table>
<p>当前 <code>.gitignore</code> 文件定义规则的优先级高于上级路径 <code>.gitignore</code> 定义规则的优先级；后定义的规则优先级高于前面定义规则的优先级</p>
<figure class="highlight plaintext"><figcaption><span>showLineNumbers</span></figcaption><table><tr><td class="code"><pre><span class="line"># 忽略当前目录logs文件夹下的全部内容</span><br><span class="line">/logs/</span><br><span class="line">/logs/*</span><br><span class="line">/logs/**</span><br><span class="line"># 上述几条规则等效</span><br><span class="line"></span><br><span class="line"># 忽略 Mac 系统文件，包括任意子路径下的同名文件（夹）</span><br><span class="line">.DS_store</span><br><span class="line"></span><br><span class="line"># 忽略 node_modules 文件夹，包括任意子路径下的同名文件夹</span><br><span class="line">node_modules/</span><br><span class="line"></span><br><span class="line"># 忽略任意子路径下build、target文件夹，</span><br><span class="line"># 但不忽略src/main、src/test下的build、target文件夹</span><br><span class="line">build/</span><br><span class="line">!**/src/main/**/build/</span><br><span class="line">!**/src/test/**/build/</span><br><span class="line">target/</span><br><span class="line">!**/src/main/**/target/</span><br><span class="line">!**/src/test/**/target/</span><br><span class="line"></span><br><span class="line"># 使用 ! 重新包含指定文件（夹）</span><br><span class="line">!logs/.gitkeep</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="重构文件名"><a href="#重构文件名" class="headerlink" title="重构文件名"></a>重构文件名</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 从工作目录中删除文件并暂存删除</span></span><br><span class="line">git <span class="built_in">rm</span> &lt;filename&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从版本控制中删除文件但在本地保留文件</span></span><br><span class="line">git <span class="built_in">rm</span> --cached &lt;filename&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更改文件名并准备提交</span></span><br><span class="line">git <span class="built_in">mv</span> &lt;filename-orig&gt; &lt;filename-renamed&gt;</span><br></pre></td></tr></table></figure>

<h3 id="同步"><a href="#同步" class="headerlink" title="同步"></a>同步</h3><!--rehype:wrap-class=row-span-2-->

<p>从该 Git 远程获取所有分支</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git fetch [<span class="built_in">alias</span>]</span></span><br></pre></td></tr></table></figure>

<p>将远程分支合并到当前分支以使其保持最新状态</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git merge [<span class="built_in">alias</span>]/[branch]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">没有快进</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git merge --no-ff [<span class="built_in">alias</span>]/[branch]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">仅快进</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git merge --ff-only [<span class="built_in">alias</span>]/[branch]</span></span><br></pre></td></tr></table></figure>

<p>将本地分支提交传输到远程存储库分支</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push [<span class="built_in">alias</span>] [branch]</span></span><br></pre></td></tr></table></figure>

<p>从跟踪远程分支获取并合并任何提交</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git pull</span></span><br></pre></td></tr></table></figure>

<p>将另一个分支的一个特定提交合并到当前分支</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git cherry-pick [commit_id]</span></span><br></pre></td></tr></table></figure>

<h3 id="远程"><a href="#远程" class="headerlink" title="远程"></a>远程</h3><!--rehype:wrap-class=row-span-2-->

<p>添加一个 git URL 作为别名</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git remote add [<span class="built_in">alias</span>] [url]</span></span><br></pre></td></tr></table></figure>

<p>显示您设置的远程存储库的名称</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git remote</span></span><br></pre></td></tr></table></figure>

<p>显示远程存储库的名称和 URL</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git remote -v</span></span><br></pre></td></tr></table></figure>

<p>删除远程存储库</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git remote <span class="built_in">rm</span> [remote repo name]</span></span><br></pre></td></tr></table></figure>

<p>更改 git repo 的 URL</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git remote set-url origin [git_url]</span></span><br></pre></td></tr></table></figure>

<h3 id="跟踪路径更改"><a href="#跟踪路径更改" class="headerlink" title="跟踪路径更改"></a>跟踪路径更改</h3><p>从项目中删除文件并暂存删除以进行提交</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">rm</span> [file]</span></span><br></pre></td></tr></table></figure>

<p>更改现有文件路径并暂存移动</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">mv</span> [existing-path] [new-path]</span></span><br></pre></td></tr></table></figure>

<p>显示所有提交日志，并指示任何移动的路径</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> --<span class="built_in">stat</span> -M</span></span><br></pre></td></tr></table></figure>

<h3 id="gitattributes"><a href="#gitattributes" class="headerlink" title=".gitattributes"></a>.gitattributes</h3><!--rehype:wrap-class=col-span-2 row-span-2-->

<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置默认行为，以防人们没有设置 core.autocrlf</span></span><br><span class="line">* <span class="attr">text</span>=auto</span><br><span class="line"><span class="comment"># 明确声明您希望始终规范化并在结帐时</span></span><br><span class="line"><span class="comment"># 转换为本机行结尾的文本文件</span></span><br><span class="line">*.c text</span><br><span class="line">*.h text</span><br><span class="line"><span class="comment"># 声明在结帐时始终以 CRLF 行结尾的文件</span></span><br><span class="line">*.sln text <span class="attr">eol</span>=crlf</span><br><span class="line"><span class="comment"># 表示所有真正二进制且不应修改的文件</span></span><br><span class="line">*.png binary</span><br><span class="line">*.jpg binary</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/github/linguist/blob/master/docs/overrides.md#using-gitattributes">计入存储库语言</a></p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 标记或取消标记要根据存储库的语言统计数据而</span></span><br><span class="line"><span class="comment"># 忽略或默认隐藏差异的路径</span></span><br><span class="line">search/index.json <span class="attr">linguist-generated</span>=<span class="literal">true</span></span><br><span class="line"><span class="comment"># 以下属性统计 SQL 文件</span></span><br><span class="line">*.sql <span class="attr">linguist-detectable</span>=<span class="literal">true</span></span><br><span class="line"><span class="comment"># 从统计信息中排除</span></span><br><span class="line">docs/formatter.rb <span class="attr">linguist-documentation</span>=<span class="literal">false</span></span><br><span class="line"><span class="comment"># 将它们从统计信息中排除</span></span><br><span class="line">special-vendored-path/* linguist-vendored</span><br><span class="line"><span class="comment"># 将所有 .rb 文件检测为 Java 文件</span></span><br><span class="line">*.rb <span class="attr">linguist-language</span>=Java</span><br></pre></td></tr></table></figure>

<h3 id="git-配置-ssh-代理"><a href="#git-配置-ssh-代理" class="headerlink" title="git 配置 ssh 代理"></a>git 配置 ssh 代理</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> ~/.ssh/config</span><br><span class="line">Host gitlab.com</span><br><span class="line"><span class="comment"># 直接使用 sh**socks 提供的 socks5 代理端口</span></span><br><span class="line">ProxyCommand nc -X 5 -x 127.0.0.1:1080 %h %p</span><br><span class="line"></span><br><span class="line">Host github.com</span><br><span class="line">ProxyCommand nc -X 5 -x 127.0.0.1:1080 %h %p</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h2 id="Commit"><a href="#Commit" class="headerlink" title="Commit"></a>Commit</h2><h3 id="改写历史"><a href="#改写历史" class="headerlink" title="改写历史"></a>改写历史</h3><!--rehype:wrap-class=row-span-2-->

<p>重写最后的提交消息</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit --amend -m <span class="string">&quot;new message&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>修改最新的提交而不更改提交消息</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit --amend --no-edit</span></span><br></pre></td></tr></table></figure>

<h3 id="在-commit-log-中显示-GPG-签名"><a href="#在-commit-log-中显示-GPG-签名" class="headerlink" title="在 commit log 中显示 GPG 签名"></a>在 commit log 中显示 GPG 签名</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --show-signature</span><br></pre></td></tr></table></figure>

<h3 id="修改远程-Commit-记录"><a href="#修改远程-Commit-记录" class="headerlink" title="修改远程 Commit 记录"></a>修改远程 Commit 记录</h3><!--rehype:wrap-class=row-span-5-->

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git rebase -i HEAD~3</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">表示要修改当前版本的倒数第三次状态</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将要更改的记录行首单词 pick 改为 edit</span></span><br><span class="line">pick 96dc3f9 提交 commit 描述内容 1</span><br><span class="line">pick f1cce8a 提交 commit 描述内容 2</span><br><span class="line">pick 6293516 提交 commit 描述内容 3</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Rebase eeb03a4..6293516 onto eeb03a4</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">                    (3 commands)</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Commands:</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">p, pick = 使用提交</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">r, reword = 使用提交，但编辑提交消息</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">e, edit = 使用提交，但停止修改</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">s, squash = 使用提交，但融合到先前的提交中</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">f, fixup = 像 squash，但丢弃此提交的日志消息</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">x, <span class="built_in">exec</span> = 使用 shell 运行命令(该行的其余部分)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">d, drop = 删除提交</span></span><br></pre></td></tr></table></figure>

<p>保存并退出，会弹出下面提示</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">您现在可以修改提交，使用</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   git commit --amend</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># 对更改感到满意后，运行</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   git rebase --continue</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># 1. 通过这条命令进入编辑更改 commit，保存退出</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit --amend</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2. 保存退出确认修改，继续执行下面命令,</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git rebase --<span class="built_in">continue</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果修改多条记录反复执行上面两条命令直到完成所有修改</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">最后，确保没有人提交进行推送，最好不要加 -f 强制推送</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push -f origin master</span></span><br></pre></td></tr></table></figure>

<h3 id="Commit-1"><a href="#Commit-1" class="headerlink" title="Commit"></a>Commit</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit -v --amend</span></span><br></pre></td></tr></table></figure>

<p>重写最后的提交信息</p>
<h3 id="撤销远程记录"><a href="#撤销远程记录" class="headerlink" title="撤销远程记录"></a>撤销远程记录</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">撤销一条记录</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git reset --hard HEAD~1</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">强制同步到远程仓库</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push -f origin HEAD:master</span></span><br></pre></td></tr></table></figure>

<h3 id="放弃本地修改内容"><a href="#放弃本地修改内容" class="headerlink" title="放弃本地修改内容"></a>放弃本地修改内容</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果有的修改以及加入暂存区的话</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git reset --hard</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">还原所有修改，不会删除新增的文件</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout .</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">下面命令会删除新增的文件</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git clean -xdf</span></span><br></pre></td></tr></table></figure>

<h3 id="把-A-分支的某一个-commit，放到-B-分支上"><a href="#把-A-分支的某一个-commit，放到-B-分支上" class="headerlink" title="把 A 分支的某一个 commit，放到 B 分支上"></a>把 A 分支的某一个 commit，放到 B 分支上</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">切换到 B 分支</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout &lt;B&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将 A 分支 &lt;hash-id&gt; 的内容 pick 到 B 分支</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git cherry-pick &lt;hash-id&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="重设第一个-commit"><a href="#重设第一个-commit" class="headerlink" title="重设第一个 commit"></a>重设第一个 commit</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git update-ref -d HEAD</span><br></pre></td></tr></table></figure>

<p>把所有的改动都重新放回工作区，并<strong>清空所有的 commit</strong>，这样就可以重新提交第一个 <code>commit</code> 了</p>
<h3 id="回到远程仓库的状态"><a href="#回到远程仓库的状态" class="headerlink" title="回到远程仓库的状态"></a>回到远程仓库的状态</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git fetch --all &amp;&amp; git reset --hard origin/master</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<p>抛弃本地所有的修改，回到远程仓库的状态</p>
<h3 id="commit-历史中显示-Branch1-有的但是-Branch2-没有-commit"><a href="#commit-历史中显示-Branch1-有的但是-Branch2-没有-commit" class="headerlink" title="commit 历史中显示 Branch1 有的但是 Branch2 没有 commit"></a>commit 历史中显示 Branch1 有的但是 Branch2 没有 commit</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> Branch1 ^Branch2</span><br></pre></td></tr></table></figure>

<h3 id="git-迁移"><a href="#git-迁移" class="headerlink" title="git 迁移"></a>git 迁移</h3><!--rehype:wrap-class=col-span-2-->

<ul>
<li>从原地址克隆一份裸版本库</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> --bare https://github.com/username/project.git</span><br></pre></td></tr></table></figure>

<ul>
<li>然后新建一个地址，比如一下</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ https://gitee.com/username/newproject.git</span><br></pre></td></tr></table></figure>

<ul>
<li>进入project.git这个全裸版本库，以镜像推送的方式上传代码到newproject上。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ cd project.git</span><br><span class="line"></span><br><span class="line">$ git push --mirror https://gitee.com/username/newproject.git</span><br></pre></td></tr></table></figure>

<ul>
<li>使用新地址，直接 Clone 到本地就可以了。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git clone https://gitee.com/username/newproject.git</span><br></pre></td></tr></table></figure>

<h2 id="Git-Submodule-子模块"><a href="#Git-Submodule-子模块" class="headerlink" title="Git Submodule 子模块"></a>Git Submodule 子模块</h2><h3 id="添加子模块"><a href="#添加子模块" class="headerlink" title="添加子模块"></a>添加子模块</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git submodule add &lt;仓库地址&gt; &lt;子模块路径&gt;</span><br></pre></td></tr></table></figure>

<h3 id="克隆包含子模块的仓库"><a href="#克隆包含子模块的仓库" class="headerlink" title="克隆包含子模块的仓库"></a>克隆包含子模块的仓库</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> &lt;repository_url&gt; --recursive</span><br></pre></td></tr></table></figure>

<h3 id="更新子模块"><a href="#更新子模块" class="headerlink" title="更新子模块"></a>更新子模块</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git submodule update --remote</span><br></pre></td></tr></table></figure>

<h3 id="切换到子模块的特定提交"><a href="#切换到子模块的特定提交" class="headerlink" title="切换到子模块的特定提交"></a>切换到子模块的特定提交</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> &lt;path_to_submodule&gt;</span><br><span class="line">$ git checkout &lt;commit_hash&gt;</span><br></pre></td></tr></table></figure>

<h3 id="查看当前仓库中的子模块"><a href="#查看当前仓库中的子模块" class="headerlink" title="查看当前仓库中的子模块"></a>查看当前仓库中的子模块</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git submodule status</span><br></pre></td></tr></table></figure>

<h3 id="初始化子模块"><a href="#初始化子模块" class="headerlink" title="初始化子模块"></a>初始化子模块</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git submodule init</span><br></pre></td></tr></table></figure>

<h3 id="切换到父仓库的特定提交，并更新子模块"><a href="#切换到父仓库的特定提交，并更新子模块" class="headerlink" title="切换到父仓库的特定提交，并更新子模块"></a>切换到父仓库的特定提交，并更新子模块</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ..</span><br><span class="line">$ git checkout &lt;commit_hash&gt;</span><br><span class="line">$ git submodule update --remote</span><br></pre></td></tr></table></figure>

<h3 id="获取并切换子模块的最新标签"><a href="#获取并切换子模块的最新标签" class="headerlink" title="获取并切换子模块的最新标签"></a>获取并切换子模块的最新标签</h3><!--rehype:wrap-class=col-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> &lt;path_to_submodule&gt;</span><br><span class="line">$ git fetch --tags</span><br><span class="line">$ git checkout $(git describe --tags $(git rev-list --tags --max-count=1))</span><br></pre></td></tr></table></figure>

<h3 id="子模块递归"><a href="#子模块递归" class="headerlink" title="子模块递归"></a>子模块递归</h3><!--rehype:wrap-class=col-span-2 row-span-3-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加所有已存在的子模块</span></span><br><span class="line">$ git submodule foreach --recursive git submodule add &lt;repository_url&gt;</span><br><span class="line"><span class="comment"># 更新所有子模块到最新提交</span></span><br><span class="line">$ git submodule foreach --recursive git pull origin master</span><br><span class="line"><span class="comment"># 检出特定的子模块路径</span></span><br><span class="line">$ git submodule foreach --recursive git checkout &lt;branch_name&gt;</span><br><span class="line"><span class="comment"># 获取仓库中的所有子模块变化</span></span><br><span class="line">$ git submodule foreach --recursive git fetch</span><br><span class="line"><span class="comment"># 获取并合并子模块的远程分支</span></span><br><span class="line">$ git submodule foreach --recursive git pull origin &lt;branch_name&gt;</span><br><span class="line"><span class="comment"># 将子模块还原到父仓库中的初始提交</span></span><br><span class="line">$ git submodule foreach --recursive git checkout .</span><br><span class="line"><span class="comment"># 获取子模块的更新并忽略本地修改</span></span><br><span class="line">$ git submodule foreach --recursive git fetch --all</span><br><span class="line">$ git submodule foreach --recursive git reset --hard origin/master</span><br></pre></td></tr></table></figure>

<h3 id="获取子模块的最新提交"><a href="#获取子模块的最新提交" class="headerlink" title="获取子模块的最新提交"></a>获取子模块的最新提交</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> &lt;path_to_submodule&gt;</span><br><span class="line">$ git pull</span><br></pre></td></tr></table></figure>

<h3 id="删除子模块"><a href="#删除子模块" class="headerlink" title="删除子模块"></a>删除子模块</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git submodule deinit &lt;path_to_submodule&gt;</span><br><span class="line">$ git <span class="built_in">rm</span> &lt;path_to_submodule&gt;</span><br></pre></td></tr></table></figure>

<h3 id="切换子模块的分支"><a href="#切换子模块的分支" class="headerlink" title="切换子模块的分支"></a>切换子模块的分支</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> &lt;path_to_submodule&gt;</span><br><span class="line">$ git checkout &lt;branch_name&gt;</span><br></pre></td></tr></table></figure>

<h3 id="初始化并更新所有子模块"><a href="#初始化并更新所有子模块" class="headerlink" title="初始化并更新所有子模块"></a>初始化并更新所有子模块</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git submodule init</span><br><span class="line">$ git submodule update</span><br></pre></td></tr></table></figure>

<h3 id="切换子模块的特定标签"><a href="#切换子模块的特定标签" class="headerlink" title="切换子模块的特定标签"></a>切换子模块的特定标签</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> &lt;path_to_submodule&gt;</span><br><span class="line">$ git checkout tags/&lt;tag_name&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Config-设置"><a href="#Config-设置" class="headerlink" title="Config 设置"></a>Config 设置</h2><h3 id="查看配置的信息"><a href="#查看配置的信息" class="headerlink" title="查看配置的信息"></a>查看配置的信息</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">help</span> config</span><br></pre></td></tr></table></figure>

<p>获取帮助信息，查看修改个人信息的参数</p>
<h3 id="忽略文件的权限变化"><a href="#忽略文件的权限变化" class="headerlink" title="忽略文件的权限变化"></a>忽略文件的权限变化</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git config core.fileMode false</span><br></pre></td></tr></table></figure>

<p>不再将文件的权限变化视作改动</p>
<h3 id="配置自动换行"><a href="#配置自动换行" class="headerlink" title="配置自动换行"></a>配置自动换行</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git config --global core.autocrlf input</span><br></pre></td></tr></table></figure>

<p>自动转换坑太大，提交到git是自动将换行符转换为 <code>lf</code></p>
<h3 id="获取帮助信息"><a href="#获取帮助信息" class="headerlink" title="获取帮助信息"></a>获取帮助信息</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git config --list</span><br></pre></td></tr></table></figure>

<h3 id="中文乱码的解决方案"><a href="#中文乱码的解决方案" class="headerlink" title="中文乱码的解决方案"></a>中文乱码的解决方案</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global core.quotepath <span class="literal">false</span></span></span><br></pre></td></tr></table></figure>

<h3 id="删除全局设置"><a href="#删除全局设置" class="headerlink" title="删除全局设置"></a>删除全局设置</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git config --global --<span class="built_in">unset</span> &lt;entry-name&gt;</span><br></pre></td></tr></table></figure>

<h3 id="配置-http-和-socks-代理"><a href="#配置-http-和-socks-代理" class="headerlink" title="配置 http 和 socks 代理"></a>配置 http 和 socks 代理</h3><!--rehype:wrap-class=col-span-2 row-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看代理</span></span><br><span class="line">$ git config --global http.proxy</span><br><span class="line">$ git config --global https.proxy</span><br><span class="line">$ git config --global socks.proxy</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置代理</span></span><br><span class="line"><span class="comment"># 适用于 privoxy 将 socks 协议转为 http 协议的 http 端口</span></span><br><span class="line">$ git config --global http.proxy http://127.0.0.1:1080</span><br><span class="line">$ git config --global https.proxy http://127.0.0.1:1080</span><br><span class="line">$ git config --global socks.proxy 127.0.0.1:1080</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取消代理</span></span><br><span class="line">$ git config --global --<span class="built_in">unset</span> http.proxy</span><br><span class="line">$ git config --global --<span class="built_in">unset</span> https.proxy</span><br><span class="line">$ git config --global --<span class="built_in">unset</span> socks.proxy</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只对 github.com 设置代理</span></span><br><span class="line">$ git config --global http.https://github.com.proxy socks5://127.0.0.1:1080</span><br><span class="line">$ git config --global https.https://github.com.proxy socks5://127.0.0.1:1080</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取消 github.com 代理</span></span><br><span class="line">$ git config --global --<span class="built_in">unset</span> http.https://github.com.proxy</span><br><span class="line">$ git config --global --<span class="built_in">unset</span> https.https://github.com.proxy</span><br></pre></td></tr></table></figure>

<h3 id="Git-别名"><a href="#Git-别名" class="headerlink" title="Git 别名"></a>Git 别名</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global alias.co checkout</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global alias.br branch</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global alias.ci commit</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --global alias.st status</span></span><br></pre></td></tr></table></figure>

<p>配置好后，再输入 <code>git</code> 命令的时候就不用再输入一大段了，例如我们要查看状态，只需：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git st</span><br></pre></td></tr></table></figure>

<p>也可以看看：<a target="_blank" rel="noopener" href="https://gist.github.com/johnpolacek/69604a1f6861129ef088">更多别名</a></p>
<h3 id="设置大小写敏感"><a href="#设置大小写敏感" class="headerlink" title="设置大小写敏感"></a>设置大小写敏感</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看git 的设置</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --get core.ignorecase</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置大小写敏感</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config core.ignorecase <span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">远程有俩相同目录，通过这种方式清除掉，然后提交记录</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">rm</span> -r --cached &lt;目录/文件&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Git-技巧"><a href="#Git-技巧" class="headerlink" title="Git 技巧"></a>Git 技巧</h2><h3 id="重命名分支"><a href="#重命名分支" class="headerlink" title="重命名分支"></a>重命名分支</h3><ul>
<li><p><strong>重命名</strong>为<code>new</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -m &lt;new&gt;</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -m &lt;old&gt; &lt;new&gt; <span class="comment">#重命名分支</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>推送</strong>并重置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push origin -u &lt;new&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>删除</strong>远程分支</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push origin --delete &lt;old&gt; <span class="comment">#方法1</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push origin :oldBranchName <span class="comment">#方法2</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
<!--rehype:className=style-timeline-->

<h3 id="Log"><a href="#Log" class="headerlink" title="Log"></a>Log</h3><p>按内容搜索更改</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> -S<span class="string">&#x27;&lt;a term in the source&gt;&#x27;</span></span></span><br></pre></td></tr></table></figure>

<p>显示特定文件随时间的变化</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> -p &lt;file_name&gt;</span></span><br></pre></td></tr></table></figure>

<p>打印出很酷的日志可视化</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> --pretty=oneline --graph --decorate --all</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h3><!--rehype:wrap-class=row-span-2-->

<p>列出所有分支及其上游</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -vv</span></span><br></pre></td></tr></table></figure>

<p>快速切换到上一个分支</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout -</span></span><br></pre></td></tr></table></figure>

<p>只获取所有远程分支</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -r</span></span><br></pre></td></tr></table></figure>

<p>从另一个分支签出单个文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git checkout &lt;branch&gt; -- &lt;file&gt;</span></span><br></pre></td></tr></table></figure>

<p>删除本地存在远程不存在的分支</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git remote prune origin</span></span><br></pre></td></tr></table></figure>

<h3 id="获取最近一次提交的-Hash"><a href="#获取最近一次提交的-Hash" class="headerlink" title="获取最近一次提交的 Hash"></a>获取最近一次提交的 Hash</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git rev-parse HEAD <span class="comment"># e10721cb8859b2c</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取短 <span class="built_in">hash</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git rev-parse --short HEAD <span class="comment"># e10721c</span></span></span><br></pre></td></tr></table></figure>

<h3 id="删除已经合并到-master-的分支"><a href="#删除已经合并到-master-的分支" class="headerlink" title="删除已经合并到 master 的分支"></a>删除已经合并到 master 的分支</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch --merged master | grep -v <span class="string">&#x27;^\*\|  master&#x27;</span> | xargs -n 1 git branch -d</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="查看冲突文件列表"><a href="#查看冲突文件列表" class="headerlink" title="查看冲突文件列表"></a>查看冲突文件列表</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git diff --name-only --diff-filter=U</span><br></pre></td></tr></table></figure>

<h3 id="展示工作区的冲突文件列表"><a href="#展示工作区的冲突文件列表" class="headerlink" title="展示工作区的冲突文件列表"></a>展示工作区的冲突文件列表</h3><!--rehype:wrap-class=row-span-2-->

<p>输出工作区和暂存区的 different (不同)。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git diff</span><br></pre></td></tr></table></figure>

<p>还可以展示本地仓库中任意两个 commit 之间的文件变动：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git diff &lt;commit-id&gt; &lt;commit-id&gt;</span><br></pre></td></tr></table></figure>

<h3 id="展示暂存区和最近版本的不同"><a href="#展示暂存区和最近版本的不同" class="headerlink" title="展示暂存区和最近版本的不同"></a>展示暂存区和最近版本的不同</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git diff --cached</span><br></pre></td></tr></table></figure>

<h3 id="展示暂存区、工作区和最近版本的不同"><a href="#展示暂存区、工作区和最近版本的不同" class="headerlink" title="展示暂存区、工作区和最近版本的不同"></a>展示暂存区、工作区和最近版本的不同</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git diff HEAD</span><br></pre></td></tr></table></figure>

<p>输出工作区、暂存区 和本地最近的版本(commit)的different(不同)。</p>
<h3 id="删除已经合并到-master-的分支-1"><a href="#删除已经合并到-master-的分支-1" class="headerlink" title="删除已经合并到 master 的分支"></a>删除已经合并到 master 的分支</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git branch --merged master | grep -v <span class="string">&#x27;^\*\|  master&#x27;</span> | xargs -n 1 git branch -d</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="关联远程分支"><a href="#关联远程分支" class="headerlink" title="关联远程分支"></a>关联远程分支</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git branch -u origin/mybranch</span><br></pre></td></tr></table></figure>

<p>或者在 <code>push</code> 时加上 <code>-u</code> 参数</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git push origin/mybranch -u</span><br></pre></td></tr></table></figure>

<p>关联之后，<code>git branch -vv</code> 就可以展示关联的远程分支名了, 同时推送到远程仓库直接：<code>git push</code>，不需要指定远程仓库</p>
<h3 id="查看远程分支和本地分支的对应关系"><a href="#查看远程分支和本地分支的对应关系" class="headerlink" title="查看远程分支和本地分支的对应关系"></a>查看远程分支和本地分支的对应关系</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git remote show origin</span><br></pre></td></tr></table></figure>

<h3 id="展示当前分支的最近的-tag"><a href="#展示当前分支的最近的-tag" class="headerlink" title="展示当前分支的最近的 tag"></a>展示当前分支的最近的 tag</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git describe --tags --abbrev=0</span><br></pre></td></tr></table></figure>

<h3 id="修改作者名"><a href="#修改作者名" class="headerlink" title="修改作者名"></a>修改作者名</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git commit --amend --author=<span class="string">&#x27;Author Name &lt;email@address.com&gt;&#x27;</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="增加远程仓库"><a href="#增加远程仓库" class="headerlink" title="增加远程仓库"></a>增加远程仓库</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git remote add origin &lt;remote-url&gt;</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="列出所有远程仓库"><a href="#列出所有远程仓库" class="headerlink" title="列出所有远程仓库"></a>列出所有远程仓库</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git remote -v</span><br></pre></td></tr></table></figure>

<h3 id="从-stash-中拿出某个文件的修改"><a href="#从-stash-中拿出某个文件的修改" class="headerlink" title="从 stash 中拿出某个文件的修改"></a>从 stash 中拿出某个文件的修改</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git checkout &lt;stash@&#123;n&#125;&gt; -- &lt;file-path&gt;</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="展示所有-tracked-的文件"><a href="#展示所有-tracked-的文件" class="headerlink" title="展示所有 tracked 的文件"></a>展示所有 tracked 的文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git ls-files -t</span><br></pre></td></tr></table></figure>

<h3 id="展示所有-untracked-的文件"><a href="#展示所有-untracked-的文件" class="headerlink" title="展示所有 untracked 的文件"></a>展示所有 untracked 的文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git ls-files --others</span><br></pre></td></tr></table></figure>

<h3 id="展示所有忽略的文件"><a href="#展示所有忽略的文件" class="headerlink" title="展示所有忽略的文件"></a>展示所有忽略的文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git ls-files --others -i --exclude-standard</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="把某一个分支导出成一个文件"><a href="#把某一个分支导出成一个文件" class="headerlink" title="把某一个分支导出成一个文件"></a>把某一个分支导出成一个文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git bundle create &lt;file&gt; &lt;branch-name&gt;</span><br></pre></td></tr></table></figure>

<h3 id="从包中导入分支"><a href="#从包中导入分支" class="headerlink" title="从包中导入分支"></a>从包中导入分支</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> repo.bundle &lt;repo-dir&gt; -b &lt;branch-name&gt;</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<p>新建一个分支，分支内容就是上面 <code>git bundle create</code> 命令导出的内容</p>
<h3 id="执行-rebase-之前自动-stash"><a href="#执行-rebase-之前自动-stash" class="headerlink" title="执行 rebase 之前自动 stash"></a>执行 rebase 之前自动 stash</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git rebase --autostash</span><br></pre></td></tr></table></figure>

<h3 id="从远程仓库根据-ID，拉下某一状态，到本地分支"><a href="#从远程仓库根据-ID，拉下某一状态，到本地分支" class="headerlink" title="从远程仓库根据 ID，拉下某一状态，到本地分支"></a>从远程仓库根据 ID，拉下某一状态，到本地分支</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git fetch origin pull/&lt;<span class="built_in">id</span>&gt;/head:&lt;branch-name&gt;</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="详细展示一行中的修改"><a href="#详细展示一行中的修改" class="headerlink" title="详细展示一行中的修改"></a>详细展示一行中的修改</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git diff --word-diff</span><br></pre></td></tr></table></figure>

<h3 id="清除-gitignore-文件中记录的文件"><a href="#清除-gitignore-文件中记录的文件" class="headerlink" title="清除 gitignore 文件中记录的文件"></a>清除 gitignore 文件中记录的文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git clean -X -f</span><br></pre></td></tr></table></figure>

<h3 id="展示忽略的文件"><a href="#展示忽略的文件" class="headerlink" title="展示忽略的文件"></a>展示忽略的文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git status --ignored</span><br></pre></td></tr></table></figure>

<h3 id="新建并切换到新分支上，同时这个分支没有任何-commit"><a href="#新建并切换到新分支上，同时这个分支没有任何-commit" class="headerlink" title="新建并切换到新分支上，同时这个分支没有任何 commit"></a>新建并切换到新分支上，同时这个分支没有任何 commit</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git checkout --orphan &lt;branch-name&gt;</span><br></pre></td></tr></table></figure>

<p>相当于保存修改，但是重写 commit 历史</p>
<h3 id="展示任意分支某一文件的内容"><a href="#展示任意分支某一文件的内容" class="headerlink" title="展示任意分支某一文件的内容"></a>展示任意分支某一文件的内容</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git show &lt;branch-name&gt;:&lt;file-name&gt;</span><br></pre></td></tr></table></figure>

<h3 id="clone-最新一次提交"><a href="#clone-最新一次提交" class="headerlink" title="clone 最新一次提交"></a>clone 最新一次提交</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> --depth=1 https://github.com/user/repo.git</span><br></pre></td></tr></table></figure>

<p>只会 <code>clone</code> 最近一次提交，将减少 <code>clone</code> 时间</p>
<h3 id="忽略某个文件的改动"><a href="#忽略某个文件的改动" class="headerlink" title="忽略某个文件的改动"></a>忽略某个文件的改动</h3><!--rehype:wrap-class=row-span-2-->

<p>关闭 track 指定文件的改动，也就是 Git 将不会在记录这个文件的改动</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git update-index --assume-unchanged path/to/file</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<p>恢复 track 指定文件的改动</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git update-index --no-assume-unchanged path/to/file</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="以最后提交的顺序列出所有-Git-分支"><a href="#以最后提交的顺序列出所有-Git-分支" class="headerlink" title="以最后提交的顺序列出所有 Git 分支"></a>以最后提交的顺序列出所有 Git 分支</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git for-each-ref --<span class="built_in">sort</span>=-committerdate --format=<span class="string">&#x27;%(refname:short)&#x27;</span> refs/heads</span><br></pre></td></tr></table></figure>

<p>最新的放在最上面</p>
<h3 id="把暂存区的指定-file-放到工作区中"><a href="#把暂存区的指定-file-放到工作区中" class="headerlink" title="把暂存区的指定 file 放到工作区中"></a>把暂存区的指定 file 放到工作区中</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git reset &lt;file-name&gt;</span><br></pre></td></tr></table></figure>

<p>不添加参数，默认是 <code>-mixed</code></p>
<h3 id="配置-SSH-协议代理"><a href="#配置-SSH-协议代理" class="headerlink" title="配置 SSH 协议代理"></a>配置 SSH 协议代理</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">对于使用 git@ 协议的，可以配置 socks5 代理</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">macOS 系统编辑 ~/.ssh/config 文件，添加这几行，设置 github 代理</span></span><br><span class="line">Host github.com</span><br><span class="line">  ProxyCommand nc -X 5 -x 127.0.0.1:1080 %h %p</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="Fork仓库同步上游仓库"><a href="#Fork仓库同步上游仓库" class="headerlink" title="Fork仓库同步上游仓库"></a>Fork仓库同步上游仓库</h3><!--rehype:wrap-class=col-span-2-->

<ul>
<li><p>设置上游仓库</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git remote add upstream https://github.com/jaywcjlove/reference.git</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>本地项目操作</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git fetch upstream <span class="comment"># 获取上游仓库更新</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git stach <span class="comment"># 暂存本地修改(如果有)</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git branch -a <span class="comment"># 列出所有远程仓库地址(非必须)</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git rebase remotes/upstream/main <span class="comment"># 使用远程仓库的提交记录来重写本地提交记录</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push -f <span class="comment"># 强制推送到远程(github)仓库</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git stach pop <span class="comment"># 恢复暂存的本地修改(如果有)</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
<!--rehype:className=style-timeline-->

<h2 id="统计查询"><a href="#统计查询" class="headerlink" title="统计查询"></a>统计查询</h2><h3 id="查看-git-上的个人代码量"><a href="#查看-git-上的个人代码量" class="headerlink" title="查看 git 上的个人代码量"></a>查看 git 上的个人代码量</h3><!--rehype:wrap-class=row-span-2-->

<ul>
<li><code>username</code> 需要改成自己的</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">log</span> --author=<span class="string">&quot;username&quot;</span> --pretty=tformat: --numstat | awk \</span><br><span class="line"><span class="string">&#x27;&#123; add += $1; subs += $2; loc += $1 - $2 &#125; END &#123; printf &quot;added lines: %s, removed lines: %s, total lines: %s\n&quot;, add, subs, loc &#125;&#x27;</span> -</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="统计每个人增删行数"><a href="#统计每个人增删行数" class="headerlink" title="统计每个人增删行数"></a>统计每个人增删行数</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">log</span> --format=<span class="string">&#x27;%aN&#x27;</span> | <span class="built_in">sort</span> -u |\</span><br><span class="line">  <span class="keyword">while</span> <span class="built_in">read</span> name; <span class="keyword">do</span> <span class="built_in">echo</span> -en <span class="string">&quot;<span class="variable">$name</span>\t&quot;</span>;\</span><br><span class="line">  git <span class="built_in">log</span> --author=<span class="string">&quot;<span class="variable">$name</span>&quot;</span> --pretty=tformat: --numstat | awk \</span><br><span class="line">  <span class="string">&#x27;&#123; add += $1; subs += $2; loc += $1 - $2 &#125; END &#123; printf &quot;added lines: %s, removed lines: %s, total lines: %s\n&quot;, add, subs, loc &#125;&#x27;</span> -; <span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="查看仓库提交者排名"><a href="#查看仓库提交者排名" class="headerlink" title="查看仓库提交者排名"></a>查看仓库提交者排名</h3><p>这里是排名前十，也可以更改排名</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">log</span> --pretty=<span class="string">&#x27;%aN&#x27;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -k1 -n -r | <span class="built_in">head</span> -n 10</span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="提交数统计"><a href="#提交数统计" class="headerlink" title="提交数统计"></a>提交数统计</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">log</span> --oneline | <span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure>

<h3 id="查看某段代码是谁写的"><a href="#查看某段代码是谁写的" class="headerlink" title="查看某段代码是谁写的"></a>查看某段代码是谁写的</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git blame &lt;file-name&gt;</span><br></pre></td></tr></table></figure>

<p><code>blame</code> 的意思为<code>责怪</code>，你懂的。</p>
<h3 id="查看两个星期内的改动"><a href="#查看两个星期内的改动" class="headerlink" title="查看两个星期内的改动"></a>查看两个星期内的改动</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git whatchanged --since=<span class="string">&#x27;2 weeks ago&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="在-commit-log-中查找相关内容"><a href="#在-commit-log-中查找相关内容" class="headerlink" title="在 commit log 中查找相关内容"></a>在 commit log 中查找相关内容</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --all --grep=<span class="string">&#x27;&lt;given-text&gt;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>通过 grep 查找，given-text: 所需要查找的字段</p>
<h3 id="Git-仓库的大小"><a href="#Git-仓库的大小" class="headerlink" title="Git 仓库的大小"></a>Git 仓库的大小</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git ls-files | xargs -r <span class="built_in">du</span> -hs</span><br></pre></td></tr></table></figure>

<h3 id="Git-仓库的总大小"><a href="#Git-仓库的总大小" class="headerlink" title="Git 仓库的总大小"></a>Git 仓库的总大小</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git count-objects -vH</span><br></pre></td></tr></table></figure>

<h3 id="查询历史体积大的-10-个文件"><a href="#查询历史体积大的-10-个文件" class="headerlink" title="查询历史体积大的 10 个文件"></a>查询历史体积大的 10 个文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git rev-list --objects --all | git cat-file --batch-check=<span class="string">&#x27;%(objecttype) %(objectname) %(objectsize) %(rest)&#x27;</span> | awk <span class="string">&#x27;/^blob/ &#123;print substr($0,6)&#125;&#x27;</span> | <span class="built_in">sort</span> --numeric-sort --key=2 --reverse | <span class="built_in">head</span> -n 10 | <span class="built_in">cut</span> -c 13-</span><br></pre></td></tr></table></figure>

<h2 id="Conventional-Commmits"><a href="#Conventional-Commmits" class="headerlink" title="Conventional Commmits"></a>Conventional Commmits</h2><h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><!--rehype:wrap-class=col-span-3-->

<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;short summary&gt;</span><br><span class="line">  │       │             │</span><br><span class="line">  │       │             └─⫸ 紧凑简短的描述，无需大写，也不需要用句号结尾</span><br><span class="line">  │       │</span><br><span class="line">  │       └─⫸ Commit 范围: animations|bazel|benchpress|common|compiler|compiler-cli|core|</span><br><span class="line">  │                          elements|forms|http|language-service|localize|platform-browser|</span><br><span class="line">  │                          platform-browser-dynamic|platform-server|router|service-worker|</span><br><span class="line">  │                          upgrade|zone.js|packaging|changelog|docs-infra|migrations|ngcc|ve|</span><br><span class="line">  │                          devtools....</span><br><span class="line">  │</span><br><span class="line">  └─⫸ Commit 类型: build|ci|doc|docs|feat|fix|perf|refactor|test</span><br><span class="line">                    website|chore|style|type|revert</span><br></pre></td></tr></table></figure>

<h3 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h3><!--rehype:wrap-class=row-span-1-->

<table>
<thead>
<tr>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>feat:</code></td>
<td>新特性</td>
</tr>
<tr>
<td><code>fix(scope):</code></td>
<td>修复 scope 中的 Bug</td>
</tr>
<tr>
<td><code>feat!:</code> &#x2F; <code>feat(scope)!:</code></td>
<td>breaking change &#x2F;  重构 API</td>
</tr>
<tr>
<td><code>chore(deps):</code></td>
<td>更新依赖</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<h3 id="Commit-类型"><a href="#Commit-类型" class="headerlink" title="Commit 类型"></a>Commit 类型</h3><!--rehype:wrap-class=col-span-2-->

<table>
<thead>
<tr>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>build:</code></td>
<td>变更影响的是<strong>构建系统</strong>或者<strong>外部依赖</strong> (如: gulp, npm)</td>
</tr>
<tr>
<td><code>ci:</code></td>
<td>修改了 CI 配置文件或脚本 (如: Github Action, Travis)</td>
</tr>
<tr>
<td><code>chore:</code></td>
<td><strong>【重要】</strong> 变更不影响源代码或测试（如更新了辅助工具、库等)</td>
</tr>
<tr>
<td><code>docs:</code></td>
<td>只修改了文档</td>
</tr>
<tr>
<td><code>feat:</code></td>
<td><strong>【重要】</strong> 一个新特性</td>
</tr>
<tr>
<td><code>fix:</code></td>
<td><strong>【重要】</strong> 修复了一个 Bug</td>
</tr>
<tr>
<td><code>perf:</code></td>
<td>增强性能的代码变更</td>
</tr>
<tr>
<td><code>refactor:</code></td>
<td>并非修复 Bug 或添加新特性的代码变更</td>
</tr>
<tr>
<td><code>revert:</code></td>
<td>回退代码</td>
</tr>
<tr>
<td><code>style:</code></td>
<td>变更不影响一些有意义的代码 (如: 删除空格、格式化代码、添加分号等)</td>
</tr>
<tr>
<td><code>test:</code></td>
<td>添加测试代码或修正已有的测试</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<h2 id="另见"><a href="#另见" class="headerlink" title="另见"></a>另见</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/git-tips/tips">最常用的 git 提示和技巧</a></li>
<li><a target="_blank" rel="noopener" href="https://www.conventionalcommits.org/zh-hans/v1.0.0/">Conventional Commits 官方网站</a> <em>(conventionalcommits.org)</em></li>
<li><a target="_blank" rel="noopener" href="https://gist.github.com/Zekfad/f51cb06ac76e2457f11c80ed705c95a3">Conventional Commits Cheatsheet</a> <em>(gist.github.com)</em></li>
</ul>
</div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">毅栈</div><div class="author-info__description">记录生活，分享技术。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">15</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/caoyixiong"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;amp;uin=409677557&amp;amp;site=qq&amp;amp;menu=yes" target="_blank" title="QQ"><i class="fab fa-qq" style="color: #24292e;"></i></a><a class="social-icon" href="/img/wechat.jpg" target="_blank" title="微信"><i class="fab fa-weixin" style="color: #24292e;"></i></a><a class="social-icon" href="https://github.com/caoyixiong" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:409677557@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">如果阅读过程中遇到了问题，请及时评论或者留言，看到了会在第一时间给出回复。</div></div><!-- !=partial('includes/widget/card_wx', {}, {cache: true})--><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/b51d9f8e.html" title="Git 命令">Git 命令</a><time datetime="2024-09-03T18:10:26.147Z" title="发表于 2024-09-04 02:10:26">2024-09-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/229924b5.html" title="Vue 快速入门">Vue 快速入门</a><time datetime="2024-08-31T18:49:50.788Z" title="发表于 2024-09-01 02:49:50">2024-09-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/adab0374.html" title="Node 多版本管理">Node 多版本管理</a><time datetime="2024-08-27T12:54:37.582Z" title="发表于 2024-08-27 20:54:37">2024-08-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/5c3d4808.html" title="Go 快速入门">Go 快速入门</a><time datetime="2024-08-23T16:46:21.634Z" title="发表于 2024-08-24 00:46:21">2024-08-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/65b9ed48.html" title="GOPATH 目录结构">GOPATH 目录结构</a><time datetime="2024-08-21T16:28:07.159Z" title="发表于 2024-08-22 00:28:07">2024-08-22</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Git/"><span class="card-category-list-name">Git</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Go/"><span class="card-category-list-name">Go</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Node/"><span class="card-category-list-name">Node</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Ubuntu/"><span class="card-category-list-name">Ubuntu</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Vue/"><span class="card-category-list-name">Vue</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Gin/" style="font-size: 1.1em; color: #999">Gin</a> <a href="/tags/Unbuntu/" style="font-size: 1.3em; color: #99a1ac">Unbuntu</a> <a href="/tags/Node/" style="font-size: 1.1em; color: #999">Node</a> <a href="/tags/%E4%B8%BB%E9%A2%98/" style="font-size: 1.1em; color: #999">主题</a> <a href="/tags/Ubuntu/" style="font-size: 1.1em; color: #999">Ubuntu</a> <a href="/tags/LAMP/" style="font-size: 1.1em; color: #999">LAMP</a> <a href="/tags/Crontab/" style="font-size: 1.1em; color: #999">Crontab</a> <a href="/tags/Vue/" style="font-size: 1.1em; color: #999">Vue</a> <a href="/tags/LNMP/" style="font-size: 1.1em; color: #999">LNMP</a> <a href="/tags/Nvm/" style="font-size: 1.1em; color: #999">Nvm</a> <a href="/tags/Git/" style="font-size: 1.1em; color: #999">Git</a> <a href="/tags/AWK/" style="font-size: 1.1em; color: #999">AWK</a> <a href="/tags/Go/" style="font-size: 1.5em; color: #99a9bf">Go</a> <a href="/tags/Linux/" style="font-size: 1.3em; color: #99a1ac">Linux</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">2024年09月</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">2024年08月</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/07/"><span class="card-archive-list-date">2020年07月</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/03/"><span class="card-archive-list-date">2020年03月</span><span class="card-archive-list-count">4</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">15</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2016-05-13T00:30:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">12.5k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-09-04T10:36:01.961Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/home.jpg')"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">公益广告</p><div class="bg-ad"><div>国家反诈中心是国务院打击治理电信网络新型违法犯罪工作部际联席会议合成作战平台，集资源整合、情报研判、侦查指挥为一体，在打击、防范、治理电信网络诈骗等新型违法犯罪中发挥着重要作用。</div><div class="btn-xz-box"><a class="btn-xz" href="https://caoyixiong.com/">主页</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">导航</p><ul class="ft-links"><li><a href="https://caoyixiong.com/about/">关于博主</a><a href="https://caoyixiong.com/categories/">文章分类</a></li><li><a href="https://caoyixiong.com/sponsor/">来杯咖啡</a><a href="https://caoyixiong.com/tags/">文章标签</a></li><li><a href="https://caoyixiong.com/comments/">说点什么</a><a href="https://caoyixiong.com/archives/">文章归档</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">友链</p><div class="ft-img-group"><div class="img-group-item"><a href="https://caoyixiong.com/"><img src="/img/avatar.jpg" alt=""/></a></div></div></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-8sxa.vercel.app',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-8sxa.vercel.app',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-8sxa.vercel.app',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script data-pjax defer src="https://npm.elemecdn.com/tzy-blog/lib/js/theme/chocolate.js"></script><script data-pjax defer src="/js/cursor.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.22.1/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.65.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js?v=4.13.0"></script></div></div></body></html>