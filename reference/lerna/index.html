<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Lerna 备忘清单 | 太空毅栈</title><meta name="author" content="太空毅栈"><meta name="copyright" content="太空毅栈"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本备忘单旨在快速理解 Lerna v6 所涉及的主要概念，显示了它的常用命令使用清单   入门介绍  现代构建系统，用于管理和发布来自同一存储库的多个 JavaScript&#x2F;TypeScript 包。 $ npx lerna@latest init  下面是示例目录结构 &#123;15&#125;├── README.md├── remixapp   # web 应用 (remixa">
<meta property="og:type" content="website">
<meta property="og:title" content="Lerna 备忘清单">
<meta property="og:url" content="https://caoyixiong.com/reference/lerna/index.html">
<meta property="og:site_name" content="太空毅栈">
<meta property="og:description" content="本备忘单旨在快速理解 Lerna v6 所涉及的主要概念，显示了它的常用命令使用清单   入门介绍  现代构建系统，用于管理和发布来自同一存储库的多个 JavaScript&#x2F;TypeScript 包。 $ npx lerna@latest init  下面是示例目录结构 &#123;15&#125;├── README.md├── remixapp   # web 应用 (remixa">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://caoyixiong.com/img/avatar.jpg">
<meta property="article:published_time" content="2024-08-10T06:16:15.818Z">
<meta property="article:modified_time" content="2024-08-10T06:16:15.818Z">
<meta property="article:author" content="太空毅栈">
<meta property="article:tag" content="博客，生活，技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://caoyixiong.com/img/avatar.jpg"><link rel="shortcut icon" href="/img/logo.png"><link rel="canonical" href="https://caoyixiong.com/reference/lerna/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"3NQ1I8Z7GZ","apiKey":"df5bcd27157ba7efa007752258f185fd","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 太空毅栈","link":"链接: ","source":"来源: 太空毅栈","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Lerna 备忘清单',
  isPost: false,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-08-10 14:16:15'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="/css/universe.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/reference/"><i class="fa-fw fas fa-list"></i><span> 备忘清单</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header" style="background-image: url('/img/home.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="太空毅栈"><img class="site-icon" src="/img/logo.png"/><span class="site-name">太空毅栈</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/reference/"><i class="fa-fw fas fa-list"></i><span> 备忘清单</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="page-site-info"><h1 id="site-title">Lerna 备忘清单</h1></div></header><main class="layout" id="content-inner"><div id="page"><div id="article-container"><p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/lerna"><img src="https://img.shields.io/npm/v/lerna.svg?style=flat" alt="NPM version"></a><br><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/lerna"><img src="https://img.shields.io/npm/dm/lerna.svg?style=flat" alt="Downloads"></a><br><a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/nest/network/dependents"><img src="https://badgen.net/github/dependents-repo/lerna/lerna/nest" alt="Repo Dependents"></a><br><a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/nest"><img src="https://badgen.net/badge/icon/Github?icon=github&label" alt="Github repo"></a></p>
<p>本备忘单旨在快速理解 <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna">Lerna v6</a> 所涉及的主要概念，显示了它的常用命令使用清单</p>
<!--rehype:style=padding-top: 12px;-->

<h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><!--rehype:wrap-class=row-span-2-->

<p>现代构建系统，用于管理和发布来自同一存储库的多个 JavaScript&#x2F;TypeScript 包。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npx lerna@latest init</span><br></pre></td></tr></table></figure>

<p>下面是示例目录结构</p>
<figure class="highlight shell"><figcaption><span>&#123;15&#125;</span></figcaption><table><tr><td class="code"><pre><span class="line">├── README.md</span><br><span class="line">├── remixapp   # web 应用 (remixapp)</span><br><span class="line">│   ├── src</span><br><span class="line">│   └── package.json</span><br><span class="line">│</span><br><span class="line">├── packages</span><br><span class="line">│   ├── footer # 组件(@remixapp/footer)</span><br><span class="line">│   │   ├── src</span><br><span class="line">│   │   └── package.json</span><br><span class="line">│   │</span><br><span class="line">│   └── header # 组件(@remixapp/header)</span><br><span class="line">│       ├── src</span><br><span class="line">│       └── package.json</span><br><span class="line">│</span><br><span class="line">├── lerna.json</span><br><span class="line">└── package.json</span><br></pre></td></tr></table></figure>

<h3 id="引导程序-Bootstrap"><a href="#引导程序-Bootstrap" class="headerlink" title="引导程序 (Bootstrap)"></a>引导程序 (Bootstrap)</h3><!--rehype:wrap-class=row-span-2-->

<p>它在 <code>package.json</code> 中依赖于它们，如下所示：</p>
<figure class="highlight json"><figcaption><span>&#123;3,4&#125;</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// ....</span></span><br><span class="line">  <span class="attr">&quot;@remixapp/header&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;@remixapp/footer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><code>remixapp</code> 应用程序导入<code>页眉</code>和<code>页脚</code>库，如下所示：</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Header</span> &#125; <span class="keyword">from</span> <span class="string">&quot;header&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Footer</span> &#125; <span class="keyword">from</span> <span class="string">&quot;footer&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Home</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Header</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>Content!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Footer</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="useWorkspaces"><a href="#useWorkspaces" class="headerlink" title="useWorkspaces"></a>useWorkspaces</h3><figure class="highlight json"><figcaption><span>&#123;3&#125;</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;$schema&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node_modules/lerna/schemas/lerna-schema.json&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;useWorkspaces&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text -->

<p>在 <code>lerna.json</code> 中配置 <code>useWorkspaces</code> 告诉 <code>Lerna</code> 将包链接过程委托给你的包管理器 (此功能由 npm、yarn 和 pnpm 支持)。</p>
<h3 id="任务运行"><a href="#任务运行" class="headerlink" title="任务运行"></a>任务运行</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npx lerna run <span class="built_in">test</span> --scope=header <span class="comment"># 单个</span></span><br></pre></td></tr></table></figure>

<p>多个任务运行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npx lerna run <span class="built_in">test</span> --scope=header,footer</span><br></pre></td></tr></table></figure>

<p>忽略 <code>header</code>,<code>footer</code> 其它包中运行任务运行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npx lerna run build --ignore=header,footer</span><br></pre></td></tr></table></figure>

<h2 id="命令索引"><a href="#命令索引" class="headerlink" title="命令索引"></a>命令索引</h2><h3 id="run-exec-运行命令"><a href="#run-exec-运行命令" class="headerlink" title="run&#x2F;exec 运行命令"></a>run&#x2F;exec 运行命令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在所有包含它的包中运行 npm run my-script</span></span><br><span class="line">$ lerna run &lt;script&gt; -- [..args]</span><br><span class="line">$ lerna run <span class="built_in">test</span></span><br><span class="line">$ lerna run build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 观看所有包并在更改时转换，流式前缀输出</span></span><br><span class="line">$ lerna run --parallel watch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在所有包中运行命令</span></span><br><span class="line">$ lerna <span class="built_in">exec</span> -- &lt;<span class="built_in">command</span>&gt; [..args]</span><br><span class="line">$ lerna <span class="built_in">exec</span> -- <span class="built_in">rm</span> -rf ./node_modules</span><br><span class="line">$ lerna <span class="built_in">exec</span> -- protractor conf.js</span><br></pre></td></tr></table></figure>

<hr>
<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--npm-client &lt;client&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/run#--npm-client-client">#</a></td>
<td align="left">必须是知道如何运行 npm 生命周期脚本的可执行文件，默认值是 <code>npm</code></td>
</tr>
<tr>
<td align="left"><code>--stream</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/run#--stream">#</a></td>
<td align="left">立即从子进程流式输出，以原始包名称为前缀</td>
</tr>
<tr>
<td align="left"><code>--parallel</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/run#--parallel">#</a></td>
<td align="left">类似于 <code>--stream</code> 但完全忽略并发和拓扑排序，立即在所有匹配的包中运行给定的命令或脚本，并带有前缀流输出</td>
</tr>
<tr>
<td align="left"><code>--no-bail</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/run#--no-bail">#</a></td>
<td align="left">默认情况下，如果任何脚本运行返回非零退出代码，<code>lerna run</code> 将退出并出现错误。传递 <code>--no-bail</code> 以禁用此行为</td>
</tr>
<tr>
<td align="left"><code>--no-prefix</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/run#--no-prefix">#</a></td>
<td align="left">当输出为流式传输（<code>--stream</code> 或 <code>--parallel</code>）时禁用包名称前缀。当将结果传送到其他进程（例如编辑器插件）时，此选项很有用</td>
</tr>
<tr>
<td align="left"><code>--profile</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/run#--profile">#</a></td>
<td align="left">分析脚本执行并生成性能配置文件</td>
</tr>
<tr>
<td align="left"><code>--profile-location &lt;location&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/run#--profile-location-location">#</a></td>
<td align="left">您可以为性能配置文件输出提供自定义位置。提供的路径将相对于当前工作目录进行解析。</td>
</tr>
<tr>
<td align="left"><code>useNx=false</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/run#usenxfalse">#</a></td>
<td align="left">通过将 <code>useNx</code> 设置为 <code>false</code>，您可以使用 <code>lerna</code> 中的遗留任务运行实现 (<code>p-map</code> 和 <code>p-queue</code>)，而不是使用由 <a target="_blank" rel="noopener" href="https://nx.dev/">Nx</a> 提供支持的默认现代任务运行器实现。</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h3 id="publish-发布包"><a href="#publish-发布包" class="headerlink" title="publish 发布包"></a>publish 发布包</h3><!--rehype:wrap-class=row-span-3-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 发布自上次发布以来已更改的软件包</span></span><br><span class="line">$ lerna publish              </span><br><span class="line"><span class="comment"># 显式发布在当前提交中标记的包</span></span><br><span class="line">$ lerna publish from-git     </span><br><span class="line"><span class="comment"># 显式发布注册表中不存在最新版本的软件包</span></span><br><span class="line">$ lerna publish from-package</span><br><span class="line"><span class="comment"># 使用下一个语义预发布版本，例如</span></span><br><span class="line">$ lerna publish --canary</span><br><span class="line"><span class="comment"># 1.0.0 =&gt; 1.0.1-alpha.0+$&#123;SHA&#125;</span></span><br><span class="line"><span class="comment"># 自上次提交以来更改的包</span></span><br><span class="line"><span class="comment"># 随后的金丝雀发布将产生1.0.1-alpha.1+$&#123;SHA&#125;等</span></span><br><span class="line"></span><br><span class="line">$ lerna publish --canary --preid beta</span><br><span class="line"><span class="comment"># 1.0.0 =&gt; 1.0.1-beta.0+$&#123;SHA&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 以下是等价的：</span></span><br><span class="line">$ lerna publish --canary minor</span><br><span class="line">$ lerna publish --canary preminor</span><br><span class="line"><span class="comment"># 1.0.0 =&gt; 1.1.0-alpha.0+$&#123;SHA&#125;</span></span><br></pre></td></tr></table></figure>

<hr>
<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--canary</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--canary">#</a></td>
<td align="left">使用此标志运行时，以更精细的方式（每次提交）发布包</td>
</tr>
<tr>
<td align="left"><code>--contents &lt;dir&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--contents-dir">#</a></td>
<td align="left">要发布的子目录。 必须适用于所有包，并且必须包含 <code>package.json</code> 文件</td>
</tr>
<tr>
<td align="left"><code>--dist-tag &lt;tag&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--dist-tag-tag">#</a></td>
<td align="left">使用此标志运行时，将使用给定的 <code>npm dist-tag</code>（默认为 <code>latest</code>）发布到 <code>npm</code></td>
</tr>
<tr>
<td align="left"><code>--git-head &lt;sha&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--git-head-sha">#</a></td>
<td align="left">打包 <code>tarball</code> 时将显式 <code>SHA</code> 设置为清单上的 <code>gitHead</code>，仅允许使用 <code>from-package</code> 位置</td>
</tr>
<tr>
<td align="left"><code>--graph-type &lt;all|dependencies&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--graph-type-alldependencies">#</a></td>
<td align="left">设置在构建包图时使用哪种依赖项。默认值是依赖项，即仅包含包的 <code>package.json</code> 的依赖项部分中列出的包</td>
</tr>
<tr>
<td align="left"><code>--ignore-scripts</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--ignore-scripts">#</a></td>
<td align="left">传递时，此标志将在 <code>lerna</code> 发布期间禁用运行<a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#lifecycle-scripts">生命周期脚本</a></td>
</tr>
<tr>
<td align="left"><code>--ignore-prepublish</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--ignore-prepublish">#</a></td>
<td align="left">传递时，此标志将禁用在 <code>lerna</code> 发布期间运行<a target="_blank" rel="noopener" href="https://docs.npmjs.com/cli/v8/using-npm/scripts#prepare-and-prepublish">已弃用</a>的<a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#lifecycle-scripts">预发布脚本</a></td>
</tr>
<tr>
<td align="left"><code>--legacy-auth</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--legacy-auth">#</a></td>
<td align="left">发布需要身份验证的包时，您正在使用仅使用旧版 <code>Base64</code> <code>用户名:密码</code> 的内部托管 NPM 注册表。这与 NPM 发布 <code>_auth</code> 标志相同</td>
</tr>
<tr>
<td align="left"><code>--no-git-reset</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--no-git-reset">#</a></td>
<td align="left">默认情况下，<code>lerna publish</code> 确保对工作树的任何更改都已重置</td>
</tr>
<tr>
<td align="left"><code>--no-granular-pathspec</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--no-granular-pathspec">#</a></td>
<td align="left">默认情况下，<code>lerna publish</code> 将尝试（如果启用）<code>git checkout</code> 仅在发布过程中临时修改的叶包清单</td>
</tr>
<tr>
<td align="left"><code>--verify-access</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--verify-access">#</a></td>
<td align="left">从历史上看，<code>lerna</code> 试图通过使用给定令牌执行一些抢占式 <code>npm API</code> 请求来快速解决授权&#x2F;身份验证问题</td>
</tr>
<tr>
<td align="left"><code>--otp</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--otp">#</a></td>
<td align="left">发布需要双重身份验证的包时，您可以使用 <code>--otp</code> 指定一次性密码</td>
</tr>
<tr>
<td align="left"><code>--preid</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--preid">#</a></td>
<td align="left">与同名的 <code>lerna</code> 版本选项不同，该选项只适用于 <code>--canary</code> 版本计算</td>
</tr>
<tr>
<td align="left"><code>--pre-dist-tag &lt;tag&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--pre-dist-tag-tag">#</a></td>
<td align="left">与 <code>--dist-tag</code> 的工作方式相同，但仅适用于使用预发布版本发布的软件包</td>
</tr>
<tr>
<td align="left"><code>--registry &lt;url&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--registry-url">#</a></td>
<td align="left">使用此标志运行时，转发的 <code>npm</code> 命令将为您的包使用指定的注册表</td>
</tr>
<tr>
<td align="left"><code>--tag-version-prefix</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--tag-version-prefix">#</a></td>
<td align="left">此选项允许提供自定义前缀而不是默认前缀：<code>v</code></td>
</tr>
<tr>
<td align="left"><code>--temp-tag</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--temp-tag">#</a></td>
<td align="left">传递时，此标志将更改默认发布过程，首先将所有更改的包发布到临时 <code>dist-tag(lerna-temp)</code>，然后将新版本移动到 <code>--dist-tag</code> 配置的 <code>dist-tag</code> (默认<code>latest</code>)</td>
</tr>
<tr>
<td align="left"><code>--yes</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--yes">#</a></td>
<td align="left">使用此标志运行时，<code>lerna publish</code> 将跳过所有确认提示</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="不推荐使用的选项"><a href="#不推荐使用的选项" class="headerlink" title="不推荐使用的选项"></a>不推荐使用的选项</h4><table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--no-verify-access</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--no-verify-access">#</a></td>
<td align="left">旧的抢先访问验证现在默认关闭，因此不需要 <code>--no-verify-access</code></td>
</tr>
<tr>
<td align="left"><code>--skip-npm</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--skip-npm">#</a></td>
<td align="left">直接调用 <a href="#version-%E4%BF%AE%E6%94%B9%E7%89%88%E6%9C%AC%E5%8F%B7">lerna version</a></td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="每个包中的配置"><a href="#每个包中的配置" class="headerlink" title="每个包中的配置"></a>每个包中的配置</h4><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;publishConfig&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;access&quot;</span><span class="punctuation">:</span> <span class="string">&quot;public&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;registry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://my-registry.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;flippin-sweet&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;directory&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dist&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<hr>
<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>access</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#publishconfigaccess">#</a></td>
<td align="left">要发布具有范围的包(例如，<code>@mycompany/rocks</code>)</td>
</tr>
<tr>
<td align="left"><code>registry</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#publishconfigregistry">#</a></td>
<td align="left">通过设置注册表来自定义每个包的注册表</td>
</tr>
<tr>
<td align="left"><code>tag</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#publishconfigtag">#</a></td>
<td align="left">您可以通过设置标签来自定义每个包的 <code>dist-tag</code></td>
</tr>
<tr>
<td align="left"><code>directory</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#publishconfigtag">#</a></td>
<td align="left">这个 <em>非标准</em> 字段允许您像 <code>--contents</code> 一样自定义发布的子目录，但基于每个包</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h3 id="version-修改版本号"><a href="#version-修改版本号" class="headerlink" title="version 修改版本号"></a>version 修改版本号</h3><!--rehype:wrap-class=row-span-3-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ lerna version 1.0.1 <span class="comment"># 明确的</span></span><br><span class="line">$ lerna version patch <span class="comment"># semver 关键字</span></span><br><span class="line">$ lerna version       <span class="comment"># 从提示中选择</span></span><br><span class="line"></span><br><span class="line">$ lerna version [major | minor | ...]</span><br><span class="line"><span class="comment"># 使用下一个语义版本值</span></span><br><span class="line"><span class="comment"># 这会跳过“为...选择新版本”提示</span></span><br><span class="line"><span class="comment"># 强制所有包版本化</span></span><br><span class="line">$ lerna version --force-publish</span><br><span class="line">$ lerna version -m <span class="string">&quot;chore(doc): publish %s&quot;</span></span><br><span class="line"><span class="comment"># 提交消息 = &quot;chore(doc): publish v1.0.0&quot;</span></span><br><span class="line">$ lerna version -m <span class="string">&quot;chore(doc): publish %v&quot;</span></span><br><span class="line"><span class="comment"># 提交消息 = &quot;chore(doc): publish 1.0.0&quot;</span></span><br></pre></td></tr></table></figure>

<hr>
<ul>
<li><code>major</code> 重大的</li>
<li><code>minor</code> 次要的</li>
<li><code>patch</code> 修补</li>
<li><code>premajor</code> 主要的</li>
<li><code>preminor</code> 初级</li>
<li><code>prepatch</code> 预补丁</li>
<li><code>prerelease</code> 预发行<!--rehype:className=cols-2--></li>
</ul>
<hr>
<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--allow-branch &lt;glob&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--allow-branch-glob">#</a></td>
<td align="left">与启用 <code>lerna version</code> 的 <code>git</code> 分支匹配的 <code>glob</code> 白名单</td>
</tr>
<tr>
<td align="left"><code>--amend</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--amend">#</a></td>
<td align="left">使用此标志运行时，<code>lerna version</code> 将在当前提交上执行所有更改，而不是添加新的</td>
</tr>
<tr>
<td align="left"><code>--changelog-preset</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--changelog-preset">#</a></td>
<td align="left">默认情况下，更改日志预设设置为 <a target="_blank" rel="noopener" href="https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-angular#angular-convention">angular</a></td>
</tr>
<tr>
<td align="left"><code>--conventional-commits</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--conventional-commits">#</a></td>
<td align="left">使用常规提交规范来确定<a target="_blank" rel="noopener" href="https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-recommended-bump">版本 bump</a> 并生成 CHANGELOG.md 文件</td>
</tr>
<tr>
<td align="left"><code>--conventional-graduate</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--conventional-graduate">#</a></td>
<td align="left">将使用 <code>*</code> 对指定的包(逗号分隔)或所有包进行分级</td>
</tr>
<tr>
<td align="left"><code>--conventional-prerelease</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--conventional-prerelease">#</a></td>
<td align="left">预发布版本发布指定的包</td>
</tr>
<tr>
<td align="left"><code>--create-release &lt;type&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--create-release-type">#</a></td>
<td align="left">根据更改的包创建正式的 <code>GitHub</code> 或 <code>GitLab</code> 版本</td>
</tr>
<tr>
<td align="left"><code>--exact</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--exact">#</a></td>
<td align="left">在更新的包中精确指定更新的依赖项（没有标点符号），而不是与 <a href="./semver.md">semver</a> 兼容（使用<code>^</code>）</td>
</tr>
<tr>
<td align="left"><code>--force-publish</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--force-publish">#</a></td>
<td align="left">强制发布指定的包</td>
</tr>
<tr>
<td align="left"><code>--git-remote &lt;name&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--git-remote-name">#</a></td>
<td align="left">把 <code>git</code> 更改推送到指定的远程位置，而不是<code>origin</code></td>
</tr>
<tr>
<td align="left"><code>--ignore-changes</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--ignore-changes">#</a></td>
<td align="left">检测更改的包时忽略与 <code>glob</code> 匹配的文件中的更改</td>
</tr>
<tr>
<td align="left"><code>--ignore-scripts</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--ignore-scripts">#</a></td>
<td align="left">禁用在 <code>lerna version</code> 期间运行的生命周期脚本</td>
</tr>
<tr>
<td align="left"><code>--include-merged-tags</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--include-merged-tags">#</a></td>
<td align="left">在检测到更改的包时包括来自合并分支的标签</td>
</tr>
<tr>
<td align="left"><code>--message &lt;msg&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--message-msg">#</a></td>
<td align="left">此选项别名为 <code>-m</code> 以与 <code>git commit</code> 进行奇偶校验</td>
</tr>
<tr>
<td align="left"><code>--no-changelog</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--no-changelog">#</a></td>
<td align="left">使用常规提交时，不要生成任何 CHANGELOG.md 文件</td>
</tr>
<tr>
<td align="left"><code>--no-commit-hooks</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--no-commit-hooks">#</a></td>
<td align="left">允许 <code>git commit hooks</code> 在提交版本更改时运行。通过 <code>--no-commit-hooks</code> 禁用此行为</td>
</tr>
<tr>
<td align="left"><code>--no-git-tag-version</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--no-git-tag-version">#</a></td>
<td align="left">将提交对 <code>package.json</code> 文件的更改并标记发布。通过 <code>--no-git-tag-version</code> 禁用该行为</td>
</tr>
<tr>
<td align="left"><code>--no-granular-pathspec</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--no-granular-pathspec">#</a></td>
<td align="left">仅添加在版本控制过程中更改的叶包清单(可能还有变更日志)。这产生了 <code>git add --packages/*/package.json</code> 的等价物，但针对更改的内容量身定制</td>
</tr>
<tr>
<td align="left"><code>--no-private</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--no-private">#</a></td>
<td align="left">在选择版本、提交和标记版本时包含私有包。通过 <code>--no-private</code> 禁用此行为</td>
</tr>
<tr>
<td align="left"><code>--no-push</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--no-push">#</a></td>
<td align="left">将已提交和标记的更改推送到配置的 <code>git remote</code>。通过 <code>--no-push</code> 禁用此行为</td>
</tr>
<tr>
<td align="left"><code>--preid</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--preid">#</a></td>
<td align="left">使用此标志运行时，lerna 版本将使用指定的<a target="_blank" rel="noopener" href="https://semver.org/#spec-item-9">预发布标识符</a>增加 <code>premajor</code>、<code>preminor</code>、<code>prepatch</code> 或 <code>prerelease</code> <a href="./semver.md">semver</a> bumps</td>
</tr>
<tr>
<td align="left"><code>--sign-git-commit</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--sign-git-commit">#</a></td>
<td align="left">此选项类似于同名的 npm 版本选项</td>
</tr>
<tr>
<td align="left"><code>--sign-git-tag</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--sign-git-tag">#</a></td>
<td align="left">此选项类似于同名的 <code>npm</code> 版本选项</td>
</tr>
<tr>
<td align="left"><code>--force-git-tag</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--force-git-tag">#</a></td>
<td align="left">此选项替换任何现有标记而不是失败</td>
</tr>
<tr>
<td align="left"><code>--tag-version-prefix</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--tag-version-prefix">#</a></td>
<td align="left">此选项允许提供自定义前缀而不是默认前缀：<code>v</code></td>
</tr>
<tr>
<td align="left"><code>--yes</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--yes">#</a></td>
<td align="left">使用此标志运行时，<code>lerna</code> 版本将跳过所有确认提示</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="不推荐使用的选项-1"><a href="#不推荐使用的选项-1" class="headerlink" title="不推荐使用的选项"></a>不推荐使用的选项</h4><table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--cd-version</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--cd-version">#</a></td>
<td align="left">将 <code>semver</code> 关键字传递给 <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#semver-bump">bump</a> 位置</td>
</tr>
<tr>
<td align="left"><code>--repo-version</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--repo-version">#</a></td>
<td align="left">将明确的版本号传递给 <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#semver-bump">bump</a> 位置</td>
</tr>
<tr>
<td align="left"><code>--skip-git</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/version#--skip-git">#</a></td>
<td align="left">请改用 <code>--no-git-tag-version</code> 和 <code>--no-push</code></td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h3 id="bootstrap"><a href="#bootstrap" class="headerlink" title="bootstrap"></a>bootstrap</h3><p>将本地包<code>链接</code>在一起，并<code>安装</code>其余的包依赖项</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ lerna bootstrap -- --production \</span><br><span class="line">                     --no-optional</span><br><span class="line">$ lerna bootstrap --hoist</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--hoist [glob]</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/bootstrap#--strict">#</a></td>
<td align="left">在 <code>repo</code> 根目录安装与 <code>glob</code> 匹配的外部依赖项，以便它们可用于所有包</td>
</tr>
<tr>
<td align="left"><code>--strict</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/bootstrap#--nohoist-glob">#</a></td>
<td align="left">与提升 <em>(hoist)</em> 一起使用时，会在发出版本警告后抛出错误并停止引导</td>
</tr>
<tr>
<td align="left"><code>--nohoist [glob]</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/bootstrap#--nohoist-glob">#</a></td>
<td align="left">不要在 <code>repo</code> 根目录安装与 <code>glob</code> 匹配的外部依赖项。这可用于选择不提升某些依赖项</td>
</tr>
<tr>
<td align="left"><code>--ignore</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/bootstrap#--ignore">#</a></td>
<td align="left">当与 <code>bootstrap</code> 命令一起使用时，还可以在 <code>lerna</code> 中设置 <code>--ignore</code> 标志</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h4><table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--ignore-prepublish</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/bootstrap#--ignore-prepublish">#</a></td>
<td align="left">跳过默认在引导程序包中运行的预发布生命周期脚本</td>
</tr>
<tr>
<td align="left"><code>--ignore-scripts</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/bootstrap#--ignore-scripts">#</a></td>
<td align="left">跳过通常在引导程序包中运行（准备等）的任何生命周期脚本</td>
</tr>
<tr>
<td align="left"><code>--registry &lt;url&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/bootstrap#--registry-url">#</a></td>
<td align="left">指定 npm 包的仓库地址</td>
</tr>
<tr>
<td align="left"><code>--npm-client &lt;client&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/bootstrap#--npm-client-client">#</a></td>
<td align="left">必须是知道如何安装 <code>npm</code> 包依赖项的可执行文件</td>
</tr>
<tr>
<td align="left"><code>--use-workspaces</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/bootstrap#--use-workspaces">#</a></td>
<td align="left">启用与 <code>Yarn Workspaces</code> 的集成(从 <code>yarn@0.27+</code> 开始可用)</td>
</tr>
<tr>
<td align="left"><code>--no-ci</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/bootstrap#--no-ci">#</a></td>
<td align="left">在 <code>CI</code> 环境中调用 <code>npm ci</code> 而不是 <code>npm install</code></td>
</tr>
<tr>
<td align="left"><code>--force-local</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/bootstrap#--force-local">#</a></td>
<td align="left">此标志会导致引导命令始终对本地依赖项进行符号链接，而不管匹配的版本范围如何</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h3 id="info-本地环境信息"><a href="#info-本地环境信息" class="headerlink" title="info 本地环境信息"></a>info 本地环境信息</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ lerna info</span><br><span class="line"></span><br><span class="line">lerna notice cli v6.0.0</span><br><span class="line"> Environment info:</span><br><span class="line"></span><br><span class="line">  System(系统):</span><br><span class="line">    OS: macOS 12.2</span><br><span class="line">    CPU: (8) x64 Apple M1</span><br><span class="line">  Binaries(二进制文件):</span><br><span class="line">    Node: 16.17.0 - /usr/local/bin/node</span><br><span class="line">    Yarn: 1.22.10 - /usr/local/bin/yarn</span><br><span class="line">    npm: 8.5.0 - /usr/local/bin/npm</span><br><span class="line">  Utilities(实用程序):</span><br><span class="line">    Git: 2.33.0 - /opt/homebrew/bin/git</span><br><span class="line">  npmPackages:</span><br><span class="line">    lerna: ^6.0.0 =&gt; 6.0.0</span><br></pre></td></tr></table></figure>

<h3 id="过滤选项"><a href="#过滤选项" class="headerlink" title="过滤选项"></a>过滤选项</h3><!--rehype:wrap-class=col-span-2 row-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ lerna <span class="built_in">exec</span> --scope my-component -- <span class="built_in">ls</span> -la</span><br><span class="line">$ lerna run --scope toolbar-* <span class="built_in">test</span></span><br><span class="line">$ lerna run --scope package-1 --scope *-2 lint</span><br><span class="line"></span><br><span class="line">$ lerna <span class="built_in">exec</span> --ignore package-&#123;1,2,5&#125;  -- <span class="built_in">ls</span> -la</span><br><span class="line">$ lerna run --ignore package-1  <span class="built_in">test</span></span><br><span class="line">$ lerna run --ignore package-@(1|2) --ignore package-3 lint</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出自最新标签以来已更改的包的内容</span></span><br><span class="line">$ lerna <span class="built_in">exec</span> --since -- <span class="built_in">ls</span> -la</span><br><span class="line"><span class="comment"># 对自 main 以来发生更改的所有包运行测试</span></span><br><span class="line">$ lerna run <span class="built_in">test</span> --since main</span><br><span class="line"><span class="comment"># 列出自 some-branch 以来发生变化的所有包</span></span><br><span class="line">$ lerna <span class="built_in">ls</span> --since some-branch</span><br><span class="line"></span><br><span class="line"><span class="comment"># my-component 及其所有依赖项将被引导</span></span><br><span class="line">$ lerna bootstrap --scope my-component --include-dependencies</span><br><span class="line"></span><br><span class="line">$ lerna bootstrap --scope <span class="string">&quot;package-*&quot;</span> --ignore <span class="string">&quot;package-util-*&quot;</span> --include-dependencies</span><br><span class="line"><span class="comment"># 所有匹配 “package-util-*” 的包都将被忽略，除非它们是</span></span><br><span class="line"><span class="comment"># 依赖于名称与 “package-*” 匹配的包</span></span><br></pre></td></tr></table></figure>

<h4 id="选项-1"><a href="#选项-1" class="headerlink" title="选项"></a>选项</h4><table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--scope &lt;glob&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/core/filter-options#--scope-glob">#</a></td>
<td align="left">仅包括名称与给定 <code>glob</code> 匹配的包</td>
</tr>
<tr>
<td align="left"><code>--ignore &lt;glob&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/core/filter-options#--ignore-glob">#</a></td>
<td align="left">排除名称与给定 <code>glob</code> 匹配的包</td>
</tr>
<tr>
<td align="left"><code>--no-private</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/core/filter-options#--no-private">#</a></td>
<td align="left">排除私有包</td>
</tr>
<tr>
<td align="left"><code>--since [ref]</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/core/filter-options#--since-ref">#</a></td>
<td align="left">仅包括自指定 <code>ref</code> 以来已更改的包</td>
</tr>
<tr>
<td align="left"><code>--exclude-dependents</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/core/filter-options#--exclude-dependents">#</a></td>
<td align="left">使用 <code>--since</code> 运行命令时排除所有传递依赖项，覆盖默认的“changed”算法</td>
</tr>
<tr>
<td align="left"><code>--include-dependents</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/core/filter-options#--include-dependents">#</a></td>
<td align="left">无论 <code>--scope</code>、<code>--ignore</code> 或 <code>--since</code> 是什么，在运行命令时都包括所有传递依赖项</td>
</tr>
<tr>
<td align="left"><code>--include-dependencies</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/core/filter-options#--include-dependencies">#</a></td>
<td align="left">无论 <code>--scope</code>、<code>--ignore</code> 或 <code>--since</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/core/filter-options#--since-ref">#</a> 是什么，在运行命令时都包括所有传递依赖项</td>
</tr>
<tr>
<td align="left"><code>--include-merged-tags</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/core/filter-options#--include-merged-tags">#</a></td>
<td align="left">使用 <code>--since</code> 运行命令时包括来自合并分支的标签</td>
</tr>
</tbody></table>
<h3 id="list"><a href="#list" class="headerlink" title="list"></a>list</h3><p>列出本地程序包，也尊重所有可用的<a href="#%E8%BF%87%E6%BB%A4%E9%80%89%E9%A1%B9">过滤选项</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 与 lerna list 相同，它本身类似于 ls 命令</span></span><br><span class="line">lerna <span class="built_in">ls</span></span><br><span class="line"><span class="comment"># 相当于 lerna ls -l，显示长输出</span></span><br><span class="line">lerna ll</span><br><span class="line"><span class="comment"># 相当于 lerna ls -la，显示所有包(包括私有包）</span></span><br><span class="line">lerna la</span><br></pre></td></tr></table></figure>

<h4 id="选项-2"><a href="#选项-2" class="headerlink" title="选项"></a>选项</h4><table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--json</code></td>
<td align="left">显示为 JSON <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--json">#</a></td>
</tr>
<tr>
<td align="left"><code>--ndjson</code></td>
<td align="left">换行符分隔 <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--ndjson">#</a></td>
</tr>
<tr>
<td align="left"><code>-a,--all</code></td>
<td align="left">所有包 <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--all">#</a></td>
</tr>
<tr>
<td align="left"><code>-l,--long</code></td>
<td align="left">显示扩展信息 <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--long">#</a></td>
</tr>
<tr>
<td align="left"><code>-p,--parseable</code></td>
<td align="left">显示可解析的输出 <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--parseable">#</a></td>
</tr>
<tr>
<td align="left"><code>--toposort</code></td>
<td align="left">按拓扑排序 <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--toposort">#</a></td>
</tr>
<tr>
<td align="left"><code>--graph</code></td>
<td align="left">JSON 格式邻接依赖关系图 <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publish#--graph">#</a></td>
</tr>
</tbody></table>
<h3 id="changed"><a href="#changed" class="headerlink" title="changed"></a>changed</h3><p>列出自上次标记版本以来已更改的本地软件包</p>
<ul>
<li><code>lerna changed</code> 支持 <code>lerna ls</code> 支持的所有<a href="#%E9%80%89%E9%A1%B9-1">选项</a></li>
<li>与 <code>lerna ls</code> 不同的是不支持过滤器选项<!--rehype:className=style-round--></li>
</ul>
<p><code>lerna changed</code> 支持 <code>lerna version</code> 的以下选项</p>
<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--conventional-graduate</code></td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publishhttps://github.com/lerna/lerna/tree/main/commands/version#--conventional-graduate">#</a></td>
</tr>
<tr>
<td align="left"><code>--force-publish</code></td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publishhttps://github.com/lerna/lerna/tree/main/commands/version#--force-publish">#</a></td>
</tr>
<tr>
<td align="left"><code>--ignore-changes</code></td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publishhttps://github.com/lerna/lerna/tree/main/commands/version#--ignore-changes">#</a></td>
</tr>
<tr>
<td align="left"><code>--include-merged-tags</code></td>
<td align="left"><a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/publishhttps://github.com/lerna/lerna/tree/main/commands/version#--include-merged-tags">#</a></td>
</tr>
</tbody></table>
<h3 id="init"><a href="#init" class="headerlink" title="init"></a>init</h3><p>创建新的 Lerna 仓库或将现有仓库升级到当前版本 Lerna</p>
<ul>
<li>如果 <code>lerna</code> 不存在，请将其添加到 <code>package.json</code> 中的 <code>devDependency</code></li>
<li>创建一个 <code>lerna.json</code> 配置文件来存储版本号</li>
<li>如果不存在 <code>.gitignore</code>，则生成一个忽略文件<!--rehype:className=style-timeline--></li>
</ul>
<hr>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">lerna init --independent</span></span><br></pre></td></tr></table></figure>

<hr>
<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--independent</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/init#--independent">#</a></td>
<td align="left">使用独立版本控制模式 <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/init#--independent">#</a></td>
</tr>
<tr>
<td align="left"><code>--exact</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/init#--exact">#</a></td>
<td align="left">添加或更新 <code>lerna</code> 的本地版本时将使用插入符范围 <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/init#--exact">#</a></td>
</tr>
</tbody></table>
<p>它将配置 <code>lerna.json</code> 以强制所有后续执行完全匹配</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;command&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;init&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;exact&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;0.0.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="import"><a href="#import" class="headerlink" title="import"></a>import</h3><p>将一个包导入到带有提交历史的 <code>monorepo</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 开始使用 Lerna</span></span><br><span class="line">$ git init lerna-repo &amp;&amp; <span class="built_in">cd</span> lerna-repo</span><br><span class="line">$ npx lerna init</span><br><span class="line">$ npm install</span><br><span class="line"><span class="comment"># 添加提交</span></span><br><span class="line">$ git add .</span><br><span class="line"><span class="comment"># 如果没有提交，导入命令将失败</span></span><br><span class="line">$ git commit -m <span class="string">&quot;Initial lerna commit&quot;</span></span><br><span class="line"><span class="comment"># 导入其他存储库</span></span><br><span class="line">$ npx lerna import &lt;外部存储库的路径&gt;</span><br><span class="line">$ npx lerna import ~/Product --flatten</span><br></pre></td></tr></table></figure>

<p>选项</p>
<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--flatten</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/import#--flatten">#</a></td>
<td align="left">当导入具有冲突的合并提交的存储库时，导入命令将无法尝试应用所有提交</td>
</tr>
<tr>
<td align="left"><code>--dest</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/import#--dest">#</a></td>
<td align="left">导入仓库时，可以通过 <code>lerna.json</code> 中列出的目录来指定目标目录</td>
</tr>
<tr>
<td align="left"><code>--preserve-commit</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/import#--preserve-commit">#</a></td>
<td align="left">每个 git 提交都有一个作者和一个提交者</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h3 id="add"><a href="#add" class="headerlink" title="add"></a>add</h3><!--rehype:wrap-class=row-span-2-->

<p>将依赖项添加到匹配的包</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">lerna add &lt;package&gt;[@version] \</span></span><br><span class="line"><span class="language-bash">        [--dev] [--exact] [--peer]</span></span><br></pre></td></tr></table></figure>

<p>选项</p>
<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--dev</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/add#--dev">#</a></td>
<td align="left">将新包添加到 <code>devDependencies</code></td>
</tr>
<tr>
<td align="left"><code>--exact</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/add#--exact">#</a></td>
<td align="left">添加具有精确版本（例如 <code>1.0.1</code>）而不是默认 <code>^</code> semver 范围（例如 <code>^1.0.1</code>）的新包</td>
</tr>
<tr>
<td align="left"><code>--peer</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/add#--peer">#</a></td>
<td align="left">将新包添加到 <code>peerDependencies</code></td>
</tr>
<tr>
<td align="left"><code>--registry &lt;url&gt;</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/add#--registry-url">#</a></td>
<td align="left">使用自定义注册表安装目标包</td>
</tr>
<tr>
<td align="left"><code>--no-bootstrap</code> <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/add#--no-bootstrap">#</a></td>
<td align="left">跳过链式 <code>lerna bootstrap</code></td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<p>实例</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将 mod-1 包添加到“prefix-”前缀文件夹中的包中</span></span><br><span class="line">$ lerna add mod-1 packages/prefix-*</span><br><span class="line"><span class="comment"># 将 mod-1 安装到mod-2</span></span><br><span class="line">$ lerna add mod-1 --scope=mod-2</span><br><span class="line"><span class="comment"># 在 devDependencies 中安装 mod-1 到 mod-2</span></span><br><span class="line">$ lerna add mod-1 --scope=mod-2 --dev</span><br><span class="line"><span class="comment"># 在 peerDependencies 中安装 mod-1 到 mod-2</span></span><br><span class="line">$ lerna add mod-1 --scope=mod-2 --peer</span><br><span class="line"><span class="comment"># 在除 mod-1 之外的所有模块中安装 mod-1</span></span><br><span class="line">$ lerna add mod-1</span><br><span class="line"><span class="comment"># 在所有模块中安装 babel-core</span></span><br><span class="line">$ lerna add babel-core</span><br></pre></td></tr></table></figure>

<h3 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h3><p>比较自上次发布以来的所有包或单个包</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ lerna diff [package]</span><br><span class="line">$ lerna diff</span><br><span class="line">$ lerna diff package-name <span class="comment"># 区分一个特定的包</span></span><br></pre></td></tr></table></figure>

<p>类似于 <code>lerna changed</code>，此命令运行 <code>git diff</code></p>
<h3 id="clean"><a href="#clean" class="headerlink" title="clean"></a>clean</h3><p>从所有包中删除 <code>node_modules</code> 目录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ lerna clean</span><br></pre></td></tr></table></figure>

<p>接受所有<a href="#%E8%BF%87%E6%BB%A4%E9%80%89%E9%A1%B9">过滤选项</a>。<code>lerna clean</code> 不会从根 <code>node_modules</code> 目录中删除模块，即使您启用了 <code>--hoist</code> 选项</p>
<h3 id="add-caching"><a href="#add-caching" class="headerlink" title="add-caching"></a>add-caching</h3><p>运行设置基本缓存选项的向导</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ lerna add-caching</span><br></pre></td></tr></table></figure>

<h3 id="link"><a href="#link" class="headerlink" title="link"></a>link</h3><p>将所有相互依赖的包符号链接在一起</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ lerna <span class="built_in">link</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/commands/link#--force-local"><code>--force-local</code></a> 设置会导致链接命令始终对本地依赖项进行符号链接</p>
<h3 id="repair"><a href="#repair" class="headerlink" title="repair"></a>repair</h3><p>更新配置文件以匹配当前安装的 lerna 版本</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm i lerna@latest</span><br><span class="line">$ lerna repair</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/lerna/lerna/tree/main/core/lerna/commands/repair#usage"><code>lerna repair</code></a> 在升级后最有用，可确保应用新版本 lerna 的任何配置文件更改</p>
</div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">太空毅栈</div><div class="author-info__description">个人博客，记录生活，分享技术。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/caoyixiong"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;amp;uin=409677557&amp;amp;site=qq&amp;amp;menu=yes" target="_blank" title="QQ"><i class="fab fa-qq" style="color: #24292e;"></i></a><a class="social-icon" href="/img/wechat.jpg" target="_blank" title="微信"><i class="fab fa-weixin" style="color: #24292e;"></i></a><a class="social-icon" href="https://github.com/caoyixiong" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:409677557@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">如果阅读过程中遇到了问题，请及时评论或者留言，看到了会在第一时间给出回复。</div></div><!-- !=partial('includes/widget/card_wx', {}, {cache: true})--><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/65b9ed48.html" title="GOPATH">GOPATH</a><time datetime="2024-08-21T16:28:07.159Z" title="发表于 2024-08-22 00:28:07">2024-08-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/6b9fbde2.html" title="Gin 快速入门">Gin 快速入门</a><time datetime="2024-08-19T17:27:21.321Z" title="发表于 2024-08-20 01:27:21">2024-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/6999fca8.html" title="go get 包下载失败">go get 包下载失败</a><time datetime="2024-08-19T16:01:05.960Z" title="发表于 2024-08-20 00:01:05">2024-08-20</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Go/"><span class="card-category-list-name">Go</span><span class="card-category-list-count">3</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Go/" style="font-size: 1.5em; color: #99a9bf">Go</a> <a href="/tags/Gin/" style="font-size: 1.1em; color: #999">Gin</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">2024年08月</span><span class="card-archive-list-count">3</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">3</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2016-05-13T00:30:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">1.5k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-08-23T05:04:08.963Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/home.jpg')"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">公益广告</p><div class="bg-ad"><div>国家反诈中心是国务院打击治理电信网络新型违法犯罪工作部际联席会议合成作战平台，集资源整合、情报研判、侦查指挥为一体，在打击、防范、治理电信网络诈骗等新型违法犯罪中发挥着重要作用。</div><div class="btn-xz-box"><a class="btn-xz" href="https://caoyixiong.com/">主页</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">导航</p><ul class="ft-links"><li><a href="https://caoyixiong.com/about/">关于博主</a><a href="https://caoyixiong.com/categories/">文章分类</a></li><li><a href="https://caoyixiong.com/sponsor/">来杯咖啡</a><a href="https://caoyixiong.com/tags/">文章标签</a></li><li><a href="https://caoyixiong.com/comments/">说点什么</a><a href="https://caoyixiong.com/archives/">文章归档</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">友链</p><div class="ft-img-group"><div class="img-group-item"><a href="https://caoyixiong.com/"><img src="/img/avatar.jpg" alt=""/></a></div></div></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-8sxa.vercel.app',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-8sxa.vercel.app',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-8sxa.vercel.app',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script data-pjax defer src="https://npm.elemecdn.com/tzy-blog/lib/js/theme/chocolate.js"></script><script data-pjax defer src="/js/cursor.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.22.1/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.65.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js?v=4.13.0"></script></div></div></body></html>