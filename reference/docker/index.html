<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Docker 备忘清单 | 毅栈</title><meta name="author" content="毅栈"><meta name="copyright" content="毅栈"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="这是 Docker 的快速参考备忘单。 你可以在这里找到最常见的 Docker 命令。 入门  入门安装curl -sSL https:&#x2F;&#x2F;get.docker.com&#x2F; | shsudo chmod 777 &#x2F;var&#x2F;run&#x2F;docker.sock  在后台创建和运行容器 $ docker run -d -p 80:80 docker&#x2F;getting-started    -d - 以分离（后台">
<meta property="og:type" content="website">
<meta property="og:title" content="Docker 备忘清单">
<meta property="og:url" content="https://caoyixiong.com/reference/docker/index.html">
<meta property="og:site_name" content="毅栈">
<meta property="og:description" content="这是 Docker 的快速参考备忘单。 你可以在这里找到最常见的 Docker 命令。 入门  入门安装curl -sSL https:&#x2F;&#x2F;get.docker.com&#x2F; | shsudo chmod 777 &#x2F;var&#x2F;run&#x2F;docker.sock  在后台创建和运行容器 $ docker run -d -p 80:80 docker&#x2F;getting-started    -d - 以分离（后台">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://caoyixiong.com/img/avatar.jpg">
<meta property="article:published_time" content="2024-08-10T06:16:15.628Z">
<meta property="article:modified_time" content="2024-08-10T06:16:15.628Z">
<meta property="article:author" content="毅栈">
<meta property="article:tag" content="博客，生活，技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://caoyixiong.com/img/avatar.jpg"><link rel="shortcut icon" href="/img/logo.png"><link rel="canonical" href="https://caoyixiong.com/reference/docker/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"3NQ1I8Z7GZ","apiKey":"df5bcd27157ba7efa007752258f185fd","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 毅栈","link":"链接: ","source":"来源: 毅栈","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Docker 备忘清单',
  isPost: false,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-08-10 14:16:15'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="/css/universe.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/reference/"><i class="fa-fw fas fa-list"></i><span> 备忘清单</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/sponsor/"><i class="fa-fw fas fa-money-check-alt"></i><span> 赞助墙</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header" style="background-image: url('/img/home.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="毅栈"><img class="site-icon" src="/img/logo.png"/><span class="site-name">毅栈</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/reference/"><i class="fa-fw fas fa-list"></i><span> 备忘清单</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/sponsor/"><i class="fa-fw fas fa-money-check-alt"></i><span> 赞助墙</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="page-site-info"><h1 id="site-title">Docker 备忘清单</h1></div></header><main class="layout" id="content-inner"><div id="page"><div id="article-container"><p>这是 <a target="_blank" rel="noopener" href="https://docs.docker.com/get-started/">Docker</a> 的快速参考备忘单。 你可以在这里找到最常见的 Docker 命令。</p>
<h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><!--rehype:body-class=cols-2-->

<h3 id="入门-1"><a href="#入门-1" class="headerlink" title="入门"></a>入门</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -sSL https://get.docker.com/ | sh</span><br><span class="line">sudo chmod 777 /var/run/docker.sock</span><br></pre></td></tr></table></figure>

<p>在后台创建和运行容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -d -p 80:80 docker/getting-started</span></span><br></pre></td></tr></table></figure>

<hr>
<ul>
<li><code>-d</code> - 以分离（后台）模式运行容器</li>
<li><code>-p 80:80</code> -  将端口 80 映射到容器中的端口 80，格式：宿主机端口:容器端口</li>
<li><code>docker/getting-started</code> - 要使用的镜像</li>
</ul>
<p>在前台创建并运行容器（之后如果要退出容器但是不关闭容器，按<em>Ctrl+P+Q</em>即可）</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker run -it --<span class="built_in">rm</span> -p  8001:8080 --name my-nginx nginx</span></span><br></pre></td></tr></table></figure>

<hr>
<ul>
<li><code>-it</code> - 交互式 bash 模式</li>
<li><code>--rm</code> - 容器终止运行后自动删除容器文件</li>
<li><code>-p 8001:8080</code> - 将 <code>8001</code> 端口映射到容器中的 <code>8080</code> 端口</li>
<li><code>--name my-nginx</code> - 指定名称</li>
<li><code>nginx</code> - 要使用的镜像</li>
</ul>
<h3 id="一般命令"><a href="#一般命令" class="headerlink" title="一般命令"></a>一般命令</h3><table>
<thead>
<tr>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>docker ps</code></td>
<td>列出正在运行的容器</td>
</tr>
<tr>
<td><code>docker ps -a</code></td>
<td>列出所有容器</td>
</tr>
<tr>
<td><code>docker ps -s</code></td>
<td>列出正在运行的容器 <em>(带 CPU &#x2F; 内存)</em></td>
</tr>
<tr>
<td><code>docker images</code></td>
<td>列出所有镜像</td>
</tr>
<tr>
<td><code>docker exec -it &lt;container&gt;  bash</code></td>
<td>连接到容器</td>
</tr>
<tr>
<td><code>docker logs &lt;container&gt;</code></td>
<td>显示容器的控制台日志</td>
</tr>
<tr>
<td><code>docker stop &lt;container&gt;</code></td>
<td>停止容器</td>
</tr>
<tr>
<td><code>docker restart &lt;container&gt;</code></td>
<td>重启一个容器</td>
</tr>
<tr>
<td><code>docker rm &lt;container&gt;</code></td>
<td>移除一个容器</td>
</tr>
<tr>
<td><code>docker port &lt;container&gt;</code></td>
<td>显示容器的端口映射</td>
</tr>
<tr>
<td><code>docker top &lt;container&gt;</code></td>
<td>列出进程</td>
</tr>
<tr>
<td><code>docker kill &lt;container&gt;</code></td>
<td>杀死一个容器</td>
</tr>
</tbody></table>
<p>参数 <code>&lt;container&gt;</code> 可以是容器 id 或名称</p>
<h2 id="Docker-容器"><a href="#Docker-容器" class="headerlink" title="Docker 容器"></a>Docker 容器</h2><!--rehype:body-class=cols-2-->

<h3 id="启动和停止"><a href="#启动和停止" class="headerlink" title="启动和停止"></a>启动和停止</h3><table>
<thead>
<tr>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody><tr>
<td><code>docker start nginx-server</code></td>
<td>开始</td>
</tr>
<tr>
<td><code>docker stop nginx-server</code></td>
<td>停止</td>
</tr>
<tr>
<td><code>docker restart nginx-server</code></td>
<td>重启</td>
</tr>
<tr>
<td><code>docker pause nginx-server</code></td>
<td>暂停</td>
</tr>
<tr>
<td><code>docker unpause nginx-server</code></td>
<td>取消暂停</td>
</tr>
<tr>
<td><code>docker wait nginx-server</code></td>
<td>阻塞容器</td>
</tr>
<tr>
<td><code>docker kill nginx-server</code></td>
<td>发送 SIGKILL</td>
</tr>
<tr>
<td><code>docker attach nginx-server</code></td>
<td>连接到现有容器</td>
</tr>
</tbody></table>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><table>
<thead>
<tr>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>docker ps</code></td>
<td>列出正在运行的容器</td>
</tr>
<tr>
<td><code>docker ps -a</code></td>
<td>列出所有容器</td>
</tr>
<tr>
<td><code>docker logs nginx-server</code></td>
<td>容器日志</td>
</tr>
<tr>
<td><code>docker inspect nginx-server</code></td>
<td>检查容器</td>
</tr>
<tr>
<td><code>docker events nginx-server</code></td>
<td>容器事件</td>
</tr>
<tr>
<td><code>docker port nginx-server</code></td>
<td>公共端口</td>
</tr>
<tr>
<td><code>docker top nginx-server</code></td>
<td>运行进程</td>
</tr>
<tr>
<td><code>docker stats nginx-server</code></td>
<td>容器资源使用</td>
</tr>
<tr>
<td><code>docker diff nginx-server</code></td>
<td>列出对容器所做的更改</td>
</tr>
</tbody></table>
<h3 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker create [options] IMAGE</span><br><span class="line">  -a, --attach               # 附加标准输出/错误</span><br><span class="line">  -i, --interactive          # 附加标准输入（交互式）</span><br><span class="line">  -t, --tty                  # 伪终端 pseudo-tty</span><br><span class="line">      --name NAME            # 命名你的镜像</span><br><span class="line">  -p, --publish 5000:5000    # 端口映射（主机:容器）</span><br><span class="line">      --expose 5432          # 向容器公开端口 </span><br><span class="line">  -P, --publish-all          # 发布所有端口</span><br><span class="line">      --link container:alias # 链接 linking</span><br><span class="line">  -v, --volume `pwd`:/app    # mount（需要绝对路径）</span><br><span class="line">  -e, --env NAME=hello       # 环境变量 env vars</span><br></pre></td></tr></table></figure>

<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker create --name my_redis --expose 6379 redis:3.0.2</span></span><br></pre></td></tr></table></figure>

<h3 id="操控"><a href="#操控" class="headerlink" title="操控"></a>操控</h3><p>重命名容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker rename my-nginx nginx-server</span><br></pre></td></tr></table></figure>

<p>移除容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker rm nginx-server</span><br></pre></td></tr></table></figure>

<p>更新容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker update --cpu-shares 512 -m 300M nginx-server</span><br></pre></td></tr></table></figure>

<h2 id="Docker-镜像"><a href="#Docker-镜像" class="headerlink" title="Docker 镜像"></a>Docker 镜像</h2><!--rehype:body-class=cols-2-->

<h3 id="操控-1"><a href="#操控-1" class="headerlink" title="操控"></a>操控</h3><!--rehype:wrap-class=row-span-2-->

<table>
<thead>
<tr>
<th><code>Example</code></th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>docker images</code></td>
<td>列出镜像</td>
</tr>
<tr>
<td><code>docker rmi nginx</code></td>
<td>删除镜像</td>
</tr>
<tr>
<td><code>docker load &lt; ubuntu.tar.gz</code></td>
<td>加载一个 tarred 存储库</td>
</tr>
<tr>
<td><code>docker load --input ubuntu.tar</code></td>
<td>加载一个 tarred 存储库</td>
</tr>
<tr>
<td><code>docker save busybox &gt; ubuntu.tar</code></td>
<td>将镜像保存到 tar 存档</td>
</tr>
<tr>
<td><code>docker history</code></td>
<td>显示镜像的历史</td>
</tr>
<tr>
<td><code>docker commit nginx my_nginx</code></td>
<td>将容器另存为镜像</td>
</tr>
<tr>
<td><code>docker tag nginx eon01/nginx</code></td>
<td>标记镜像</td>
</tr>
<tr>
<td><code>docker push eon01/nginx</code></td>
<td>推送镜像</td>
</tr>
</tbody></table>
<h3 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">注意有的最后面是英文 .</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker build .</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker build github.com/creack/docker-firefox</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker build - &lt; Dockerfile</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker build - &lt; context.tar.gz</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker build -t eon/nginx-server .</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker build -f myOtherDockerfile .</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">curl example.com/remote/Dockerfile | docker build -f - .</span></span><br></pre></td></tr></table></figure>

<h3 id="删除-镜像"><a href="#删除-镜像" class="headerlink" title="删除 &lt;none&gt; 镜像"></a>删除 &lt;none&gt; 镜像</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker rmi -f $(docker images | grep <span class="string">&quot;none&quot;</span> | awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Docker-网络"><a href="#Docker-网络" class="headerlink" title="Docker 网络"></a>Docker 网络</h2><!--rehype:body-class=cols-2-->

<h3 id="创建网络"><a href="#创建网络" class="headerlink" title="创建网络"></a>创建网络</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker network create -d overlay MyOverlayNetwork</span><br><span class="line">docker network create -d bridge MyBridgeNetwork</span><br></pre></td></tr></table></figure>

<p>自定义网络子网和网关</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker network create -d overlay \</span><br><span class="line">  --subnet=192.168.0.0/16 \</span><br><span class="line">  --subnet=192.170.0.0/16 \</span><br><span class="line">  --gateway=192.168.0.100 \</span><br><span class="line">  --gateway=192.170.0.100 \</span><br><span class="line">  --ip-range=192.168.1.0/24 \</span><br><span class="line">  --aux-address=&quot;my-router=192.168.1.5&quot; \</span><br><span class="line">  --aux-address=&quot;my-switch=192.168.1.6&quot; \</span><br><span class="line">  --aux-address=&quot;my-printer=192.170.1.5&quot; \</span><br><span class="line">  --aux-address=&quot;my-nas=192.170.1.6&quot; \</span><br><span class="line">  MyOverlayNetwork</span><br></pre></td></tr></table></figure>

<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><!--rehype:wrap-class=row-span-3-->

<p>获取容器连接的网络</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker inspect MyContainer | grep Network</span><br></pre></td></tr></table></figure>

<p>获取有关网络的信息</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker network inspect &lt;network_name&gt;</span><br></pre></td></tr></table></figure>

<p>将正在运行的容器连接到网络</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker network connect &lt;network_name&gt; &lt;container_name&gt;</span><br></pre></td></tr></table></figure>

<p>启动时将容器连接到网络</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -it -d --network=&lt;network_name&gt; &lt;container_name&gt;</span><br></pre></td></tr></table></figure>

<p>断开容器与网络的连接</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker network disconnect &lt;network_name&gt; &lt;container_name&gt;</span><br></pre></td></tr></table></figure>

<h3 id="删除网络"><a href="#删除网络" class="headerlink" title="删除网络"></a>删除网络</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker network <span class="built_in">rm</span> &lt;network_name&gt;</span><br></pre></td></tr></table></figure>

<h3 id="列出网络"><a href="#列出网络" class="headerlink" title="列出网络"></a>列出网络</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker network ls</span><br></pre></td></tr></table></figure>

<h2 id="Docker-快捷键"><a href="#Docker-快捷键" class="headerlink" title="Docker 快捷键"></a>Docker 快捷键</h2><p>需要特别注意的是，退出快捷键中的删除容器实例，只对于使用 <code>docker attach</code> 进入的容器生效，使用 <code>docker exec</code> 进入容器后，使用上面的快捷键后将隔离容器，且不会删除容器实例。</p>
<h3 id="退出-关闭容器"><a href="#退出-关闭容器" class="headerlink" title="退出 - 关闭容器"></a>退出 - 关闭容器</h3><table>
<thead>
<tr>
<th>Docker 快捷键</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>ctrl</code> <code>c</code></td>
<td>将关闭容器</td>
</tr>
</tbody></table>
<!--rehype:className=shortcuts-->

<p>将关闭容器, 并删除当前的容器实例</p>
<h3 id="退出-保留容器"><a href="#退出-保留容器" class="headerlink" title="退出 - 保留容器"></a>退出 - 保留容器</h3><table>
<thead>
<tr>
<th>Docker 快捷键</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>ctrl</code> <code>d</code></td>
<td>保留容器</td>
</tr>
</tbody></table>
<!--rehype:className=shortcuts-->

<p>将保留容器，并退出到Docker主机的命令行界面</p>
<h3 id="退出-容器分离"><a href="#退出-容器分离" class="headerlink" title="退出 - 容器分离"></a>退出 - 容器分离</h3><table>
<thead>
<tr>
<th>Docker 快捷键</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>ctrl</code> <code>p</code> <code>q</code></td>
<td>容器分离</td>
</tr>
</tbody></table>
<!--rehype:className=shortcuts-->

<p>将容器分离，保留容器，但是不退出</p>
<h2 id="各种各样的"><a href="#各种各样的" class="headerlink" title="各种各样的"></a>各种各样的</h2><!--rehype:body-class=cols-2-->

<h3 id="Docker-Hub"><a href="#Docker-Hub" class="headerlink" title="Docker Hub"></a>Docker Hub</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker search search_word  <span class="comment"># 在 docker hub 中搜索镜像</span></span><br><span class="line">$ docker pull user/image     <span class="comment"># 从 docker hub 下载镜像</span></span><br><span class="line">$ docker login               <span class="comment"># 向 docker hub 进行身份验证</span></span><br><span class="line">$ docker push user/image     <span class="comment"># 将镜像上传到 docker hub</span></span><br></pre></td></tr></table></figure>

<h3 id="镜像仓库命令"><a href="#镜像仓库命令" class="headerlink" title="镜像仓库命令"></a>镜像仓库命令</h3><!--rehype:wrap-class=row-span-2-->

<p>登录到镜像仓库</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker login</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker login localhost:8080</span></span><br></pre></td></tr></table></figure>

<p>从镜像仓库注销</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker <span class="built_in">logout</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker <span class="built_in">logout</span> localhost:8080</span></span><br></pre></td></tr></table></figure>

<p>搜索镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker search nginx</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker search nginx --stars=3 --no-trunc busybox</span></span><br></pre></td></tr></table></figure>

<p>拉取镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker pull nginx</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker pull eon01/nginx localhost:5000/myadmin/nginx</span></span><br></pre></td></tr></table></figure>

<p>推送镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker push eon01/nginx</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker push eon01/nginx localhost:5000/myadmin/nginx</span></span><br></pre></td></tr></table></figure>

<h3 id="批量清除"><a href="#批量清除" class="headerlink" title="批量清除"></a>批量清除</h3><table>
<thead>
<tr>
<th>实例</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>docker stop -f $(docker ps -a -q)</code></td>
<td>停止所有容器</td>
</tr>
<tr>
<td><code>docker rm -f $(docker ps -a -q)</code></td>
<td>删除所有容器</td>
</tr>
<tr>
<td><code>docker rmi -f $(docker images -q)</code></td>
<td>删除所有镜像</td>
</tr>
<tr>
<td><code>docker volume prune</code></td>
<td>删除所有未使用的Docker Volume</td>
</tr>
<tr>
<td><code>docker network prune</code></td>
<td>删除所有未使用的Docker网络</td>
</tr>
<tr>
<td><code>docker system prune</code></td>
<td>清理所有空闲或与任何Docker容器无关的资源</td>
</tr>
<tr>
<td><code>docker image prune</code></td>
<td>删除悬空的Docker镜像</td>
</tr>
<tr>
<td><code>docker container prune</code></td>
<td>删除所有未使用的Docker 容器</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<h3 id="卷-volume"><a href="#卷-volume" class="headerlink" title="卷 volume"></a>卷 volume</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker volume <span class="built_in">ls</span>    <span class="comment"># 检查卷</span></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker volume prune <span class="comment"># 清理未使用的卷</span></span></span><br></pre></td></tr></table></figure>

<h3 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h3><!--rehype:wrap-class=row-span-2-->

<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>docker-compose up</code></td>
<td align="left">创建和启动容器</td>
</tr>
<tr>
<td align="left"><code>docker-compose up -d</code></td>
<td align="left">以分离模式创建和启动容器</td>
</tr>
<tr>
<td align="left"><code>docker-compose down</code></td>
<td align="left">停止和删除容器、网络、映像和卷</td>
</tr>
<tr>
<td align="left"><code>docker-compose logs</code></td>
<td align="left">查看容器的输出</td>
</tr>
<tr>
<td align="left"><code>docker-compose restart</code></td>
<td align="left">重启所有服务</td>
</tr>
<tr>
<td align="left"><code>docker-compose pull</code></td>
<td align="left">拉取所有服务的镜像</td>
</tr>
<tr>
<td align="left"><code>docker-compose build</code></td>
<td align="left">构建所有服务的镜像</td>
</tr>
<tr>
<td align="left"><code>docker-compose config</code></td>
<td align="left">验证并查看 Compose 文件</td>
</tr>
<tr>
<td align="left"><code>docker-compose scale &lt;service_name&gt;=&lt;replica&gt;</code></td>
<td align="left">为服务指定容器个数</td>
</tr>
<tr>
<td align="left"><code>docker-compose top</code></td>
<td align="left">显示正在运行的进程</td>
</tr>
<tr>
<td align="left"><code>docker-compose run -rm -p 2022:22 web bash</code></td>
<td align="left">启动 Web 服务并运行 bash 作为其命令，删除旧容器</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<h3 id="Docker-Services"><a href="#Docker-Services" class="headerlink" title="Docker Services"></a>Docker Services</h3><table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>docker service create &lt;options&gt; &lt;image&gt; &lt;command&gt;</code></td>
<td align="left">创建新服务</td>
</tr>
<tr>
<td align="left"><code>docker service inspect --pretty &lt;service_name&gt;</code></td>
<td align="left">显示详细信息服务</td>
</tr>
<tr>
<td align="left"><code>docker service ls</code></td>
<td align="left">列出服务</td>
</tr>
<tr>
<td align="left"><code>docker service ps</code></td>
<td align="left">列出服务的任务</td>
</tr>
<tr>
<td align="left"><code>docker service scale &lt;service_name&gt;=&lt;replica&gt;</code></td>
<td align="left">规模特殊服务</td>
</tr>
<tr>
<td align="left"><code>docker service update &lt;options&gt; &lt;service_name&gt;</code></td>
<td align="left">更新服务选项</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<h3 id="Docker-Stack"><a href="#Docker-Stack" class="headerlink" title="Docker Stack"></a>Docker Stack</h3><!--rehype:wrap-class=col-span-2-->

<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>docker stack ls</code></td>
<td align="left">列出此 Docker 主机上所有正在运行的应用程序</td>
</tr>
<tr>
<td align="left"><code>docker stack deploy -c &lt;composefile&gt; &lt;appname&gt;</code></td>
<td align="left">运行指定的 Compose 文件</td>
</tr>
<tr>
<td align="left"><code>docker stack services &lt;appname&gt;</code></td>
<td align="left">列出与应用关联的服务</td>
</tr>
<tr>
<td align="left"><code>docker stack ps &lt;appname&gt;</code></td>
<td align="left">列出与应用关联的正在运行的容器</td>
</tr>
<tr>
<td align="left"><code>docker stack rm &lt;appname&gt;</code></td>
<td align="left">拆掉一个应用程序</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<h3 id="Docker-Machine"><a href="#Docker-Machine" class="headerlink" title="Docker Machine"></a>Docker Machine</h3><!--rehype:wrap-class=col-span-2-->

<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>docker-machine create --driver virtualbox myvm1</code></td>
<td align="left">创建虚拟机（Mac、Win7、Linux）</td>
</tr>
<tr>
<td align="left"><code>docker-machine create -d hyperv --hyperv-virtual-switch &quot;myswitch&quot; myvm1</code></td>
<td align="left">Win10</td>
</tr>
<tr>
<td align="left"><code>docker-machine env myvm1</code></td>
<td align="left">查看有关您的节点的基本信息</td>
</tr>
<tr>
<td align="left"><code>docker-machine ssh myvm1 &quot;docker node ls&quot;</code></td>
<td align="left">列出集群中的节点</td>
</tr>
<tr>
<td align="left"><code>docker-machine ssh myvm1 &quot;docker node inspect &lt;node ID&gt;&quot;</code></td>
<td align="left">检查节点</td>
</tr>
<tr>
<td align="left"><code>docker-machine ssh myvm1 &quot;docker swarm join-token -q worker&quot;</code></td>
<td align="left">查看加入令牌</td>
</tr>
<tr>
<td align="left"><code>docker-machine ssh myvm1</code></td>
<td align="left">打开与 VM 的 SSH 会话； 输入“exit”结束</td>
</tr>
<tr>
<td align="left"><code>docker-machine ssh myvm2 &quot;docker swarm leave&quot;</code></td>
<td align="left">让工人离开群体</td>
</tr>
<tr>
<td align="left"><code>docker-machine ssh myvm1 &quot;docker swarm leave -f&quot;</code></td>
<td align="left">让主人离开，杀群</td>
</tr>
<tr>
<td align="left"><code>docker-machine start myvm1</code></td>
<td align="left">启动当前未运行的 VM</td>
</tr>
<tr>
<td align="left"><code>docker-machine stop $(docker-machine ls -q)</code></td>
<td align="left">停止所有正在运行的虚拟机</td>
</tr>
<tr>
<td align="left"><code>docker-machine rm $(docker-machine ls -q)</code></td>
<td align="left">删除所有虚拟机及其磁盘映像</td>
</tr>
<tr>
<td align="left"><code>docker-machine scp docker-compose.yml myvm1:~</code></td>
<td align="left">将文件复制到节点的主目录</td>
</tr>
<tr>
<td align="left"><code>docker-machine ssh myvm1 &quot;docker stack deploy -c &lt;file&gt; &lt;app&gt;&quot;</code></td>
<td align="left">部署应用</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<h3 id="docker-主要命令"><a href="#docker-主要命令" class="headerlink" title="docker 主要命令"></a>docker 主要命令</h3><!--rehype:wrap-class=row-span-3-->

<table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>attach</code></td>
<td align="left">将本地标准输入、输出和错误流附加到正在运行的容器</td>
</tr>
<tr>
<td align="left"><code>build</code></td>
<td align="left">从 Dockerfile 构建镜像</td>
</tr>
<tr>
<td align="left"><code>commit</code></td>
<td align="left">从容器的更改创建新镜像</td>
</tr>
<tr>
<td align="left"><code>cp</code></td>
<td align="left">在容器和本地文件系统之间复制文件&#x2F;文件夹</td>
</tr>
<tr>
<td align="left"><code>create</code></td>
<td align="left">创建一个新容器</td>
</tr>
<tr>
<td align="left"><code>diff</code></td>
<td align="left">检查容器文件系统上文件或目录的更改</td>
</tr>
<tr>
<td align="left"><code>events</code></td>
<td align="left">从服务器获取实时事件</td>
</tr>
<tr>
<td align="left"><code>exec</code></td>
<td align="left">在正在运行的容器中运行命令</td>
</tr>
<tr>
<td align="left"><code>export</code></td>
<td align="left">将容器的文件系统导出为 tar 存档</td>
</tr>
<tr>
<td align="left"><code>history</code></td>
<td align="left">显示镜像的历史</td>
</tr>
<tr>
<td align="left"><code>images</code></td>
<td align="left">列出镜像</td>
</tr>
<tr>
<td align="left"><code>import</code></td>
<td align="left">从 tarball 导入内容以创建文件系统映像</td>
</tr>
<tr>
<td align="left"><code>info</code></td>
<td align="left">显示系统范围的信息</td>
</tr>
<tr>
<td align="left"><code>inspect</code></td>
<td align="left">返回有关 Docker 对象的低级信息</td>
</tr>
<tr>
<td align="left"><code>kill</code></td>
<td align="left">杀死一个或多个正在运行的容器</td>
</tr>
<tr>
<td align="left"><code>load</code></td>
<td align="left">从 tar 存档或 STDIN 加载镜像</td>
</tr>
<tr>
<td align="left"><code>login</code></td>
<td align="left">登录到 Docker 注册表</td>
</tr>
<tr>
<td align="left"><code>logout</code></td>
<td align="left">从 Docker 注册表中注销</td>
</tr>
<tr>
<td align="left"><code>logs</code></td>
<td align="left">获取容器的日志</td>
</tr>
<tr>
<td align="left"><code>pause</code></td>
<td align="left">暂停一个或多个容器内的所有进程</td>
</tr>
<tr>
<td align="left"><code>port</code></td>
<td align="left">列出容器的端口映射或特定映射</td>
</tr>
<tr>
<td align="left"><code>ps</code></td>
<td align="left">列出容器</td>
</tr>
<tr>
<td align="left"><code>pull</code></td>
<td align="left">从注册表中提取镜像或存储库</td>
</tr>
<tr>
<td align="left"><code>push</code></td>
<td align="left">将镜像或存储库推送到注册表</td>
</tr>
<tr>
<td align="left"><code>rename</code></td>
<td align="left">重命名容器</td>
</tr>
<tr>
<td align="left"><code>restart</code></td>
<td align="left">重启一个或多个容器</td>
</tr>
<tr>
<td align="left"><code>rm</code></td>
<td align="left">移除一个或多个容器</td>
</tr>
<tr>
<td align="left"><code>rmi</code></td>
<td align="left">移除一张或多张镜像</td>
</tr>
<tr>
<td align="left"><code>run</code></td>
<td align="left">在新容器中运行命令</td>
</tr>
<tr>
<td align="left"><code>save</code></td>
<td align="left">将一个或多个镜像保存到 tar 存档（默认流式传输到 STDOUT）</td>
</tr>
<tr>
<td align="left"><code>search</code></td>
<td align="left">在 <code>Docker Hub</code> 中搜索镜像</td>
</tr>
<tr>
<td align="left"><code>start</code></td>
<td align="left">启动一个或多个停止的容器</td>
</tr>
<tr>
<td align="left"><code>stats</code></td>
<td align="left">显示容器资源使用统计的实时流</td>
</tr>
<tr>
<td align="left"><code>stop</code></td>
<td align="left">停止一个或多个正在运行的容器</td>
</tr>
<tr>
<td align="left"><code>tag</code></td>
<td align="left">创建一个引用 SOURCE_IMAGE 的标记 TARGET_IMAGE</td>
</tr>
<tr>
<td align="left"><code>top</code></td>
<td align="left">显示容器的运行进程</td>
</tr>
<tr>
<td align="left"><code>unpause</code></td>
<td align="left">取消暂停一个或多个容器中的所有进程</td>
</tr>
<tr>
<td align="left"><code>update</code></td>
<td align="left">更新一个或多个容器的配置</td>
</tr>
<tr>
<td align="left"><code>version</code></td>
<td align="left">显示 Docker 版本信息</td>
</tr>
<tr>
<td align="left"><code>wait</code></td>
<td align="left">阻塞直到一个或多个容器停止，然后打印它们的退出代码</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<h3 id="docker-管理命令"><a href="#docker-管理命令" class="headerlink" title="docker 管理命令"></a>docker 管理命令</h3><table>
<thead>
<tr>
<th align="left">:-</th>
<th align="left">:-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>docker builder</code></td>
<td align="left">管理构建</td>
</tr>
<tr>
<td align="left"><code>docker buildx*</code></td>
<td align="left">Docker Buildx（Docker Inc.，v0.7.1）</td>
</tr>
<tr>
<td align="left"><code>docker compose*</code></td>
<td align="left">Docker Compose（Docker Inc.，v2.2.3）</td>
</tr>
<tr>
<td align="left"><code>docker config</code></td>
<td align="left">管理 Docker 配置</td>
</tr>
<tr>
<td align="left"><code>docker container</code></td>
<td align="left">管理容器</td>
</tr>
<tr>
<td align="left"><code>docker context</code></td>
<td align="left">管理上下文</td>
</tr>
<tr>
<td align="left"><code>docker image</code></td>
<td align="left">管理镜像</td>
</tr>
<tr>
<td align="left"><code>docker manifest</code></td>
<td align="left">管理 Docker 镜像清单和清单列表</td>
</tr>
<tr>
<td align="left"><code>docker network</code></td>
<td align="left">管理网络</td>
</tr>
<tr>
<td align="left"><code>docker node</code></td>
<td align="left">管理 Swarm 节点</td>
</tr>
<tr>
<td align="left"><code>docker plugin</code></td>
<td align="left">管理插件</td>
</tr>
<tr>
<td align="left"><code>docker scan*</code></td>
<td align="left">Docker 扫描（Docker Inc.，v0.16.0）</td>
</tr>
<tr>
<td align="left"><code>docker secret</code></td>
<td align="left">管理 Docker 机密</td>
</tr>
<tr>
<td align="left"><code>docker service</code></td>
<td align="left">管理服务</td>
</tr>
<tr>
<td align="left"><code>docker stack</code></td>
<td align="left">管理 Docker 堆栈</td>
</tr>
<tr>
<td align="left"><code>docker swarm</code></td>
<td align="left">管理群</td>
</tr>
<tr>
<td align="left"><code>docker system</code></td>
<td align="left">管理 Docker</td>
</tr>
<tr>
<td align="left"><code>docker trust</code></td>
<td align="left">管理对 Docker 映像的信任</td>
</tr>
<tr>
<td align="left"><code>docker volume</code></td>
<td align="left">管理卷</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<h3 id="docker-全局参数"><a href="#docker-全局参数" class="headerlink" title="docker 全局参数"></a>docker 全局参数</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">    --config string     <span class="comment"># 客户端配置文件的位置（默认“~/.docker”）</span></span><br><span class="line">-c, --context string    <span class="comment"># 用于连接到守护程序的上下文的名称（</span></span><br><span class="line">                        <span class="comment"># 覆盖 DOCKER_HOST 环境变量和使用</span></span><br><span class="line">                        <span class="comment"># “docker context use” 设置的默认上下文）</span></span><br><span class="line">-D, --debug             <span class="comment"># 启用调试模式</span></span><br><span class="line">-H, --host list         <span class="comment"># 要连接的守护进程套接字</span></span><br><span class="line">-l, --log-level string  <span class="comment"># 设置日志级别</span></span><br><span class="line">        <span class="comment"># （默认“info”） (&quot;debug&quot;|&quot;info&quot;|&quot;warn&quot;|&quot;error&quot;|&quot;fatal&quot;) </span></span><br><span class="line">    --tls               <span class="comment"># 使用 TLS； 由 --tlsverify 暗示</span></span><br><span class="line">    --tlscacert string  <span class="comment"># 仅由该 CA 签署的信任证书</span></span><br><span class="line">        <span class="comment">#（默认为“~/.docker/ca.pem”）</span></span><br><span class="line">    --tlscert string    <span class="comment"># TLS证书文件路径</span></span><br><span class="line">        <span class="comment">#（默认“~/.docker/cert.pem”）</span></span><br><span class="line">    --tlskey string     <span class="comment"># TLS 密钥文件的路径</span></span><br><span class="line">        <span class="comment">#（默认为“~/.docker/key.pem”）</span></span><br><span class="line">    --tlsverify         <span class="comment"># 使用 TLS 并验证远程</span></span><br><span class="line">-v, --version           <span class="comment"># 打印版本信息并退出</span></span><br></pre></td></tr></table></figure>

<h3 id="docker-images"><a href="#docker-images" class="headerlink" title="docker images"></a>docker images</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-a, --all             显示所有镜像（默认隐藏中间镜像）</span><br><span class="line">    --digests         显示摘要</span><br><span class="line">-f, --filter filter   根据提供的条件过滤输出</span><br><span class="line">    --format string   使用 Go 模板打印漂亮的镜像</span><br><span class="line">    --no-trunc        不要截断输出</span><br><span class="line">-q, --quiet           仅显示镜像 ID</span><br></pre></td></tr></table></figure>

<h3 id="docker-run-create"><a href="#docker-run-create" class="headerlink" title="docker run&#x2F;create"></a>docker run&#x2F;create</h3><!--rehype:wrap-class=col-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">    --add-host list            <span class="comment"># 添加自定义主机到 IP 映射 (host:ip)</span></span><br><span class="line">-a, --attach list              <span class="comment"># 连接到 STDIN、STDOUT 或 STDERR</span></span><br><span class="line">    --blkio-weight uint16      <span class="comment"># 块 IO（相对权重），介于 10 和 1000 之间，或 0 禁用（默认 0）</span></span><br><span class="line">    --blkio-weight-device list <span class="comment"># 块 IO 权重（相对设备权重）（默认 []）</span></span><br><span class="line">    --cap-add list             <span class="comment"># 添加 Linux 功能</span></span><br><span class="line">    --cap-drop list            <span class="comment"># 放弃 Linux 功能</span></span><br><span class="line">    --cgroup-parent string     <span class="comment"># 容器的可选父 cgroup</span></span><br><span class="line">    --cgroupns string          <span class="comment"># 要使用的 Cgroup 命名空间（主机|私有）</span></span><br><span class="line">                               <span class="comment">#  &#x27;host&#x27;:    在 Docker 主机的 cgroup 命名空间中运行容器</span></span><br><span class="line">                               <span class="comment">#  &#x27;private&#x27;: 在自己的私有 cgroup 命名空间中运行容器</span></span><br><span class="line">                               <span class="comment">#  &#x27;&#x27;:        使用由守护进程上的 </span></span><br><span class="line">                               <span class="comment">#        default-cgroupns-mode 选项配置的 cgroup 命名空间（默认）</span></span><br><span class="line">    --cidfile string           <span class="comment"># 将容器 ID 写入文件</span></span><br><span class="line">    --cpu-period int           <span class="comment"># 限制 CPU CFS（完全公平调度器）周期</span></span><br><span class="line">    --cpu-quota int            <span class="comment"># 限制 CPU CFS（完全公平调度器）配额</span></span><br><span class="line">    --cpu-rt-period int        <span class="comment"># 以微秒为单位限制 CPU 实时周期</span></span><br><span class="line">    --cpu-rt-runtime int       <span class="comment"># 以微秒为单位限制 CPU 实时运行时间</span></span><br><span class="line">-c, --cpu-shares int           <span class="comment"># CPU 份额（相对权重）</span></span><br><span class="line">    --cpus decimal             <span class="comment"># CPU 数量</span></span><br><span class="line">    --cpuset-cpus string       <span class="comment"># 允许执行的 CPU (0-3, 0,1)</span></span><br><span class="line">    --cpuset-mems string       <span class="comment"># 允许执行的 MEM (0-3, 0,1)</span></span><br><span class="line">    --device list              <span class="comment"># 将主机设备添加到容器</span></span><br><span class="line">    --device-cgroup-rule list  <span class="comment"># 将规则添加到 cgroup 允许的设备列表</span></span><br><span class="line">    --device-read-bps list     <span class="comment"># 限制设备的读取速率（每秒字节数）（默认 []）</span></span><br><span class="line">    --device-read-iops list    <span class="comment"># 限制设备的读取速率（每秒 IO）（默认 []）</span></span><br><span class="line">    --device-write-bps list    <span class="comment"># 限制设备的写入速率（每秒字节数）（默认 []）</span></span><br><span class="line">    --device-write-iops list   <span class="comment"># 限制设备的写入速率（每秒 IO）（默认 []）</span></span><br><span class="line">    --disable-content-trust    <span class="comment"># 跳过镜像验证（默认为 true）</span></span><br><span class="line">    --dns list                 <span class="comment"># 设置自定义 DNS 服务器</span></span><br><span class="line">    --dns-option list          <span class="comment"># 设置 DNS 选项</span></span><br><span class="line">    --dns-search list          <span class="comment"># 设置自定义 DNS 搜索域</span></span><br><span class="line">    --domainname string        <span class="comment"># 容器 NIS 域名</span></span><br><span class="line">    --entrypoint string        <span class="comment"># 覆盖镜像的默认入口点</span></span><br><span class="line">-e, --<span class="built_in">env</span> list                 <span class="comment"># 设置环境变量</span></span><br><span class="line">    --env-file list            <span class="comment"># 读入环境变量文件</span></span><br><span class="line">    --expose list              <span class="comment"># 公开一个端口或一系列端口</span></span><br><span class="line">    --gpus gpu-request         <span class="comment"># 要添加到容器中的 GPU 设备（“全部”以传递所有 GPU）</span></span><br><span class="line">    --group-add list           <span class="comment"># 添加其他组以加入</span></span><br><span class="line">    --health-cmd string        <span class="comment"># 运行以检查运行状况的命令</span></span><br><span class="line">    --health-interval duration <span class="comment"># 运行检查之间的时间 (ms|s|m|h) (默认 0s)</span></span><br><span class="line">    --health-retries int           <span class="comment"># 需要报告不健康的连续失败</span></span><br><span class="line">    --health-start-period duration <span class="comment"># 开始健康重试倒计时之前容器初始化的开始时间（ms|s|m|h）（默认 0s）</span></span><br><span class="line">    --health-timeout duration      <span class="comment"># 允许运行一项检查的最长时间 (ms|s|m|h) (默认 0s)</span></span><br><span class="line">    --<span class="built_in">help</span>                     <span class="comment"># 打印使用</span></span><br><span class="line">-h, --hostname string          <span class="comment"># 容器主机名</span></span><br><span class="line">    --init                     <span class="comment"># 在容器内运行一个 init 来转发信号并收获进程</span></span><br><span class="line">-i, --interactive              <span class="comment"># 即使没有连接，也保持 STDIN 打开</span></span><br><span class="line">    --ip string                <span class="comment"># IPv4 地址（例如 172.30.100.104）</span></span><br><span class="line">    --ip6 string               <span class="comment"># IPv6 地址（例如，2001:db8::33）</span></span><br><span class="line">    --ipc string               <span class="comment"># 要使用的 IPC 模式</span></span><br><span class="line">    --isolation string         <span class="comment"># 容器隔离技术</span></span><br><span class="line">    --kernel-memory bytes      <span class="comment"># 内核内存限制</span></span><br><span class="line">-l, --label list               <span class="comment"># 在容器上设置元数据</span></span><br><span class="line">    --label-file list          <span class="comment"># 读入以行分隔的标签文件</span></span><br><span class="line">    --<span class="built_in">link</span> list                <span class="comment"># 添加到另一个容器的链接</span></span><br><span class="line">    --link-local-ip list       <span class="comment"># 容器 IPv4/IPv6 链路本地地址</span></span><br><span class="line">    --log-driver string        <span class="comment"># 容器的日志记录驱动程序</span></span><br><span class="line">    --log-opt list             <span class="comment"># 日志驱动程序选项</span></span><br><span class="line">    --mac-address string       <span class="comment"># 容器 MAC 地址（例如 92:d0:c6:0a:29:33）</span></span><br><span class="line">-m, --memory bytes             <span class="comment"># 内存限制</span></span><br><span class="line">    --memory-reservation bytes <span class="comment"># 内存软限制</span></span><br><span class="line">    --memory-swap bytes        <span class="comment"># 交换限制等于内存加上交换：&#x27;-1&#x27; 启用无限交换</span></span><br><span class="line">    --memory-swappiness int    <span class="comment"># 调整容器内存交换（0 到 100）（默认 -1）</span></span><br><span class="line">    --mount mount              <span class="comment"># 将文件系统挂载附加到容器</span></span><br><span class="line">    --name string              <span class="comment"># 为容器分配名称</span></span><br><span class="line">    --network network          <span class="comment"># 将容器连接到网络</span></span><br><span class="line">    --network-alias list       <span class="comment"># 为容器添加网络范围的别名</span></span><br><span class="line">    --no-healthcheck           <span class="comment"># 禁用任何容器指定的 HEALTHCHECK</span></span><br><span class="line">    --oom-kill-disable         <span class="comment"># 禁用 OOM 杀手</span></span><br><span class="line">    --oom-score-adj int        <span class="comment"># 调整主机的 OOM 首选项（-1000 到 1000）</span></span><br><span class="line">    --pid string               <span class="comment"># 要使用的 PID 命名空间</span></span><br><span class="line">    --pids-limit int           <span class="comment"># 调整容器 pids 限制（设置 -1 表示无限制）</span></span><br><span class="line">    --platform string          <span class="comment"># 如果服务器支持多平台，则设置平台</span></span><br><span class="line">    --privileged               <span class="comment"># 授予此容器扩展权限</span></span><br><span class="line">-p, --publish list             <span class="comment"># 将容器的端口发布到主机</span></span><br><span class="line">-P, --publish-all              <span class="comment"># 将所有暴露的端口发布到随机端口</span></span><br><span class="line">    --pull string              <span class="comment"># 创建前拉取镜像(&quot;always&quot;|&quot;missing&quot;|&quot;never&quot;)(默认&quot;missing&quot;)</span></span><br><span class="line">    --read-only                <span class="comment"># 将容器的根文件系统挂载为只读</span></span><br><span class="line">    --restart string           <span class="comment"># 容器退出时应用的重启策略（默认“否”）</span></span><br><span class="line">    --<span class="built_in">rm</span>                       <span class="comment"># 容器退出时自动移除</span></span><br><span class="line">    --runtime string           <span class="comment"># 用于此容器的运行时</span></span><br><span class="line">    --security-opt list        <span class="comment"># 安全选项</span></span><br><span class="line">    --shm-size bytes           <span class="comment"># /dev/shm 的大小</span></span><br><span class="line">    --stop-signal string       <span class="comment"># 停止容器的信号（默认“SIGTERM”）</span></span><br><span class="line">    --stop-timeout int         <span class="comment"># 停止容器的超时（以秒为单位）</span></span><br><span class="line">    --storage-opt list         <span class="comment"># 容器的存储驱动程序选项</span></span><br><span class="line">    --sysctl map               <span class="comment"># Sysctl 选项（默认 map[]）</span></span><br><span class="line">    --tmpfs list               <span class="comment"># 挂载 tmpfs 目录</span></span><br><span class="line">-t, --<span class="built_in">tty</span>                      <span class="comment"># 分配一个伪 TTY</span></span><br><span class="line">    --<span class="built_in">ulimit</span> <span class="built_in">ulimit</span>            <span class="comment"># ulimit 选项（默认 []）</span></span><br><span class="line">-u, --user string              <span class="comment"># 用户名或 UID（格式：&lt;name|uid&gt;[:&lt;group|gid&gt;]）</span></span><br><span class="line">    --userns string            <span class="comment"># 要使用的用户命名空间</span></span><br><span class="line">    --uts string               <span class="comment"># 要使用的 UTS 命名空间</span></span><br><span class="line">-v, --volume list              <span class="comment"># 绑定挂载卷</span></span><br><span class="line">    --volume-driver string     <span class="comment"># 容器的可选卷驱动程序</span></span><br><span class="line">    --volumes-from list        <span class="comment"># 从指定容器挂载卷</span></span><br><span class="line">-w, --workdir string           <span class="comment"># 容器内的工作目录</span></span><br></pre></td></tr></table></figure>

<p><code>run</code>&#x2F;<code>create</code> 大部分参数一致</p>
<h3 id="修改Docker镜像拉取地址"><a href="#修改Docker镜像拉取地址" class="headerlink" title="修改Docker镜像拉取地址"></a>修改Docker镜像拉取地址</h3><p>您可以通过修改daemon配置文件&#x2F;etc&#x2F;docker&#x2F;daemon.json来使用加速器</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p /etc/docker</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;registry-mirrors&quot;</span>: [<span class="string">&quot;https://1ojaslt1.mirror.aliyuncs.com&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"><span class="built_in">sudo</span> systemctl daemon-reload</span><br><span class="line"><span class="built_in">sudo</span> systemctl restart docker</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="修改-Docker-数据存储路径"><a href="#修改-Docker-数据存储路径" class="headerlink" title="修改 Docker 数据存储路径"></a>修改 Docker 数据存储路径</h3><!--rehype:wrap-class=row-span-2-->

<ul>
<li><p>停止 Docker 服务：</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl stop docker</span><br></pre></td></tr></table></figure>
</li>
<li><p>将现有的 Docker 数据移动到新的目录：</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">mv</span> /var/lib/docker /new/path/docker</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新 Docker 的配置文件 <code>/etc/docker/daemon.json</code>，添加或修改 <code>data-root</code> 选项：</p>
  <figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span> <span class="attr">&quot;data-root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/new/path/docker&quot;</span> <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重新启动 Docker 服务：</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl start docker</span><br></pre></td></tr></table></figure></li>
</ul>
<!--rehype:className=style-timeline-->

<p>⚠️注意：当你执行此操作时，旧的容器和镜像可能无法正常工作，因为它们的路径已更改。建议在部署 Docker 时执行此操作，以避免这些问题。如有必要，重新启动容器或重新创建它们，以确保它们的配置指向新的路径。</p>
<h3 id="Docker降级版本的方法"><a href="#Docker降级版本的方法" class="headerlink" title="Docker降级版本的方法"></a>Docker降级版本的方法</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum downgrade --<span class="built_in">setopt</span>=obsoletes=0 \</span><br><span class="line">    -y docker-ce-<span class="variable">$&#123;version&#125;</span> docker-ce-selinux-<span class="variable">$&#123;version&#125;</span></span><br></pre></td></tr></table></figure>

<p><code>$&#123;version&#125;</code> 指定要降级的版本</p>
<h2 id="Docker-常用示例"><a href="#Docker-常用示例" class="headerlink" title="Docker 常用示例"></a>Docker 常用示例</h2><!--rehype:body-class=cols-2-->

<h3 id="Docker-Web-管理工具-portainer"><a href="#Docker-Web-管理工具-portainer" class="headerlink" title="Docker Web 管理工具 portainer"></a>Docker Web 管理工具 portainer</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d --name portainer \</span><br><span class="line">  -p 8000:8000 \</span><br><span class="line">  -p 9443:9443 \</span><br><span class="line">  --restart=always \</span><br><span class="line">  -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">  -v <span class="variable">$HOME</span>/portainer:/data \</span><br><span class="line">    portainer/portainer-ee:latest</span><br></pre></td></tr></table></figure>

<h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -itd -p 80:80 --restart=always --name Nginx \</span><br><span class="line">-v <span class="variable">$HOME</span>/nginx_data/html:/usr/share/nginx/html \</span><br><span class="line">-v <span class="variable">$HOME</span>/nginx_data/conf:/etc/nginx/conf.d \</span><br><span class="line">-v <span class="variable">$HOME</span>/nginx_data/nginx.conf:/etc/nginx/nginx.conf \</span><br><span class="line">nginx</span><br></pre></td></tr></table></figure>

<h4 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h4><ul>
<li><code>-itd</code>: 启动容器并保持后台运行</li>
<li><code>-p 80:80</code>: 将主机的 80 端口映射到容器的 80 端口，用于访问 Nginx 站点页面</li>
<li><code>--name Nginx</code>: 给容器指定一个名称为 “Nginx”</li>
<li><code>--restart=always</code>: 在容器退出时，总是重新启动容器</li>
</ul>
<h4 id="持久化解释"><a href="#持久化解释" class="headerlink" title="持久化解释"></a>持久化解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-v $HOME/nginx_data/html:/usr/share/nginx/html</code></td>
<td>将容器中的 Nginx 站点页面路径映射到本地</td>
</tr>
<tr>
<td align="left"><code>-v $HOME/nginx_data/conf:/etc/nginx/conf.d</code></td>
<td>将容器中的 Nginx 虚拟主机配置文件路径映射到本地 <em>(需要提前准备好文件)</em></td>
</tr>
<tr>
<td align="left"><code>-v $HOME/nginx_data/nginx.conf:/etc/nginx/nginx.conf</code></td>
<td>将容器中的 Nginx 主配置文件路径映射到本地 <em>(需要提前准备好文件)</em></td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h3 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -itd -p 8080:8080 --restart=always \</span><br><span class="line">--name Tomcat \</span><br><span class="line">-v <span class="variable">$HOME</span>/Tomcat_data/webapps:/usr/local/tomcat/webapps/ROOT \</span><br><span class="line">tomcat</span><br></pre></td></tr></table></figure>

<h4 id="参数解释-1"><a href="#参数解释-1" class="headerlink" title="参数解释"></a>参数解释</h4><ul>
<li><code>-itd</code>: 以后台运行的方式启动容器，并分配一个伪终端（pseudo-TTY）和保持 STDIN 打开</li>
<li><code>-p 8080:8080</code>: 将主机的端口 8080 映射到容器的 8080 端口，用于访问 Tomcat 站点页面</li>
<li><code>--name Tomcat</code>: 为容器指定名称为 “Tomcat”</li>
<li><code>--restart=always</code>: 当容器退出时，总是重新启动容器</li>
</ul>
<h4 id="持久化解释-1"><a href="#持久化解释-1" class="headerlink" title="持久化解释"></a>持久化解释</h4><p>将容器中的 <code>/usr/local/tomcat/webapps/ROOT</code> 路径挂载到宿主机中的 <code>$HOME/Tomcat_data/webapps</code> 目录下。</p>
<h3 id="Weblogic"><a href="#Weblogic" class="headerlink" title="Weblogic"></a>Weblogic</h3><!--rehype:style=background:#d7a100;-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -itd \</span><br><span class="line">-p 7001:7001 \</span><br><span class="line">-p 7002:7002 \</span><br><span class="line">-p 5556:5556 \</span><br><span class="line">--restart=always --name Weblogic ismaleiva90/weblogic12</span><br></pre></td></tr></table></figure>

<p>注意：<code>ismaleiva90/weblogic12</code> 是非官方或认证的 <code>Docker</code> 镜像！</p>
<h4 id="参数解释-2"><a href="#参数解释-2" class="headerlink" title="参数解释"></a>参数解释</h4><ul>
<li><code>-itd</code>: 后台运行容器，保持 STDIN 打开</li>
<li><code>-p 7001:7001</code>: 映射主机 7001 端口到容器 7001 端口，访问 Weblogic 控制台页面</li>
<li><code>-p 7002:7002</code>: 映射主机 7002 端口到容器 7002 端口，访问 Weblogic 站点页面</li>
<li><code>-p 5556:5556</code>: 映射主机 5556 端口到容器 5556 端口，访问 Weblogic 站点页面</li>
<li><code>--name Weblogic</code>: 容器名称为 “Weblogic”</li>
<li><code>--restart=always</code>: 容器退出时，总是重新启动容器</li>
</ul>
<h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -it -p 3306:3306 --name MySQL --restart=always \</span><br><span class="line">-v <span class="variable">$HOME</span>/MySQL_Data/data:/var/lib/mysql \</span><br><span class="line">-v <span class="variable">$HOME</span>/MySQL_Data/conf:/etc/mysql/conf.d \</span><br><span class="line">--privileged=<span class="literal">true</span> \</span><br><span class="line">-e MYSQL_DATABASE=<span class="string">&#x27;test_db&#x27;</span> \</span><br><span class="line">-e MYSQL_ROOT_PASSWORD=<span class="string">&#x27;abc$123&#x27;</span> \</span><br><span class="line">-e MYSQL_USER=<span class="string">&#x27;testuser&#x27;</span> -e MYSQL_PASSWORD=<span class="string">&#x27;abc$123&#x27;</span> \</span><br><span class="line">mysql:8.0.31 \</span><br><span class="line">    --character-set-server=utf8mb4 \</span><br><span class="line">    --collation-server=utf8mb4_unicode_ci</span><br></pre></td></tr></table></figure>

<h4 id="参数解释-3"><a href="#参数解释-3" class="headerlink" title="参数解释"></a>参数解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-d</code></td>
<td>表示以后台运行的方式启动容器</td>
</tr>
<tr>
<td align="left"><code>-it</code></td>
<td>分别表示分配一个伪终端（pseudo-TTY）并保持 STDIN 打开</td>
</tr>
<tr>
<td align="left"><code>-p 3306:3306</code></td>
<td>将主机的端口映射到容器的端口，这里是将主机的 3306 端口映射到容器的 3306 端口，用于访问 MySQL 数据库</td>
</tr>
<tr>
<td align="left"><code>--name MySQL</code></td>
<td>为容器指定一个名称，这里是 “MySQL”</td>
</tr>
<tr>
<td align="left"><code>--restart=always</code></td>
<td>表示当容器退出时，总是重新启动容器</td>
</tr>
<tr>
<td align="left"><code>--privileged=true</code></td>
<td>若不加字段–privileged&#x3D;true可能会报权限错误</td>
</tr>
<tr>
<td align="left"><code>--character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</code></td>
<td>这两个选项参数是改变所有表的默认编码和排序规则以使用 UTF-8 (utf8mb4)</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="持久化解释-2"><a href="#持久化解释-2" class="headerlink" title="持久化解释"></a>持久化解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-v $HOME/MySQL_Data/data:/var/lib/mysql</code></td>
<td>将容器中的 MySQL 数据库数据存储到本地，以确保在容器重启时数据得以保留。</td>
</tr>
<tr>
<td align="left"><code>-v $HOME/MySQL_Data/conf:/etc/mysql/conf.d</code></td>
<td>将容器中的 MySQL 自定义配置文件路径映射到本地，以方便自定义配置。<em>请确保提前准备好文件，否则可能会启动失败</em>。</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="环境变量解释"><a href="#环境变量解释" class="headerlink" title="环境变量解释"></a>环境变量解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>MYSQL_ROOT_PASSWORD</code> <em>【必填】</em></td>
<td>必需的变量，用于指定 MySQL 的 root 超级用户帐户的密码。如果设置了 <em><code>MYSQL_RANDOM_ROOT_PASSWORD=yes</code></em> ，则会随机生成一个密码，并打印到 stdout。</td>
</tr>
<tr>
<td align="left"><code>MYSQL_USER</code> <em>【可选】</em></td>
<td>可选变量，用于创建新用户。此用户将被授予指定数据库的超级用户权限。需要同时设置 <code>MYSQL_PASSWORD</code> 变量。</td>
</tr>
<tr>
<td align="left"><code>MYSQL_PASSWORD</code> <em>【可选】</em></td>
<td>可选变量，用于创建新用户并设置密码。此用户将被授予指定数据库的超级用户权限。需要同时设置 <code>MYSQL_USER</code> 变量。</td>
</tr>
<tr>
<td align="left"><code>MYSQL_DATABASE</code> <em>【可选】</em></td>
<td>可选变量，允许在容器启动时指定要创建的数据库的名称。如果设置了 <code>MYSQL_USER</code> 和 <code>MYSQL_PASSWORD</code>，则该用户将被授予对此数据库的超级用户访问权限。</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h3 id="Oracle"><a href="#Oracle" class="headerlink" title="Oracle"></a>Oracle</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -it -p 1521:1521 --name Oracle_11g --restart=always \</span><br><span class="line">--mount <span class="built_in">source</span>=oracle_vol,target=/home/oracle/app/oracle/oradata \</span><br><span class="line">registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g</span><br></pre></td></tr></table></figure>

<p>注意：registry.cn-hangzhou.aliyuncs.com&#x2F;helowin&#x2F;oracle_11g 是非官方或认证的Docker镜像！</p>
<h4 id="参数解释-4"><a href="#参数解释-4" class="headerlink" title="参数解释"></a>参数解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-d</code></td>
<td>表示以后台运行的方式启动容器</td>
</tr>
<tr>
<td align="left"><code>-it</code></td>
<td>分别表示分配一个伪终端（pseudo-TTY）并保持 STDIN 打开</td>
</tr>
<tr>
<td align="left"><code>-p 1521:1521</code></td>
<td>将主机的端口映射到容器的端口，这里是将主机的 1521 端口映射到容器的 1521 端口，用于访问 Oracle 数据库</td>
</tr>
<tr>
<td align="left"><code>--name Oracle_11g</code></td>
<td>为容器指定一个名称，这里是 “Oracle_11g”</td>
</tr>
<tr>
<td align="left"><code>--restart=always</code></td>
<td>表示当容器退出时，总是重新启动容器</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="持久化解释-3"><a href="#持久化解释-3" class="headerlink" title="持久化解释"></a>持久化解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>--mount source=oracle_vol,target=/home/oracle/app/oracle/oradata</code></td>
<td>将名为 “oracle_vol” 的 Docker 卷挂载到容器中的 “&#x2F;home&#x2F;oracle&#x2F;app&#x2F;oracle&#x2F;oradata” 路径。这样做的目的是将 Oracle 数据库的数据存储在持久化的卷中，以便数据在容器重启时得以保留</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h3 id="PostgreSQL"><a href="#PostgreSQL" class="headerlink" title="PostgreSQL"></a>PostgreSQL</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -p 5432:5432 --restart=always --name PostgreSQL \</span><br><span class="line">-e POSTGRES_USER=<span class="string">&#x27;postgres&#x27;</span> \</span><br><span class="line">-e POSTGRES_PASSWORD=<span class="string">&#x27;abc$123&#x27;</span> \</span><br><span class="line">-e POSTGRES_DB=<span class="string">&#x27;test&#x27;</span> \</span><br><span class="line">-e PGDATA=/var/lib/postgresql/data/pgdata \</span><br><span class="line">-v <span class="variable">$HOME</span>/Postgres_Data:/var/lib/postgresql/data \</span><br><span class="line">-d postgres</span><br></pre></td></tr></table></figure>

<h4 id="参数解释-5"><a href="#参数解释-5" class="headerlink" title="参数解释"></a>参数解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-d</code></td>
<td>表示以后台运行的方式启动容器</td>
</tr>
<tr>
<td align="left"><code>-it</code></td>
<td>分别表示分配一个伪终端（pseudo-TTY）并保持 STDIN 打开</td>
</tr>
<tr>
<td align="left"><code>-p 5432:5432</code></td>
<td>将主机的端口映射到容器的端口，这里是将主机的 5432 端口映射到容器的 5432 端口，用于访问 Postgre 数据库</td>
</tr>
<tr>
<td align="left"><code>--name PostgreSQL</code></td>
<td>为容器指定一个名称，这里是 “PostgreSQL”</td>
</tr>
<tr>
<td align="left"><code>--restart=always</code></td>
<td>表示当容器退出时，总是重新启动容器</td>
</tr>
</tbody></table>
<!--rehype:className=auto-wrap left-align-->

<h4 id="持久化解释-4"><a href="#持久化解释-4" class="headerlink" title="持久化解释"></a>持久化解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-v $HOME/Postgres_Data:/var/lib/postgresql/data</code></td>
<td>将到容器中的 “&#x2F;var&#x2F;lib&#x2F;postgresql&#x2F;data” 路径映射挂载到 宿主机中的 ”$HOME&#x2F;Postgres_Data“目录下,这样做的目的是将 Postgre 数据库的数据存储在本地中，以便数据在容器重启时得以保留</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="环境变量解释-1"><a href="#环境变量解释-1" class="headerlink" title="环境变量解释"></a>环境变量解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>POSTGRES_PASSWORD</code> <em>【必填】</em></td>
<td>PostgreSQL 映像所需的环境变量。设置 PostgreSQL 超级用户的密码。不能为空或未定义。</td>
</tr>
<tr>
<td align="left"><code>POSTGRES_USER</code> <em>【可选】</em></td>
<td>可选环境变量，用于创建用户及其密码。创建具有超级用户权限的指定用户和同名的数据库。默认用户是 “postgres”。</td>
</tr>
<tr>
<td align="left"><code>POSTGRES_DB</code> <em>【可选】</em></td>
<td>可选环境变量，用于定义首次启动映像时创建的默认数据库的名称。默认值是 <code>POSTGRES_USER</code> 的值，如果未设置，则默认为 “postgres”。</td>
</tr>
<tr>
<td align="left"><code>PGDATA</code> <em>【可选】</em></td>
<td>默认为 <code>/var/lib/postgresql/data</code>。如果使用的数据卷是文件系统挂载点或无法被用户 chowned 的远程文件夹，则需要设置此环境变量以包含数据。</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h3 id="达梦"><a href="#达梦" class="headerlink" title="达梦"></a>达梦</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -p 5236:5236 --restart=always --name DaMengDB \</span><br><span class="line">--privileged=<span class="literal">true</span> \</span><br><span class="line">-e PAGE_SIZE=16 \</span><br><span class="line">-e LD_LIBRARY_PATH=/opt/dmdbms/bin \</span><br><span class="line">-e EXTENT_SIZE=32 \</span><br><span class="line">-e BLANK_PAD_MODE=1 \</span><br><span class="line">-e LOG_SIZE=1024 \</span><br><span class="line">-e UNICODE_FLAG=1 \</span><br><span class="line">-e LENGTH_IN_CHAR=1 \</span><br><span class="line">-e INSTANCE_NAME=dm8_test \</span><br><span class="line">-v <span class="variable">$HOME</span>/DaMeng_Data:/opt/dmdbms/data \</span><br><span class="line">if010/dameng</span><br></pre></td></tr></table></figure>

<p>注意：if010&#x2F;dameng 是从官网下载上传至 Docker Hub 的镜像！</p>
<h4 id="参数解释-6"><a href="#参数解释-6" class="headerlink" title="参数解释"></a>参数解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-d</code></td>
<td>表示以后台运行的方式启动容器</td>
</tr>
<tr>
<td align="left"><code>-it</code></td>
<td>分别表示分配一个伪终端（pseudo-TTY）并保持 STDIN 打开</td>
</tr>
<tr>
<td align="left"><code>-p 5236:5236</code></td>
<td>将主机的端口映射到容器的端口，这里是将主机的 5236 端口映射到容器的 5236 端口，用于访问达梦数据库</td>
</tr>
<tr>
<td align="left"><code>--name DaMengDB</code></td>
<td>为容器指定一个名称，这里是 “DaMengDB”</td>
</tr>
<tr>
<td align="left"><code>--restart=always</code></td>
<td>表示当容器退出时，总是重新启动容器</td>
</tr>
</tbody></table>
<!--rehype:className=auto-wrap left-align-->

<h4 id="持久化解释-5"><a href="#持久化解释-5" class="headerlink" title="持久化解释"></a>持久化解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-v $HOME/DaMeng_Data:/opt/dmdbms/data</code></td>
<td>将容器中的达梦数据库数据存储路径 “&#x2F;opt&#x2F;dmdbms&#x2F;data” 映射到本地主机的 “$HOME&#x2F;DaMeng_Data” 目录，以确保在容器重启时数据得以保留</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h3 id="人大金仓"><a href="#人大金仓" class="headerlink" title="人大金仓"></a>人大金仓</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -idt -p 5432:54321 --restart=always \</span><br><span class="line">--name Kingbase --privileged=<span class="literal">true</span> \</span><br><span class="line">-e DB_MODE=oracle \</span><br><span class="line">-e NEED_START=<span class="built_in">yes</span> \</span><br><span class="line">-e DB_USER=kingbase \</span><br><span class="line">-e DB_PASSWORD=abc123 \</span><br><span class="line">-e ENABLE_CI=<span class="built_in">yes</span> \</span><br><span class="line">-v <span class="variable">$HOME</span>/Kingbase_Data:/home/kingbase/userdata \</span><br><span class="line">if010/kingbase:v009r001c001b0025 /usr/sbin/init</span><br></pre></td></tr></table></figure>

<p>注意：<code>if010/kingbase:v009r001c001b0025</code> 是从官网下载上传至 Docker Hub 的镜像，官网提供了两个下载版本，一个是 <code>v008r006c008b0014</code>，另一个是 <code>v009r001c001b0025</code>，可以拉取对应的 <code>tag</code> 镜像进行测试使用！</p>
<h4 id="参数解释-7"><a href="#参数解释-7" class="headerlink" title="参数解释"></a>参数解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-itd</code></td>
<td>以后台方式启动容器，保持 STDIN 打开</td>
</tr>
<tr>
<td align="left"><code>-p 5432:54321</code></td>
<td>将主机的 5432 端口映射到容器的 5432 端口，访问数据库</td>
</tr>
<tr>
<td align="left"><code>--name Kingbase</code></td>
<td>给容器指定名称为 “Kingbase”</td>
</tr>
<tr>
<td align="left"><code>--restart=always</code></td>
<td>容器退出时，总是重新启动容器</td>
</tr>
</tbody></table>
<!--rehype:className=auto-wrap left-align-->

<h4 id="持久化解释-6"><a href="#持久化解释-6" class="headerlink" title="持久化解释"></a>持久化解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-v $HOME/Kingbase_Data:/home/kingbase/userdata</code></td>
<td>将容器中的人大金仓数据库数据存储路径 “&#x2F;home&#x2F;kingbase&#x2F;userdata” 映射到本地主机的 “$HOME&#x2F;Kingbase_Data” 目录，以确保在容器重启时数据得以保留</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="环境变量解释-2"><a href="#环境变量解释-2" class="headerlink" title="环境变量解释"></a>环境变量解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>DB_USER</code> <em>【可选】</em></td>
<td>设置用户及其密码，默认为 “system”</td>
</tr>
<tr>
<td align="left"><code>DB_PASSWORD</code> <em>【可选】</em></td>
<td>设置用户密码，默认为 “123456”</td>
</tr>
<tr>
<td align="left"><code>DB_MODE</code> <em>【可选】</em></td>
<td>设置数据库模式，支持的模式有 oracle、pg、mysql</td>
</tr>
<tr>
<td align="left"><code>NEED_START</code> <em>【可选】</em></td>
<td>设置进入容器后是否启动数据库，默认为 “yes”</td>
</tr>
<tr>
<td align="left"><code>ENABLE_CI</code> <em>【可选】</em></td>
<td>设置是否需要配置大小写敏感，默认为 “yes”</td>
</tr>
</tbody></table>
<!--rehype:className=auto-wrap left-align-->

<h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -p 6379:6379 --restart=always --name Redis \</span><br><span class="line">-v <span class="variable">$HOME</span>/Redis_Data/conf:/usr/local/etc/redis \</span><br><span class="line">-v <span class="variable">$HOME</span>/Redis_Data/data:/data \</span><br><span class="line">redis redis-server /usr/local/etc/redis/redis.conf</span><br></pre></td></tr></table></figure>

<h4 id="参数解释-8"><a href="#参数解释-8" class="headerlink" title="参数解释"></a>参数解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-d</code></td>
<td>表示以后台运行的方式启动容器</td>
</tr>
<tr>
<td align="left"><code>-it</code></td>
<td>分别表示分配一个伪终端（pseudo-TTY）并保持 STDIN 打开</td>
</tr>
<tr>
<td align="left"><code>-p 6379:6379</code></td>
<td>将主机的端口映射到容器的端口，这里是将主机的 6379 端口映射到容器的 6379 端口，用于访问 Redis 数据库</td>
</tr>
<tr>
<td align="left"><code>--name Redis</code></td>
<td>为容器指定一个名称，这里是 “Redis”</td>
</tr>
<tr>
<td align="left"><code>--restart=always</code></td>
<td>表示当容器退出时，总是重新启动容器</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="持久化解释-7"><a href="#持久化解释-7" class="headerlink" title="持久化解释"></a>持久化解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-v $HOME/Redis_Data/conf:/usr/local/etc/redis</code></td>
<td><em>(需提前准备好文件，否则可能会启动失败)</em> 将到容器中的 “&#x2F;usr&#x2F;local&#x2F;etc&#x2F;redis” 路径映射挂载到 宿主机中的”$HOME&#x2F;Redis_Data&#x2F;conf”目录下,这样子做的目的是可以自定义Redis的配置文件</td>
</tr>
<tr>
<td align="left"><code>-v $HOME/Redis_Data/data:/data</code></td>
<td>将到容器中的 “&#x2F;data” 路径映射挂载到 宿主机中的”$HOME&#x2F;Redis_Data&#x2F;data”目录下,这样做的目的是将 Redis 数据库的数据存储在本地中，以便数据在容器重启时得以保留</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="关于启动命令"><a href="#关于启动命令" class="headerlink" title="关于启动命令"></a>关于启动命令</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>redis-server /usr/local/etc/redis/redis.conf</code></td>
<td>容器内部执行该命令是为了按照我们自定义的配置文件启动，这个不是必须的！！！</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h3 id="Memcache"><a href="#Memcache" class="headerlink" title="Memcache"></a>Memcache</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -p 11211:11211 --name Memcached \</span><br><span class="line">    --restart=always memcached memcached -m 64</span><br></pre></td></tr></table></figure>

<h4 id="参数解释-9"><a href="#参数解释-9" class="headerlink" title="参数解释"></a>参数解释</h4><ul>
<li><code>-d</code>: 以后台方式启动容器。</li>
<li><code>-it</code>: 分配一个伪终端（pseudo-TTY）并保持 STDIN 打开。</li>
<li><code>-p 11211:11211</code>: 将主机的 11211 端口映射到容器的 11211 端口，用于访问 Memcached 消息队列的 web 管理界面。</li>
<li><code>--name Memcached</code>: 容器的名称为 “Memcached”。</li>
<li><code>--restart=always</code>: 容器退出时，总是重新启动容器。</li>
</ul>
<h4 id="命令执行解释"><a href="#命令执行解释" class="headerlink" title="命令执行解释"></a>命令执行解释</h4><ul>
<li><code>memcached -m 64</code> 这会将 Memcached 服务器设置为使用 64 MB 进行存储</li>
</ul>
<h3 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -p 27017:27017 --restart=always --name MongoDB \</span><br><span class="line">-e MONGO_INITDB_ROOT_USERNAME=mongoadmin \</span><br><span class="line">-e MONGO_INITDB_ROOT_PASSWORD=abc123 \</span><br><span class="line">-v <span class="variable">$HOME</span>/MongoDB_Data/data:/data/db \</span><br><span class="line">-v <span class="variable">$HOME</span>/MongoDB_Data/conf:/etc/mongo \</span><br><span class="line">mongo --config /etc/mongo/mongod.conf --wiredTigerCacheSizeGB 1.5</span><br></pre></td></tr></table></figure>

<h4 id="参数解释-10"><a href="#参数解释-10" class="headerlink" title="参数解释"></a>参数解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-d</code></td>
<td>表示以后台运行的方式启动容器</td>
</tr>
<tr>
<td align="left"><code>-it</code></td>
<td>分别表示分配一个伪终端（pseudo-TTY）并保持 STDIN 打开</td>
</tr>
<tr>
<td align="left"><code>-p 27017:27017</code></td>
<td>将主机的端口映射到容器的端口，这里是将主机的 27017 端口映射到容器的 27017 端口，用于访问 MongoDB 数据库</td>
</tr>
<tr>
<td align="left"><code>--name MongoDB</code></td>
<td>为容器指定一个名称，这里是 “MongoDB”</td>
</tr>
<tr>
<td align="left"><code>--restart=always</code></td>
<td>表示当容器退出时，总是重新启动容器</td>
</tr>
<tr>
<td align="left"><code>--config /etc/mongo/mongod.conf</code></td>
<td>指定配置文件路径 (这个不是必须的，设置此选项之前需准备好mongod.conf文件映射到Docker内部)</td>
</tr>
<tr>
<td align="left"><code>--wiredTigerCacheSizeGB 1.5</code></td>
<td>设置WiredTiger缓存大小限制为1.5G</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="持久化解释-8"><a href="#持久化解释-8" class="headerlink" title="持久化解释"></a>持久化解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-v $HOME/MongoDB_Data/conf:/etc/mongo</code></td>
<td>将到容器中的 “&#x2F;etc&#x2F;mongo” 路径映射挂载到 宿主机中的”$HOME&#x2F;MongoDB_Data&#x2F;conf”目录下,这样子做的目的是可以自定义MongoDB的配置文件 <em>(需提前准备好文件，否则可能会启动失败)</em></td>
</tr>
<tr>
<td align="left"><code>-v $HOME/Redis_Data/data:/data</code></td>
<td>将到容器中的 “&#x2F;data&#x2F;db” 路径映射挂载到 宿主机中的”$HOME&#x2F;MongoDB_Data&#x2F;data”目录下,这样做的目的是将 MongoDB 数据库的数据存储在本地中，以便数据在容器重启时得以保留</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="环境变量解释-3"><a href="#环境变量解释-3" class="headerlink" title="环境变量解释"></a>环境变量解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>MONGO_INITDB_ROOT_USERNAME</code> <em>【可选】</em></td>
<td>该变量是创建管理员用户，该用户是在 admin 身份验证数据库中创建的，并被赋予角色 root，这是一个”超级用户”角色。</td>
</tr>
<tr>
<td align="left"><code>MONGO_INITDB_ROOT_PASSWORD</code> <em>【可选】</em></td>
<td>该变量是为创建管理员用户设置密码，需配合 <code>MONGO_INITDB_ROOT_USERNAME</code> 变量参数使用</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h3 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -itd -p 15672:15672 --name RabbitMQ \</span><br><span class="line">--hostname rmq-test \</span><br><span class="line">-e RABBITMQ_DEFAULT_VHOST=rmq-test \</span><br><span class="line">-e RABBITMQ_DEFAULT_USER=admin \</span><br><span class="line">-e RABBITMQ_DEFAULT_PASS=abc123 \</span><br><span class="line">rabbitmq:3-management </span><br></pre></td></tr></table></figure>

<h4 id="参数解释-11"><a href="#参数解释-11" class="headerlink" title="参数解释"></a>参数解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-itd</code></td>
<td>表示以后台运行的方式启动容器,并分配一个伪终端（pseudo-TTY）和保持 STDIN 打开</td>
</tr>
<tr>
<td align="left"><code>-p 15672:15672</code></td>
<td>将主机的端口映射到容器的端口，这里是将主机的 15672 端口映射到容器的 15672 端口，用于访问 RabbitMQ 控制台页面，内部除了该端口外，还开了4369&#x2F;tcp、5671-5672&#x2F;tcp、15671&#x2F;tcp、15691-15692&#x2F;tcp、25672&#x2F;tcp</td>
</tr>
<tr>
<td align="left"><code>--name RabbitMQ</code></td>
<td>为容器指定一个名称，这里是 “RabbitMQ”</td>
</tr>
<tr>
<td align="left"><code>--restart=always</code></td>
<td>表示当容器退出时，总是重新启动容器</td>
</tr>
<tr>
<td align="left"><code>--hostname</code></td>
<td>设置容器主机名称</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="环境变量解释-4"><a href="#环境变量解释-4" class="headerlink" title="环境变量解释"></a>环境变量解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>RABBITMQ_DEFAULT_VHOST</code> <em>【可选】</em></td>
<td>该变量是可选的，是设置 RabbitMQ 的主机名称</td>
</tr>
<tr>
<td align="left"><code>RABBITMQ_DEFAULT_USER</code> <em>【可选】</em></td>
<td>该变量是可选的，是设置 RabbitMQ 的账户</td>
</tr>
<tr>
<td align="left"><code>RABBITMQ_DEFAULT_PASS</code> <em>【可选】</em></td>
<td>该变量是可选的，是设置 RabbitMQ 的密码</td>
</tr>
</tbody></table>
<!--rehype:className=auto-wrap left-align-->

<h3 id="远程协助工具-Guacd"><a href="#远程协助工具-Guacd" class="headerlink" title="远程协助工具 Guacd"></a>远程协助工具 Guacd</h3><!--rehype:wrap-class=row-span-3-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -p 4822:4822 --privileged=<span class="literal">true</span> \</span><br><span class="line">    --restart=always --name Guacd \</span><br><span class="line">    -e LANG=zh_CN.UTF-8 \</span><br><span class="line">    -v /docker_data/Guacd/rdp-rec:/rdp-rec \</span><br><span class="line">    -v /docker_data/Guacd/rdp-file:/rdp-file \</span><br><span class="line">    guacamole/guacd</span><br></pre></td></tr></table></figure>

<h4 id="参数解释-12"><a href="#参数解释-12" class="headerlink" title="参数解释"></a>参数解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-d</code></td>
<td>表示以后台运行的方式启动容器</td>
</tr>
<tr>
<td align="left"><code>-it</code></td>
<td>分别表示分配一个伪终端（pseudo-TTY）并保持 STDIN 打开</td>
</tr>
<tr>
<td align="left"><code>-p 4822:4822</code></td>
<td>将主机的端口映射到容器的端口，这里是将主机的 4822 端口映射到容器的 4822 端口，用于访问 Guacd远程的API接口</td>
</tr>
<tr>
<td align="left"><code>--name Guacd</code></td>
<td>为容器指定一个名称，这里是 “Guacd”</td>
</tr>
<tr>
<td align="left"><code>--restart=always</code></td>
<td>表示当容器退出时，总是重新启动容器</td>
</tr>
<tr>
<td align="left"><code>--privileged=true</code></td>
<td>若不加字段–privileged&#x3D;true可能会报权限错误</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="持久化解释-9"><a href="#持久化解释-9" class="headerlink" title="持久化解释"></a>持久化解释</h4><table>
<thead>
<tr>
<th align="left">–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-v /docker_data/Guacd/rdp-rec:/rdp-rec</code></td>
<td>代码内固定配置，guacd服务rdp录屏文件存放路径</td>
</tr>
<tr>
<td align="left"><code>-v /docker_data/Guacd/rdp-file:/rdp-file</code></td>
<td>代码内固定配置，guacd服务rdp远程磁盘文件存放路</td>
</tr>
</tbody></table>
<!--rehype:className=style-list-arrow-->

<h4 id="环境变量解释-5"><a href="#环境变量解释-5" class="headerlink" title="环境变量解释"></a>环境变量解释</h4><ul>
<li><code>LANG</code> 设置字符编码格式</li>
</ul>
<h3 id="在线代码编辑器-Code-Server"><a href="#在线代码编辑器-Code-Server" class="headerlink" title="在线代码编辑器 Code Server"></a>在线代码编辑器 Code Server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> -p ~/.config</span><br><span class="line">$ docker run -it --name code-server  \</span><br><span class="line">  -p 127.0.0.1:8080:8080 \</span><br><span class="line">  -v <span class="string">&quot;<span class="variable">$HOME</span>/.config/code-server:/home/coder/.config&quot;</span> \</span><br><span class="line">  -v <span class="string">&quot;<span class="variable">$PWD</span>:/home/coder/project&quot;</span> \</span><br><span class="line">  -u <span class="string">&quot;<span class="subst">$(id -u)</span>:<span class="subst">$(id -g)</span>&quot;</span> \</span><br><span class="line">  -e <span class="string">&quot;DOCKER_USER=<span class="variable">$USER</span>&quot;</span> \</span><br><span class="line">    codercom/code-server:latest</span><br></pre></td></tr></table></figure>

<h3 id="媒体管理工具-Dim"><a href="#媒体管理工具-Dim" class="headerlink" title="媒体管理工具 Dim"></a>媒体管理工具 Dim</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run --name my-dim \</span><br><span class="line">   -p 8000:8000/tcp \</span><br><span class="line">   -v <span class="variable">$HOME</span>/.config/dim:/opt/dim/config \</span><br><span class="line">   -v <span class="variable">$HOME</span>/dim/media:/media:ro \</span><br><span class="line">   -d ghcr.io/dusk-labs/dim:dev</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/Dusk-Labs/dim">Github</a></p>
<h3 id="Gitlab"><a href="#Gitlab" class="headerlink" title="Gitlab"></a>Gitlab</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d --name gitlab \</span><br><span class="line">  --hostname gitlab.example.com \</span><br><span class="line">  --publish 8443:443 --publish 8081:80 -p 2222:22 \</span><br><span class="line">  --restart always \</span><br><span class="line">  --volume <span class="variable">$HOME</span>/gitlab/config:/etc/gitlab \</span><br><span class="line">  --volume <span class="variable">$HOME</span>/gitlab/logs:/var/log/gitlab \</span><br><span class="line">  --volume <span class="variable">$HOME</span>/gitlab/data:/var/opt/gitlab \</span><br><span class="line">  -v /etc/localtime:/etc/localtime \</span><br><span class="line">  --shm-size 256m \</span><br><span class="line">    gitlab/gitlab-ce:latest</span><br></pre></td></tr></table></figure>

<h2 id="另见"><a href="#另见" class="headerlink" title="另见"></a>另见</h2><ul>
<li><a href="./dockerfile.md">Dockerfile 备忘清单</a> <em>(github.io)</em></li>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/get-started/">Docker 官方入门教程</a> <em>(docker.com)</em></li>
<li><a target="_blank" rel="noopener" href="https://jaywcjlove.github.io/docker-tutorial">Docker入门学习笔记</a> <em>(github.io)</em></li>
<li><a target="_blank" rel="noopener" href="https://www.loganjin.cn/article/docker-install/">快速安装Docker及配置及Docker配置、Docker常用命令</a></li>
</ul>
</div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">毅栈</div><div class="author-info__description">记录生活，分享技术。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/caoyixiong"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;amp;uin=409677557&amp;amp;site=qq&amp;amp;menu=yes" target="_blank" title="QQ"><i class="fab fa-qq" style="color: #24292e;"></i></a><a class="social-icon" href="/img/wechat.jpg" target="_blank" title="微信"><i class="fab fa-weixin" style="color: #24292e;"></i></a><a class="social-icon" href="https://github.com/caoyixiong" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:409677557@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">如果阅读过程中遇到了问题，请及时评论或者留言，看到了会在第一时间给出回复。</div></div><!-- !=partial('includes/widget/card_wx', {}, {cache: true})--><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/229924b5.html" title="Vue 快速开始">Vue 快速开始</a><time datetime="2024-08-31T18:49:50.788Z" title="发表于 2024-09-01 02:49:50">2024-09-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/adab0374.html" title="Node 多版本管理">Node 多版本管理</a><time datetime="2024-08-27T12:54:37.582Z" title="发表于 2024-08-27 20:54:37">2024-08-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/5c3d4808.html" title="第一个Go程序">第一个Go程序</a><time datetime="2024-08-23T16:46:21.634Z" title="发表于 2024-08-24 00:46:21">2024-08-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/65b9ed48.html" title="GOPATH">GOPATH</a><time datetime="2024-08-21T16:28:07.159Z" title="发表于 2024-08-22 00:28:07">2024-08-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/6b9fbde2.html" title="Gin 快速入门">Gin 快速入门</a><time datetime="2024-08-19T17:27:21.321Z" title="发表于 2024-08-20 01:27:21">2024-08-20</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Go/"><span class="card-category-list-name">Go</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Node/"><span class="card-category-list-name">Node</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Ubuntu/"><span class="card-category-list-name">Ubuntu</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Vue/"><span class="card-category-list-name">Vue</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Gin/" style="font-size: 1.1em; color: #999">Gin</a> <a href="/tags/LNMP/" style="font-size: 1.1em; color: #999">LNMP</a> <a href="/tags/Nvm/" style="font-size: 1.1em; color: #999">Nvm</a> <a href="/tags/%E4%B8%BB%E9%A2%98/" style="font-size: 1.1em; color: #999">主题</a> <a href="/tags/Vue/" style="font-size: 1.1em; color: #999">Vue</a> <a href="/tags/Go/" style="font-size: 1.5em; color: #99a9bf">Go</a> <a href="/tags/AWK/" style="font-size: 1.1em; color: #999">AWK</a> <a href="/tags/Crontab/" style="font-size: 1.1em; color: #999">Crontab</a> <a href="/tags/LAMP/" style="font-size: 1.1em; color: #999">LAMP</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">2024年09月</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">2024年08月</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/07/"><span class="card-archive-list-date">2020年07月</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/03/"><span class="card-archive-list-date">2020年03月</span><span class="card-archive-list-count">4</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">13</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2016-05-13T00:30:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">10.1k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-09-02T06:52:04.942Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/home.jpg')"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">公益广告</p><div class="bg-ad"><div>国家反诈中心是国务院打击治理电信网络新型违法犯罪工作部际联席会议合成作战平台，集资源整合、情报研判、侦查指挥为一体，在打击、防范、治理电信网络诈骗等新型违法犯罪中发挥着重要作用。</div><div class="btn-xz-box"><a class="btn-xz" href="https://caoyixiong.com/">主页</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">导航</p><ul class="ft-links"><li><a href="https://caoyixiong.com/about/">关于博主</a><a href="https://caoyixiong.com/categories/">文章分类</a></li><li><a href="https://caoyixiong.com/sponsor/">来杯咖啡</a><a href="https://caoyixiong.com/tags/">文章标签</a></li><li><a href="https://caoyixiong.com/comments/">说点什么</a><a href="https://caoyixiong.com/archives/">文章归档</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">友链</p><div class="ft-img-group"><div class="img-group-item"><a href="https://caoyixiong.com/"><img src="/img/avatar.jpg" alt=""/></a></div></div></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-8sxa.vercel.app',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-8sxa.vercel.app',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-8sxa.vercel.app',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script data-pjax defer src="https://npm.elemecdn.com/tzy-blog/lib/js/theme/chocolate.js"></script><script data-pjax defer src="/js/cursor.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.22.1/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.65.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js?v=4.13.0"></script></div></div></body></html>