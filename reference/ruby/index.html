<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Ruby 备忘清单 | 毅栈</title><meta name="author" content="毅栈"><meta name="copyright" content="毅栈"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="入门安装  # Debian, Ubuntu$ sudo apt-get install ruby-full# Windows$ winget install RubyInstallerTeam.Ruby $ brew install ruby # macOS$ docker run -it --rm ruby:latest # Docker$ docker run -it --rm ruby:2">
<meta property="og:type" content="website">
<meta property="og:title" content="Ruby 备忘清单">
<meta property="og:url" content="https://caoyixiong.com/reference/ruby/index.html">
<meta property="og:site_name" content="毅栈">
<meta property="og:description" content="入门安装  # Debian, Ubuntu$ sudo apt-get install ruby-full# Windows$ winget install RubyInstallerTeam.Ruby $ brew install ruby # macOS$ docker run -it --rm ruby:latest # Docker$ docker run -it --rm ruby:2">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://caoyixiong.com/img/avatar.jpg">
<meta property="article:published_time" content="2024-08-10T06:16:15.958Z">
<meta property="article:modified_time" content="2024-08-10T06:16:15.958Z">
<meta property="article:author" content="毅栈">
<meta property="article:tag" content="博客，生活，技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://caoyixiong.com/img/avatar.jpg"><link rel="shortcut icon" href="/img/logo.png"><link rel="canonical" href="https://caoyixiong.com/reference/ruby/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"3NQ1I8Z7GZ","apiKey":"df5bcd27157ba7efa007752258f185fd","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 毅栈","link":"链接: ","source":"来源: 毅栈","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Ruby 备忘清单',
  isPost: false,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-08-10 14:16:15'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="/css/universe.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/reference/"><i class="fa-fw fas fa-list"></i><span> 备忘清单</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/sponsor/"><i class="fa-fw fas fa-money-check-alt"></i><span> 赞助墙</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header" style="background-image: url('/img/home.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="毅栈"><img class="site-icon" src="/img/logo.png"/><span class="site-name">毅栈</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/reference/"><i class="fa-fw fas fa-list"></i><span> 备忘清单</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/sponsor/"><i class="fa-fw fas fa-money-check-alt"></i><span> 赞助墙</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="page-site-info"><h1 id="site-title">Ruby 备忘清单</h1></div></header><main class="layout" id="content-inner"><div id="page"><div id="article-container"><h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><!--rehype:wrap-class=row-span-4-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Debian, Ubuntu</span></span><br><span class="line">$ <span class="built_in">sudo</span> apt-get install ruby-full</span><br><span class="line"><span class="comment"># Windows</span></span><br><span class="line">$ winget install RubyInstallerTeam.Ruby </span><br><span class="line">$ brew install ruby <span class="comment"># macOS</span></span><br><span class="line">$ docker run -it --<span class="built_in">rm</span> ruby:latest <span class="comment"># Docker</span></span><br><span class="line">$ docker run -it --<span class="built_in">rm</span> ruby:2.7</span><br></pre></td></tr></table></figure>

<p>使用包管理器安装 <a target="_blank" rel="noopener" href="https://github.com/rbenv/rbenv#readme">rbenv</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install rbenv ruby-build <span class="comment"># macOS</span></span><br><span class="line"><span class="comment"># Debian、ubuntu 和其他衍生产品</span></span><br><span class="line">$ <span class="built_in">sudo</span> apt install rbenv</span><br></pre></td></tr></table></figure>

<p>使用 <a target="_blank" rel="noopener" href="https://github.com/rbenv/rbenv#readme">rbenv</a> 安装 ruby</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 列出最新的稳定版本</span></span><br><span class="line">$ rbenv install -l</span><br><span class="line"><span class="comment"># 列出所有本地版本</span></span><br><span class="line">$ rbenv install -L</span><br><span class="line"><span class="comment"># 安装 Ruby 版本</span></span><br><span class="line">$ rbenv install 3.1.2</span><br><span class="line">$ rbenv global 3.1.2 <span class="comment"># 为这台机器设置默认Ruby版本</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">$ rbenv <span class="built_in">local</span> 3.1.2 <span class="comment"># 设置此目录的 Ruby 版本</span></span><br><span class="line">$ rbenv <span class="built_in">local</span> --<span class="built_in">unset</span></span><br><span class="line">$ rbenv version <span class="comment"># 显示当前活动的 Ruby 版本</span></span><br><span class="line">=&gt; 1.9.3-p327 (<span class="built_in">set</span> by /Users/sam/.rbenv/version)</span><br></pre></td></tr></table></figure>

<p>使用 <a target="_blank" rel="noopener" href="https://www.ruby-lang.org/en/documentation/installation/#rvm">RVM</a> 安装 ruby</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -sSL https://get.rvm.io | bash -s stable</span><br><span class="line">$ rvm list          <span class="comment"># Ruby 版本列表</span></span><br><span class="line">$ rvm install 3.0.1 <span class="comment"># 安装 3.0.1</span></span><br><span class="line">$ rvm use 3.0.1     <span class="comment"># 使用 3.0.1</span></span><br></pre></td></tr></table></figure>

<p>如何安装 ruby gem 管理器, <a target="_blank" rel="noopener" href="https://bundler.io/">bundler</a> gem</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 访问 bash 以执行以下命令</span></span><br><span class="line">$ docker run -it --<span class="built_in">rm</span> ruby:latest bash</span><br><span class="line">$ gem install bundler</span><br><span class="line">$ bundle -v</span><br><span class="line">$ gem update bundler</span><br><span class="line">$ gem uninstall bundler</span><br></pre></td></tr></table></figure>

<h3 id="什么是-Gemfile-和-Gemfile-lock"><a href="#什么是-Gemfile-和-Gemfile-lock" class="headerlink" title="什么是 Gemfile 和 Gemfile.lock"></a>什么是 Gemfile 和 Gemfile.lock</h3><!--rehype:wrap-class=row-span-2-->

<p><a target="_blank" rel="noopener" href="https://bundler.io/v2.3/man/gemfile.5.html">Gemfile</a> 是 Bundler(也是 gem)的配置文件，其中包含项目的 gem 列表(依赖项)</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在项目根目录的 Gemfile 中指定 gem</span></span><br><span class="line">ruby <span class="string">&#x27;2.5.6&#x27;</span></span><br><span class="line"></span><br><span class="line">source <span class="string">&#x27;https://rubygems.org&#x27;</span></span><br><span class="line">gem <span class="string">&#x27;nokogiri&#x27;</span></span><br><span class="line">gem <span class="string">&#x27;rack&#x27;</span>, <span class="string">&#x27;~&gt;1.1&#x27;</span></span><br><span class="line">gem <span class="string">&#x27;rspec&#x27;</span>, <span class="symbol">:require</span> =&gt; <span class="string">&#x27;spec&#x27;</span></span><br></pre></td></tr></table></figure>

<p>安装 Gemfile 中的所有 gem</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ bundle install</span><br></pre></td></tr></table></figure>

<p>解决开发用 mac，生产用 linux 出现的 Gemfile.lock 不一致问题</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bundle lock --add-platform x86_64-linux</span><br></pre></td></tr></table></figure>

<h3 id="安装特定-ruby-gem-的特定版本"><a href="#安装特定-ruby-gem-的特定版本" class="headerlink" title="安装特定 ruby gem 的特定版本"></a>安装特定 ruby gem 的特定版本</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ gem install bundler -v 1.17</span><br><span class="line">$ gem install minitest -v 5.8.4</span><br></pre></td></tr></table></figure>

<h3 id="使用-Bundler-更新-gem"><a href="#使用-Bundler-更新-gem" class="headerlink" title="使用 Bundler 更新 gem"></a>使用 Bundler 更新 gem</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用 Bundler 更新单个 gem</span></span><br><span class="line">$ bundle update nokogiri</span><br><span class="line"><span class="comment"># 使用 Bundler 更新 Gemfile 中的每个 gem</span></span><br><span class="line">$ bundle update</span><br></pre></td></tr></table></figure>

<h3 id="保留字"><a href="#保留字" class="headerlink" title="保留字"></a>保留字</h3><!--rehype:wrap-class=row-span-5-->

<table>
<thead>
<tr>
<th align="left">保留字</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>__ENCODING__</code></td>
<td>当前文件的脚本编码</td>
</tr>
<tr>
<td align="left"><code>__LINE__</code></td>
<td>当前文件中此关键字的行号</td>
</tr>
<tr>
<td align="left"><code>__FILE__</code></td>
<td>当前文件的路径</td>
</tr>
<tr>
<td align="left"><code>BEGIN</code></td>
<td>包含在 <code>&#123; &#125;</code> 中的代码在程序运行之前运行</td>
</tr>
<tr>
<td align="left"><code>END</code></td>
<td>包含在 <code>&#123; &#125;</code> 中以在程序结束时运行</td>
</tr>
<tr>
<td align="left"><code>alias</code></td>
<td>为现有方法、运算符、全局变量创建别名</td>
</tr>
<tr>
<td align="left"><code>and</code></td>
<td>逻辑与运算符</td>
</tr>
<tr>
<td align="left"><code>begin</code></td>
<td>开始一段代码</td>
</tr>
<tr>
<td align="left"><code>break</code></td>
<td>终止循环</td>
</tr>
<tr>
<td align="left"><code>case</code></td>
<td>将表达式与匹配的 <code>when</code> 子句进行比较，其中 <br/> 以 <code>end</code> 结束</td>
</tr>
<tr>
<td align="left"><code>class</code></td>
<td>定义一个类</td>
</tr>
<tr>
<td align="left"><code>def</code></td>
<td>定义函数&#x2F;方法</td>
</tr>
<tr>
<td align="left"><code>defined?</code></td>
<td>检查某个变量、函数是否存在</td>
</tr>
<tr>
<td align="left"><code>do</code></td>
<td>开始一个代码块并执行块中的代码，以<br/> <strong>end关键字</strong>结束</td>
</tr>
<tr>
<td align="left"><code>else</code></td>
<td>如果先前的条件不成立，则执行以下代码</td>
</tr>
<tr>
<td align="left"><code>elsif</code></td>
<td>if 表达式的替代条件</td>
</tr>
<tr>
<td align="left"><code>end</code></td>
<td>用于结束以 <code>begin</code>、<code>class</code>、<code>def</code>、<code>do</code>、<code>if</code> 等关键字开头的代码块</td>
</tr>
<tr>
<td align="left"><code>ensure</code></td>
<td>总是在块终止时执行</td>
</tr>
<tr>
<td align="left"><code>false</code></td>
<td>逻辑布尔假值</td>
</tr>
<tr>
<td align="left"><code>for</code></td>
<td>开始一个 <code>for</code> 循环</td>
</tr>
<tr>
<td align="left"><code>if</code></td>
<td>如果 <code>if</code> 的条件语句为 <code>true</code>，则执行代码块</td>
</tr>
<tr>
<td align="left"><code>in</code></td>
<td>与 <code>for</code> 循环一起使用</td>
</tr>
<tr>
<td align="left"><code>module</code></td>
<td>定义一个模块</td>
</tr>
<tr>
<td align="left"><code>next</code></td>
<td>跳转到循环条件评估之前的点</td>
</tr>
<tr>
<td align="left"><code>nil</code></td>
<td>为空或无效或始终为假</td>
</tr>
<tr>
<td align="left"><code>not</code></td>
<td>逻辑否定运算符</td>
</tr>
<tr>
<td align="left"><code>or</code></td>
<td>逻辑或运算符</td>
</tr>
<tr>
<td align="left"><code>redo</code></td>
<td>条件循环后跳转</td>
</tr>
<tr>
<td align="left"><code>rescue</code></td>
<td>在引发异常后评估表达式</td>
</tr>
<tr>
<td align="left"><code>retry</code></td>
<td>• 在救援之外调用时，重复方法调用<br/>• 在救援内部调用时，跳转到块顶部</td>
</tr>
<tr>
<td align="left"><code>return</code></td>
<td>从方法或代码块返回值</td>
</tr>
<tr>
<td align="left"><code>self</code></td>
<td>当前对象</td>
</tr>
<tr>
<td align="left"><code>super</code></td>
<td>调用超类中的同名方法</td>
</tr>
<tr>
<td align="left"><code>then</code></td>
<td>与 <code>if</code>、<code>unless</code>、<code>when</code>、<code>case</code>、<code>rescue</code> 一起使用的分隔符</td>
</tr>
<tr>
<td align="left"><code>true</code></td>
<td>逻辑布尔真</td>
</tr>
<tr>
<td align="left"><code>undef</code></td>
<td>使当前类中的方法&#x2F;函数未定义</td>
</tr>
<tr>
<td align="left"><code>until</code></td>
<td>在条件语句为假时执行代码块</td>
</tr>
<tr>
<td align="left"><code>when</code></td>
<td>在 case 语句下开始一个子句</td>
</tr>
<tr>
<td align="left"><code>while</code></td>
<td>执行代码块，直到条件语句变为假</td>
</tr>
<tr>
<td align="left"><code>yield</code></td>
<td>执行传递给方法的代码块</td>
</tr>
</tbody></table>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 单行注释</span></span><br><span class="line"><span class="comment">=begin</span></span><br><span class="line"><span class="comment">多行</span></span><br><span class="line"><span class="comment">注释</span></span><br><span class="line"><span class="comment">=end</span></span><br><span class="line"><span class="comment">=begin 注释第 1 行 =end</span></span><br><span class="line"><span class="comment">puts &quot;Hello world!&quot;  # 代码的内联注释</span></span><br></pre></td></tr></table></figure>

<h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><!--rehype:wrap-class=row-span-7-->

<h4 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h4><ul>
<li><code>and</code></li>
<li><code>or</code></li>
<li><code>not</code></li>
<li><code>&amp;&amp;</code></li>
<li><code>||</code></li>
<li><code>!</code><!--rehype:className=cols-3 style-none--></li>
</ul>
<h4 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h4><ul>
<li><code>&amp;</code></li>
<li><code>|</code></li>
<li><code>^</code></li>
<li><code>~</code></li>
<li><code>&lt;&lt;</code></li>
<li><code>&gt;&gt;</code><!--rehype:className=cols-3 style-none--></li>
</ul>
<h4 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h4><ul>
<li><code>+</code></li>
<li><code>-</code></li>
<li><code>*</code></li>
<li><code>/</code></li>
<li><code>%</code></li>
<li><code>**</code><!--rehype:className=cols-3 style-none--></li>
</ul>
<h4 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h4><ul>
<li><code>==</code></li>
<li><code>!=</code></li>
<li><code>&gt;</code></li>
<li><code>&lt;</code></li>
<li><code>&gt;=</code></li>
<li><code>&lt;=</code></li>
<li><code>&lt;=&gt;</code></li>
<li><code>===</code></li>
<li><code>eql?</code></li>
<li><code>equal?</code><!--rehype:className=cols-3 style-none--></li>
</ul>
<h4 id="运算符示例"><a href="#运算符示例" class="headerlink" title="运算符示例"></a>运算符示例</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加</span></span><br><span class="line">1 + 1   <span class="comment">#=&gt; 2</span></span><br><span class="line"><span class="comment"># 减法</span></span><br><span class="line">2 - 1   <span class="comment">#=&gt; 1</span></span><br><span class="line"><span class="comment"># 乘法</span></span><br><span class="line">2 * 2   <span class="comment">#=&gt; 4</span></span><br><span class="line"><span class="comment"># 分配</span></span><br><span class="line">10 / 5  <span class="comment">#=&gt; 2</span></span><br><span class="line">17 / 5    <span class="comment">#=&gt; 3, not 3.4</span></span><br><span class="line">17 / 5.0  <span class="comment">#=&gt; 3.4</span></span><br><span class="line"><span class="comment"># 指数</span></span><br><span class="line">2 ** 2  <span class="comment">#=&gt; 4</span></span><br><span class="line">3 ** 4  <span class="comment">#=&gt; 81</span></span><br><span class="line"><span class="comment"># 模数(求除法的余数)</span></span><br><span class="line">8 % 2   <span class="comment">#=&gt; 0  (8 / 2 = 4; 没有剩余)</span></span><br><span class="line">10 % 4  <span class="comment">#=&gt; 2  (10 / 4 = 2 余数为 2)</span></span><br><span class="line">a = 10</span><br><span class="line">b = 20</span><br><span class="line">a == b <span class="comment">#=&gt; false</span></span><br><span class="line">a != b <span class="comment">#=&gt; true</span></span><br><span class="line">a &gt; b <span class="comment">#=&gt; false</span></span><br><span class="line">a &lt; b <span class="comment">#=&gt; true</span></span><br><span class="line">a &gt;= b <span class="comment">#=&gt; false</span></span><br><span class="line">a &lt;= b <span class="comment">#=&gt; true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 比较运算符</span></span><br><span class="line">a &lt;=&gt; b <span class="comment">#=&gt; -1</span></span><br><span class="line">c = 20</span><br><span class="line">c &lt;=&gt; b <span class="comment">#=&gt; 0</span></span><br><span class="line">c &lt;=&gt; a  <span class="comment">#=&gt; 1</span></span><br><span class="line"><span class="comment"># 用于测试 case 语句的 when 子句中的相等性</span></span><br><span class="line">(1...10) === 5 <span class="comment">#=&gt; true</span></span><br><span class="line"><span class="comment"># 如果接收者和参数具有相同的类型和相等的值，则为真</span></span><br><span class="line">1.eql?(1.0) <span class="comment">#=&gt; false</span></span><br><span class="line">c = a + b  <span class="comment">#=&gt; 30</span></span><br><span class="line">c += a <span class="comment">#=&gt; 40</span></span><br><span class="line">c -= a <span class="comment">#=&gt; 30</span></span><br><span class="line">c *= a <span class="comment">#=&gt; 300</span></span><br><span class="line">c /= a <span class="comment">#=&gt; 30</span></span><br><span class="line">c %= a <span class="comment">#=&gt; 3</span></span><br><span class="line">c **= a <span class="comment">#=&gt; 59049</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Ruby 并行赋值</span></span><br><span class="line">a = 10</span><br><span class="line">b = 20</span><br><span class="line">c = 30</span><br><span class="line">a, b, c = 10, 20, 30</span><br><span class="line"><span class="comment"># Ruby 位运算符</span></span><br><span class="line">a = 60</span><br><span class="line">b = 13</span><br><span class="line"><span class="comment"># &amp; 如果两个操作数中都存在，则二进制 AND 运算符将位复制到结果中。</span></span><br><span class="line">a &amp; b <span class="comment">#=&gt; 12</span></span><br><span class="line"><span class="comment"># | 如果二进制或运算符存在于任一操作数中，则复制一个位。</span></span><br><span class="line">a | b <span class="comment">#=&gt; 61</span></span><br><span class="line"><span class="comment"># ^ 二元异或操作符如果在一个操作数中设置，则复制该位，但不能同时在两个操作数中设置。</span></span><br><span class="line">a ^ b <span class="comment">#=&gt; 49</span></span><br><span class="line"><span class="comment"># ~ 二进制补码运算符是一元的，具有“翻转”位的效果。</span></span><br><span class="line">~a</span><br><span class="line"><span class="comment"># &lt;&lt; 二进制左移运算符。 左操作数的值被移动</span></span><br><span class="line"><span class="comment"># 左操作数指定的位数。</span></span><br><span class="line">a &lt;&lt; <span class="string">2</span></span><br><span class="line"><span class="string"># &gt;&gt; 二进制右移运算符。 左操作数的值被移动</span></span><br><span class="line"><span class="string"># 右操作数指定的位数。</span></span><br><span class="line"><span class="string">a &gt;&gt; 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Ruby 逻辑运算符</span></span><br><span class="line">a and b <span class="comment">#=&gt; true.</span></span><br><span class="line">a or b <span class="comment">#=&gt; true.</span></span><br><span class="line">a &amp;&amp; b <span class="comment">#=&gt; true.</span></span><br><span class="line">(a || b) <span class="comment">#=&gt; true.</span></span><br><span class="line">!(a &amp;&amp; b) <span class="comment">#=&gt; false.</span></span><br><span class="line">not(a &amp;&amp; b) <span class="comment">#=&gt; false.</span></span><br><span class="line"><span class="comment"># Ruby 三元运算符</span></span><br><span class="line"><span class="comment"># ? :</span></span><br><span class="line"><span class="comment"># 如果条件为真？ 然后值 X ：否则值 Y</span></span><br><span class="line">a == 10 ? puts <span class="string">&#x27;Right&#x27;</span> : puts <span class="string">&#x27;Wrong&#x27;</span></span><br><span class="line"><span class="comment"># Ruby 范围运算符</span></span><br><span class="line"><span class="comment"># .. 创建从起点到终点的范围(含)</span></span><br><span class="line">1..10 <span class="comment">#=&gt; 创建从 1 到 10 的范围(包括 1 到 10)</span></span><br><span class="line"><span class="comment"># ... 创建一个从起点到终点的范围，不包括在内</span></span><br><span class="line">1...10 <span class="comment">#=&gt; 创建一个从 1 到 10 的独占范围</span></span><br></pre></td></tr></table></figure>

<h3 id="运算符优先级表"><a href="#运算符优先级表" class="headerlink" title="运算符优先级表"></a>运算符优先级表</h3><!--rehype:wrap-class=row-span-3-->

<ul>
<li><code>!</code>, <code>~</code>, <code>unary +</code></li>
<li><code>**</code></li>
<li><code>unary -</code></li>
<li><code>*</code>, <code>/</code>, <code>%</code></li>
<li><code>+</code>, <code>-</code></li>
<li><code>&lt;&lt;</code>, <code>&gt;&gt;</code></li>
<li><code>&amp;</code></li>
<li><code>^</code></li>
<li><code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code></li>
<li><code>&lt;=&gt;</code>, <code>==</code>, <code>===</code>, <code>!=</code>, <code>=~</code>, <code>!~</code></li>
<li><code>&amp;&amp;</code></li>
<li><code>?</code>, <code>:</code></li>
<li><code>modifier-rescue</code></li>
<li><code>=</code>, <code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code>, <code>%=</code></li>
<li><code>defined</code></li>
<li><code>not</code></li>
<li><code>or</code>, <code>and</code></li>
<li><code>modifier-if</code>, <code>modifier-unless</code>, <code>modifier-while</code>, <code>modifier-until</code></li>
<li><code>&#123; &#125;</code> 块</li>
<li><code>do ... end</code> 块<!--rehype:className=style-timeline--></li>
</ul>
<h3 id="变量和范围"><a href="#变量和范围" class="headerlink" title="变量和范围"></a>变量和范围</h3><!--rehype:wrap-class=col-span-2-->

<table>
<thead>
<tr>
<th align="left">名字</th>
<th>范围</th>
<th>示例</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>[a-z]</code> 或 <code>_</code></td>
<td>本地的</td>
<td><code>count = 10</code> 或 <code>_count = 10</code></td>
<td>必须初始化局部变量</td>
</tr>
<tr>
<td align="left"><code>@</code></td>
<td>实例变量</td>
<td><code>@id = []</code></td>
<td>实例变量在初始化之前具有“nil”值</td>
</tr>
<tr>
<td align="left"><code>@@</code></td>
<td>类变量</td>
<td><code>@@name = []</code></td>
<td>必须初始化类变量</td>
</tr>
<tr>
<td align="left"><code>$</code></td>
<td>全局变量</td>
<td><code>$version = &quot;0.8.9&quot;</code></td>
<td>全局变量在初始化之前具有“nil”值</td>
</tr>
<tr>
<td align="left"><code>[A-Z]</code></td>
<td>持续的</td>
<td><code>PI = 3.14</code></td>
<td>常量变量必须初始化，您可以更改常量，但您会收到警告</td>
</tr>
</tbody></table>
<p>有五种不同类型的变量。第一个字符确定范围</p>
<h3 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">current_weather = <span class="string">&quot;rainy&quot;</span></span><br><span class="line">_weather = <span class="string">&quot;sunny&quot;</span></span><br></pre></td></tr></table></figure>

<p>必须以下划线或小写字母开头</p>
<h3 id="实例变量"><a href="#实例变量" class="headerlink" title="实例变量"></a>实例变量</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 实例类变量</span></span><br><span class="line"><span class="variable">@current_weather</span> = <span class="string">&quot;rainy&quot;</span></span><br><span class="line"><span class="comment"># 全局变量</span></span><br><span class="line"><span class="variable">$current_weather</span> = <span class="string">&quot;rainy&quot;</span></span><br><span class="line"><span class="comment"># 常量变量</span></span><br><span class="line"><span class="variable constant_">WEATHER</span> = <span class="string">&quot;rainy&quot;</span>.freeze</span><br></pre></td></tr></table></figure>

<h3 id="伪变量"><a href="#伪变量" class="headerlink" title="伪变量"></a>伪变量</h3><table>
<thead>
<tr>
<th align="left">名字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>self</code></td>
<td>当前方法的接收者对象</td>
</tr>
<tr>
<td align="left"><code>true</code></td>
<td><code>TrueClass</code> 的实例</td>
</tr>
<tr>
<td align="left"><code>false</code></td>
<td><code>FalseClass</code> 的实例</td>
</tr>
<tr>
<td align="left"><code>nil</code></td>
<td><code>NilClass</code> 的实例</td>
</tr>
<tr>
<td align="left"><code>__FILE__</code></td>
<td>当前源文件名</td>
</tr>
<tr>
<td align="left"><code>__LINE__</code></td>
<td>当前源文件的当前行号</td>
</tr>
</tbody></table>
<h3 id="选项变量"><a href="#选项变量" class="headerlink" title="选项变量"></a>选项变量</h3><table>
<thead>
<tr>
<th align="left">名字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>$-0</code></td>
<td><code>$/</code> 的别名</td>
</tr>
<tr>
<td align="left"><code>$-a</code></td>
<td>如果设置了选项 <code>-a</code>，则为真。只读变量</td>
</tr>
<tr>
<td align="left"><code>$-d</code></td>
<td><code>$DEBUG</code> 的别名</td>
</tr>
<tr>
<td align="left"><code>$-F</code></td>
<td><code>$;</code> 的别名</td>
</tr>
<tr>
<td align="left"><code>$-i</code></td>
<td>在就地编辑模式下，此变量保存扩展，否则为零<br/>可以指定启用（或禁用）就地编辑模式</td>
</tr>
<tr>
<td align="left"><code>$-I</code></td>
<td><code>$:</code> 的别名</td>
</tr>
<tr>
<td align="left"><code>$-l</code></td>
<td>如果选项 <code>-lis</code> 设置为真。只读变量</td>
</tr>
<tr>
<td align="left"><code>$-p</code></td>
<td>如果选项 <code>-pi</code> 设置为真。只读变量</td>
</tr>
<tr>
<td align="left"><code>$-v</code></td>
<td><code>$VERBOSE</code> 的别名</td>
</tr>
</tbody></table>
<h3 id="预定义变量"><a href="#预定义变量" class="headerlink" title="预定义变量"></a>预定义变量</h3><!--rehype:wrap-class=col-span-3-->

<table>
<thead>
<tr>
<th align="left">名字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>$!</code></td>
<td>异常信息消息。raise 设置此变量</td>
</tr>
<tr>
<td align="left"><code>$@</code></td>
<td>最后一个异常的回溯，它是 String 的数组，指示调用方法的位置。格式中的元素如：“filename:line”或“filename:line:in `methodname’”(助记符：发生异常的地方)</td>
</tr>
<tr>
<td align="left"><code>$&amp;</code></td>
<td>与此范围内最后一次成功的模式匹配匹配的字符串，如果最后一次模式匹配失败，则返回 nil。 (助记符：在某些编辑器中类似于 &amp;)这个变量是只读的</td>
</tr>
<tr>
<td align="left"><code>$`</code></td>
<td>当前范围内最后一次成功的模式匹配所匹配的任何内容之前的字符串，如果最后一次模式匹配失败，则为 nil。 (助记符：` 通常在带引号的字符串之前)此变量是只读的</td>
</tr>
<tr>
<td align="left"><code>$&#39;</code></td>
<td>当前范围内最后一次成功的模式匹配所匹配的字符串后面的字符串，如果最后一次模式匹配失败，则为 nil。 (助记符：’ 通常跟在带引号的字符串之后)</td>
</tr>
<tr>
<td align="left"><code>$+</code></td>
<td>最后一个成功的搜索模式匹配的最后一个括号，如果最后一个模式匹配失败，则为 nil。如果您不知道一组替代模式中的哪一个匹配，这很有用。 (助记：积极向上)</td>
</tr>
<tr>
<td align="left"><code>$1</code>, <code>$2...</code></td>
<td>包含上一次成功匹配的模式中相应括号集中的子模式，不计算已经退出的嵌套块中匹配的模式，或者如果最后一次模式匹配失败，则为 nil。 (助记符：如 \digit)这些变量都是只读的</td>
</tr>
<tr>
<td align="left"><code>$~</code></td>
<td>当前范围内最后一个匹配的信息。设置此变量会影响匹配变量，如 <code>$&amp;、$+、$1、$2..</code> 等。第 n 个子表达式可以通过 <code>$~[nth]</code> 检索。 (助记符：<code>~</code> 用于匹配)这个变量是局部作用域的</td>
</tr>
<tr>
<td align="left"><code>$=</code></td>
<td>不区分大小写的标志，默认为 nil。 (助记符：&#x3D; 用于比较)</td>
</tr>
<tr>
<td align="left"><code>$/</code></td>
<td>输入记录分隔符，默认为换行符。像 awk 的 RS 变量一样工作。如果设置为 nil，则将立即读取整个文件。 (助记符：&#x2F; 用于在引用诗歌时划定行界)</td>
</tr>
<tr>
<td align="left"><code>$\</code></td>
<td>print 和 IO#write 的输出记录分隔符。默认值为无。 (助记符：它就像 &#x2F;，但它是你从 Ruby 中“返回”的东西)</td>
</tr>
<tr>
<td align="left"><code>$,</code></td>
<td>打印的输出字段分隔符。此外，它是 Array#join 的默认分隔符。 (助记符：当您的打印语句中有 , 时打印的内容)</td>
</tr>
<tr>
<td align="left"><code>$;</code></td>
<td>String#split 的默认分隔符。</td>
</tr>
<tr>
<td align="left"><code>$.</code></td>
<td>读取的最后一个文件的当前输入行号。</td>
</tr>
<tr>
<td align="left"><code>$&lt;</code></td>
<td>由命令行参数或标准输入给出的文件的虚拟连接文件(如果没有提供参数文件)。 <code>$&lt;.file</code> 返回当前文件名。 (助记符：<code>$&lt;</code> 是一个 shell 输入源)</td>
</tr>
<tr>
<td align="left"><code>$&gt;</code></td>
<td><code>print</code> 的默认输出，<code>printf</code>。 <code>$stdout</code> 默认情况下。 (助记符：<code>$&gt;</code> 用于 shell 输出)</td>
</tr>
<tr>
<td align="left"><code>$_</code></td>
<td>通过gets或readline输入String的最后一行。如果gets&#x2F;readline 遇到EOF，它被设置为nil。这个变量是局部作用域的。 (助记符：部分与 Perl 相同)</td>
</tr>
<tr>
<td align="left"><code>$0</code></td>
<td>包含包含正在执行的 Ruby 脚本的文件的名称。在某些操作系统上，分配给 $0 会修改 ps(1) 程序看到的参数区域。作为一种指示当前程序状态的方式，这比隐藏您正在运行的程序更有用。 (助记符：与 sh 和 ksh 相同)</td>
</tr>
<tr>
<td align="left"><code>$*</code></td>
<td>为脚本提供的命令行参数。 Ruby 解释器的选项已被删除。 (助记符：与 sh 和 ksh 相同)</td>
</tr>
<tr>
<td align="left"><code>$$</code></td>
<td>运行此脚本的 Ruby 的进程号。(助记符：与贝壳相同)</td>
</tr>
<tr>
<td align="left"><code>$?</code></td>
<td>最后执行的子进程的状态。</td>
</tr>
<tr>
<td align="left"><code>$:</code></td>
<td>该数组包含通过 load 或 require 查找 Ruby 脚本和二进制模块的位置列表。 它最初由任何 <code>-I</code> 命令行开关的参数组成，然后是默认的 Ruby 库，probabl <code>&quot;/usr/local/lib/ruby&quot;</code>，然后是 <code>&quot;.&quot;</code>，表示当前目录 . (助记符：冒号是 PATH 环境变量的分隔符)</td>
</tr>
<tr>
<td align="left"><code>$&quot;</code></td>
<td>该数组包含由 require 加载的模块名称。 用于防止 require 两次加载模块。助记符：防止文件被双引号(加载)</td>
</tr>
<tr>
<td align="left"><code>$DEBUG</code></td>
<td><code>-d</code> 开关的状态。</td>
</tr>
<tr>
<td align="left"><code>$FILENAME</code></td>
<td>与<code>$&lt;.filename</code> 相同</td>
</tr>
<tr>
<td align="left"><code>$LOAD_PATH</code></td>
<td><code>$:</code> 的别名</td>
</tr>
<tr>
<td align="left"><code>$stdin</code></td>
<td>当前的标准输入</td>
</tr>
<tr>
<td align="left"><code>$stdout</code></td>
<td>当前的标准输出</td>
</tr>
<tr>
<td align="left"><code>$stderr</code></td>
<td>当前标准错误输出</td>
</tr>
<tr>
<td align="left"><code>$VERBOSE</code></td>
<td>详细标志，由 <code>-v</code> 开关设置到 Ruby 解释器</td>
</tr>
</tbody></table>
<h3 id="预定义的全局常量"><a href="#预定义的全局常量" class="headerlink" title="预定义的全局常量"></a>预定义的全局常量</h3><!--rehype:wrap-class=col-span-2-->

<table>
<thead>
<tr>
<th align="left">名字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>TRUE</code></td>
<td>典型的真值。在 Ruby 中，所有非 <code>false</code> 值（除了 <code>nil</code> 和 <code>false</code> 之外的所有值）都是 <code>true</code></td>
</tr>
<tr>
<td align="left"><code>FALSE</code></td>
<td>虚假本身</td>
</tr>
<tr>
<td align="left"><code>NIL</code></td>
<td>零本身</td>
</tr>
<tr>
<td align="left"><code>STDIN</code></td>
<td>标准输入。<code>$stdin</code> 默认值</td>
</tr>
<tr>
<td align="left"><code>STDOUT</code></td>
<td>标准输出。<code>$stdout</code> 默认值</td>
</tr>
<tr>
<td align="left"><code>STDERR</code></td>
<td>标准错误输出。<code>$stderr</code> 默认值</td>
</tr>
<tr>
<td align="left"><code>ENV</code></td>
<td>类哈希对象包含当前环境变量。 在 ENV 中设置值会更改子进程的环境</td>
</tr>
<tr>
<td align="left"><code>ARGF</code></td>
<td><code>$&lt;</code> 的别名</td>
</tr>
<tr>
<td align="left"><code>ARGV</code></td>
<td><code>$*</code> 的别名</td>
</tr>
<tr>
<td align="left"><code>DATA</code></td>
<td>脚本的文件对象，就在 <strong>END</strong> 之后。 除非未从文件中读取脚本，否则未定义</td>
</tr>
<tr>
<td align="left"><code>VERSION</code></td>
<td>Ruby 版本字符串</td>
</tr>
<tr>
<td align="left"><code>RUBY_RELEASE_DATE</code></td>
<td>发布日期字符串</td>
</tr>
<tr>
<td align="left"><code>RUBY_PLATFORM</code></td>
<td>平台标识符</td>
</tr>
</tbody></table>
<h3 id="检查变量的范围"><a href="#检查变量的范围" class="headerlink" title="检查变量的范围"></a>检查变量的范围</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">defined</span>? count</span><br><span class="line"><span class="string">&quot;local-variable&quot;</span></span><br><span class="line"><span class="keyword">defined</span>? <span class="variable">@id</span></span><br><span class="line"><span class="string">&quot;instance-variable&quot;</span></span><br><span class="line"><span class="keyword">defined</span>? <span class="variable">@@name</span></span><br><span class="line"><span class="string">&quot;class variable&quot;</span></span><br><span class="line"><span class="keyword">defined</span>? <span class="variable">$version</span></span><br><span class="line"><span class="string">&quot;global-variable&quot;</span></span><br><span class="line"><span class="keyword">defined</span>? <span class="variable constant_">PI</span></span><br><span class="line"><span class="string">&quot;constant&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><!--rehype:wrap-class=col-span-2 row-span-3-->

<table>
<thead>
<tr>
<th align="left">类型</th>
<th>示例</th>
<th>Class</th>
<th>文档</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>Integer</code></td>
<td>a &#x3D; 17</td>
<td>a.class &gt; Integer <br>a.class.superclass &gt; Numeric</td>
<td><a target="_blank" rel="noopener" href="https://ruby-doc.org/core-3.1.2/Integer.html">#</a></td>
</tr>
<tr>
<td align="left"><code>Float</code></td>
<td>a &#x3D; 87.23</td>
<td>a.class &gt; Float <br>a.class.superclass &gt; Numeric</td>
<td><a target="_blank" rel="noopener" href="https://ruby-doc.org/core-3.1.2/Float.html">#</a></td>
</tr>
<tr>
<td align="left"><code>String</code></td>
<td>a &#x3D; “Hello universe”</td>
<td>a.class &gt; String</td>
<td><a target="_blank" rel="noopener" href="https://ruby-doc.org/core-3.1.2/String.html">#</a></td>
</tr>
<tr>
<td align="left"><code>Array</code></td>
<td>a &#x3D; [12, 34]</td>
<td>a.class &gt; Array</td>
<td><a target="_blank" rel="noopener" href="https://ruby-doc.org/core-3.1.2/Array.html">#</a></td>
</tr>
<tr>
<td align="left"><code>Hash</code></td>
<td>a &#x3D; {type: “tea”, count: 10}</td>
<td>a.class &gt; Hash</td>
<td><a target="_blank" rel="noopener" href="https://ruby-doc.org/core-3.1.2/Hash.html">#</a></td>
</tr>
<tr>
<td align="left"><code>Boolean</code></td>
<td>a &#x3D; false<br>a &#x3D; true</td>
<td>a.class &gt; FalseClass <br>a.class &gt; TrueClass</td>
<td><a target="_blank" rel="noopener" href="https://ruby-doc.org/core-3.1.2/TrueClass.html">TrueClass</a> <a target="_blank" rel="noopener" href="https://ruby-doc.org/core-3.1.2/FalseClass.html">FalseClass</a></td>
</tr>
<tr>
<td align="left"><code>Symbol</code></td>
<td>a &#x3D; :status</td>
<td>a.class &gt; Symbol</td>
<td><a target="_blank" rel="noopener" href="https://ruby-doc.org/core-3.1.2/Symbol.html">#</a></td>
</tr>
<tr>
<td align="left"><code>Range</code></td>
<td>a &#x3D; 1..3</td>
<td>a.class &gt; Range</td>
<td><a target="_blank" rel="noopener" href="https://ruby-doc.org/core-3.1.2/Range.html">#</a></td>
</tr>
<tr>
<td align="left"><code>Nil</code></td>
<td>a &#x3D; nil</td>
<td>a.class &gt; NilClass</td>
<td><a target="_blank" rel="noopener" href="https://ruby-doc.org/core-3.1.2/NilClass.html">#</a></td>
</tr>
</tbody></table>
<!--rehype:className=show-header-->

<p><a target="_blank" rel="noopener" href="https://www.digitalocean.com/community/tutorials/understanding-data-types-in-ruby">进一步阅读</a></p>
<h3 id="检查数据类型"><a href="#检查数据类型" class="headerlink" title="检查数据类型"></a>检查数据类型</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 两者都是同义词</span></span><br><span class="line">a = <span class="number">37</span></span><br><span class="line">a.kind_of? <span class="title class_">Integer</span></span><br><span class="line"><span class="comment"># true</span></span><br><span class="line">a.is_a? <span class="title class_">Integer</span></span><br><span class="line"><span class="comment"># true</span></span><br></pre></td></tr></table></figure>

<h3 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">week_days = &#123;<span class="symbol">sunday:</span> <span class="number">11</span>, <span class="symbol">monday:</span> <span class="number">222</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="整数有用的方法"><a href="#整数有用的方法" class="headerlink" title="整数有用的方法"></a>整数有用的方法</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="number">2</span>.even?</span><br><span class="line"><span class="comment"># true</span></span><br><span class="line"><span class="number">3</span>.even?</span><br><span class="line"><span class="comment"># false</span></span><br></pre></td></tr></table></figure>

<h3 id="范围"><a href="#范围" class="headerlink" title="范围"></a>范围</h3><p><code>..</code> 用于创建包含范围</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">range = <span class="number">1</span>..<span class="number">10</span></span><br><span class="line">range.to_a</span><br><span class="line"><span class="comment"># 输出 =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br></pre></td></tr></table></figure>

<p><code>...</code> 用于创建专属范围</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">range = <span class="number">1</span>...<span class="number">10</span></span><br><span class="line">range.to_a</span><br><span class="line"><span class="comment"># 输出 =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br></pre></td></tr></table></figure>

<p>一些有用的方法</p>
<table>
<thead>
<tr>
<th align="left">Method name</th>
<th>Output</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>cover?</code></td>
<td><code>(1..5).cover?(5)</code> &#x3D;&gt; <code>true</code></td>
</tr>
<tr>
<td align="left"><code>end</code></td>
<td><code>(&#39;a&#39;..&#39;z&#39;).end</code> &#x3D;&gt; <code>&quot;z&quot;</code></td>
</tr>
<tr>
<td align="left"><code>first</code></td>
<td><code>(1..5).first</code> &#x3D;&gt; <code>1</code></td>
</tr>
<tr>
<td align="left"><code>first(3)</code></td>
<td><code>(&#39;A&#39;..&#39;Z&#39;).first(2)</code> &#x3D;&gt; <code>[&quot;A&quot;, &quot;B&quot;]</code></td>
</tr>
<tr>
<td align="left"><code>eql?</code></td>
<td><code>((0..2).eql?(0..5)</code> &#x3D;&gt; <code>false</code></td>
</tr>
</tbody></table>
<h3 id="在-Range-中使用-step"><a href="#在-Range-中使用-step" class="headerlink" title="在 Range 中使用 step"></a>在 Range 中使用 step</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">(<span class="number">1</span>..<span class="number">20</span>).step(<span class="number">2</span>) &#123; |<span class="params">number</span>| puts <span class="string">&quot;<span class="subst">#&#123;number&#125;</span>&quot;</span>&#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 5</span></span><br><span class="line"><span class="comment"># 7</span></span><br><span class="line"><span class="comment"># 9</span></span><br><span class="line"><span class="comment"># 11</span></span><br><span class="line"><span class="comment"># 13</span></span><br><span class="line"><span class="comment"># 15</span></span><br><span class="line"><span class="comment"># 17</span></span><br><span class="line"><span class="comment"># 19</span></span><br></pre></td></tr></table></figure>

<h2 id="条件结构"><a href="#条件结构" class="headerlink" title="条件结构"></a>条件结构</h2><h3 id="if-修饰符"><a href="#if-修饰符" class="headerlink" title="if 修饰符"></a>if 修饰符</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">num = <span class="number">2</span></span><br><span class="line">puts <span class="string">&#x27;two&#x27;</span> <span class="keyword">if</span> num == <span class="number">2</span> </span><br></pre></td></tr></table></figure>

<p>如果条件为真，则执行代码</p>
<h3 id="if-elsif-else-语句"><a href="#if-elsif-else-语句" class="headerlink" title="if elsif else 语句"></a>if elsif else 语句</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">temp = <span class="number">19</span></span><br><span class="line"><span class="keyword">if</span> temp &gt;= <span class="number">25</span></span><br><span class="line">  puts <span class="string">&quot;hot&quot;</span></span><br><span class="line"><span class="keyword">elsif</span> temp &lt; <span class="number">25</span> &amp;&amp; temp &gt;= <span class="number">18</span></span><br><span class="line">  puts <span class="string">&quot;normal&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  puts <span class="string">&quot;cold&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># 输出 =&gt; normal</span></span><br></pre></td></tr></table></figure>

<h3 id="除非语句"><a href="#除非语句" class="headerlink" title="除非语句"></a>除非语句</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 除非与 if 相反，当语句为假时进行评估</span></span><br><span class="line">name = <span class="string">&quot;rob&quot;</span></span><br><span class="line"><span class="comment"># if name != &quot;bob&quot;</span></span><br><span class="line"><span class="keyword">unless</span> name == <span class="string">&quot;bob&quot;</span></span><br><span class="line">  puts <span class="string">&quot;hello stranger&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  puts <span class="string">&quot;hello bob&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># 输出 =&gt; hello stranger</span></span><br><span class="line">num = <span class="number">6</span></span><br><span class="line">puts <span class="string">&#x27;not two&#x27;</span> <span class="keyword">unless</span> num == <span class="number">2</span></span><br><span class="line"><span class="comment"># 输出 =&gt; not two</span></span><br></pre></td></tr></table></figure>

<h3 id="case-陈述"><a href="#case-陈述" class="headerlink" title="case 陈述"></a>case 陈述</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># case 返回最后执行的表达式的值</span></span><br><span class="line"><span class="keyword">case</span> input</span><br><span class="line"><span class="comment"># 检查一个整数，19</span></span><br><span class="line"><span class="keyword">when</span> <span class="number">19</span></span><br><span class="line">  puts <span class="string">&quot;It&#x27;s 19&quot;</span></span><br><span class="line">  <span class="comment"># 检查浮点数，33.3</span></span><br><span class="line"><span class="keyword">when</span> <span class="number">33.3</span></span><br><span class="line">  puts <span class="string">&quot;It&#x27;s 33.3&quot;</span></span><br><span class="line">  <span class="comment"># 检查一个确切的字符串，“Zaman”</span></span><br><span class="line"><span class="keyword">when</span> <span class="string">&quot;Zaman&quot;</span></span><br><span class="line">  puts <span class="string">&quot;Hi Zaman&quot;</span></span><br><span class="line"><span class="keyword">when</span> <span class="number">10</span></span><br><span class="line">  puts <span class="string">&quot;It&#x27;s 10&quot;</span></span><br><span class="line">  <span class="comment"># 检查范围</span></span><br><span class="line"><span class="keyword">when</span> <span class="number">7</span>..<span class="number">11</span></span><br><span class="line">  puts <span class="string">&quot;It&#x27;s between 7 and 11&quot;</span></span><br><span class="line">  <span class="comment"># 检查多个值，“咖啡”</span></span><br><span class="line"><span class="keyword">when</span> <span class="string">&quot;tea&quot;</span>, <span class="string">&quot;coffee&quot;</span></span><br><span class="line">  puts <span class="string">&quot;Happy days&quot;</span></span><br><span class="line">  <span class="comment"># 检查正则表达式“aA6”</span></span><br><span class="line"><span class="keyword">when</span> /^a[A-Z]+[<span class="number">0</span>-<span class="number">6</span>]+<span class="variable">$/</span></span><br><span class="line">  puts <span class="string">&quot;It&#x27;s a valid match&quot;</span></span><br><span class="line">  <span class="comment"># 通过与 String 类“任何字符串”</span></span><br><span class="line">  <span class="comment"># 进行比较来检查任何字符串</span></span><br><span class="line"><span class="keyword">when</span> <span class="title class_">String</span></span><br><span class="line">  puts <span class="string">&quot;It&#x27;s a String&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="case-简短的语法"><a href="#case-简短的语法" class="headerlink" title="case 简短的语法"></a>case 简短的语法</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> input</span><br><span class="line">  <span class="keyword">when</span> <span class="number">19</span> <span class="keyword">then</span> puts <span class="string">&quot;It&#x27;s 19&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="case-可选的失败"><a href="#case-可选的失败" class="headerlink" title="case 可选的失败"></a>case 可选的失败</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> input</span><br><span class="line">  <span class="keyword">when</span> <span class="number">19</span> <span class="keyword">then</span> puts <span class="string">&quot;It&#x27;s 19&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  puts <span class="string">&quot;It&#x27;s not 19&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="case-获取返回值"><a href="#case-获取返回值" class="headerlink" title="case 获取返回值"></a>case 获取返回值</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">marks = <span class="number">86</span></span><br><span class="line">result = <span class="keyword">case</span> marks</span><br><span class="line">        <span class="keyword">when</span> <span class="number">0</span>..<span class="number">49</span> <span class="keyword">then</span> <span class="string">&quot;Fail&quot;</span></span><br><span class="line">        <span class="keyword">when</span> <span class="number">50</span>..<span class="number">64</span> <span class="keyword">then</span> <span class="string">&quot;Pass&quot;</span></span><br><span class="line">        <span class="keyword">when</span> <span class="number">65</span>..<span class="number">74</span> <span class="keyword">then</span> <span class="string">&quot;Credit&quot;</span></span><br><span class="line">        <span class="keyword">when</span> <span class="number">75</span>..<span class="number">84</span> <span class="keyword">then</span> <span class="string">&quot;Distinction&quot;</span></span><br><span class="line">        <span class="keyword">when</span> <span class="number">85</span>..<span class="number">100</span> <span class="keyword">then</span> <span class="string">&quot;High Distinction&quot;</span></span><br><span class="line">        <span class="keyword">else</span> <span class="string">&quot;Invalid marks&quot;</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">puts result</span><br><span class="line"><span class="comment"># High Distinction</span></span><br></pre></td></tr></table></figure>

<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><h3 id="字符串插值"><a href="#字符串插值" class="headerlink" title="字符串插值"></a>字符串插值</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">name = <span class="string">&quot;World&quot;</span></span><br><span class="line">puts <span class="string">&quot;Hello <span class="subst">#&#123;name&#125;</span>&quot;</span></span><br><span class="line">puts <span class="string">&quot;The total is <span class="subst">#&#123;<span class="number">1</span>+<span class="number">1</span>&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># &quot;the total is 2&quot;</span></span><br></pre></td></tr></table></figure>

<p>字符串插值允许您将字符串组合在一起</p>
<h3 id="提取子字符串"><a href="#提取子字符串" class="headerlink" title="提取子字符串"></a>提取子字符串</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">string = <span class="string">&quot;abc123&quot;</span></span><br><span class="line">string[<span class="number">0</span>,<span class="number">3</span>]</span><br><span class="line"><span class="comment"># &quot;abc&quot;</span></span><br><span class="line">string[<span class="number">3</span>,<span class="number">3</span>]</span><br><span class="line"><span class="comment"># &quot;123&quot;</span></span><br><span class="line">string[<span class="number">0</span>..-<span class="number">2</span>]</span><br><span class="line"><span class="comment"># &quot;abc12&quot;</span></span><br><span class="line"><span class="comment">#remove or replace the substring</span></span><br><span class="line">string[<span class="number">0</span>..<span class="number">2</span>] = <span class="string">&quot;&quot;</span></span><br><span class="line">puts string</span><br><span class="line"><span class="comment"># &quot;123&quot;</span></span><br></pre></td></tr></table></figure>

<p>子字符串是字符串的一小部分，如果你只想要那个特定的部分，它会很有用，比如开头、中间或结尾</p>
<h3 id="将字符串转换为小写或大写"><a href="#将字符串转换为小写或大写" class="headerlink" title="将字符串转换为小写或大写"></a>将字符串转换为小写或大写</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;HELLO World&quot;</span>.downcase  <span class="comment"># &quot;hello world&quot;</span></span><br><span class="line"><span class="string">&quot;hello worlD&quot;</span>.upcase    <span class="comment"># &quot;HELLO WORLD&quot;</span></span><br><span class="line"><span class="string">&quot;hEllo wOrlD&quot;</span>.capitalize <span class="comment"># &quot;Hello world&quot;</span></span><br><span class="line"><span class="string">&quot;hEllo WOrlD&quot;</span>.swapcase  <span class="comment"># &quot;HeLLO woRLd&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="有用的方法"><a href="#有用的方法" class="headerlink" title="有用的方法"></a>有用的方法</h3><!--rehype:wrap-class=col-span-3-->

<table>
<thead>
<tr>
<th align="left">函数名称</th>
<th>Output</th>
<th>Note</th>
</tr>
</thead>
<tbody><tr>
<td align="left">length or size</td>
<td><code>&quot;HELLO World&quot;.length</code> &#x3D;&gt; <code>11</code> <br> <code>&quot;HELLO World&quot;.size</code> &#x3D;&gt; <code>11</code></td>
<td>返回字符串的长度</td>
</tr>
<tr>
<td align="left">reverse</td>
<td><code>&quot;hello worlD&quot;.reverse</code> &#x3D;&gt; <code>&quot;Dlrow olleh&quot;</code></td>
<td>返回反转的字符串</td>
</tr>
<tr>
<td align="left">include? other_str</td>
<td><code>&quot;hEllo wOrlD&quot;.include? &quot;w&quot;</code> &#x3D;&gt; <code>true</code></td>
<td>如果字符串或字符存在则返回 true，否则返回 false</td>
</tr>
<tr>
<td align="left">gsub(pattern, replacement)</td>
<td><code>&quot;hEllo wOrlD&quot;.gsub(&quot; &quot;, &quot;_&quot;)</code> &#x3D;&gt; <code>&quot;hEllo_wOrlD&quot;</code></td>
<td>gsub 或全局替换用提供的字符串替换一个或多个字符串</td>
</tr>
<tr>
<td align="left">gsub(pattern, hash)</td>
<td><code>&quot;organization&quot;.gsub(&quot;z&quot;, &#39;z&#39; =&gt; &#39;s&#39;)</code> &#x3D;&gt; <code>&quot;organisation&quot;</code></td>
<td>gsub 或全局替换用提供的哈希替换一个或多个字符串</td>
</tr>
<tr>
<td align="left">gsub(pattern) { |match| block}</td>
<td><code>&quot;Price of the phone is 1000 AUD&quot;.gsub(/\d+/) &#123; |s| &#39;$&#39;+s &#125;</code> <br> <code>&quot;Price of the phone is $1000 AUD&quot;</code></td>
<td>gsub 或全局替换用提供的块替换一个或多个字符串</td>
</tr>
<tr>
<td align="left">strip</td>
<td><code>&quot; hEllo WOrlD &quot;.strip</code> <br> <code>&quot;hEllo WOrlD&quot;</code></td>
<td>它将删除（修剪）以下任何前导和尾随字符：null（“\x00”）、水平制表符（“\t”）、换行符（\n）、垂直制表符（“\v”）、换页符(f)、回车(\r)、空格(“ “)</td>
</tr>
<tr>
<td align="left">prepend</td>
<td><code>a = &quot;world&quot; &lt;br&gt; a.prepend(&quot;hello &quot;)</code> <br> <code>&quot;hello world&quot;</code></td>
<td>在另一个字符串之前添加字符串</td>
</tr>
<tr>
<td align="left">insert</td>
<td><code>a = &quot;hello&quot; &lt;br&gt; a.insert(a.length, &quot; world&quot;)</code> <br> <code>&quot;hello world&quot;</code></td>
<td>在特定位置插入字符串</td>
</tr>
<tr>
<td align="left">start_with?</td>
<td><code>string = &quot;ruby programming&quot;</code> <br> <code>string.start_with? &quot;ruby&quot;</code> <br> <code>true</code></td>
<td>检查字符串是否以特定前缀开头</td>
</tr>
<tr>
<td align="left">end_with?</td>
<td><code>string = &quot;ruby programming&quot;</code> <br> <code>string.end_with? &quot;ruby&quot;</code> <br> <code>false</code></td>
<td>检查字符串是否以特定前缀结尾</td>
</tr>
<tr>
<td align="left">delete_suffix</td>
<td><code>string = &quot;sausage is expensive&quot;</code> <br> <code>string.delete_suffix(&quot; is expensive&quot;)</code> <br> <code>&quot;sausage&quot;</code></td>
<td>从字符串中删除后缀</td>
</tr>
<tr>
<td align="left">delete_prefix</td>
<td><code>string = &quot;sausage is expensive&quot;</code> <br> <code>string.delete_prefix(&quot;sausage&quot;)</code> <br> <code>&quot; is expensive&quot;</code></td>
<td>从字符串中删除前缀</td>
</tr>
<tr>
<td align="left">split</td>
<td><code>string = &quot;a b c d&quot; &lt;br&gt; string.split</code> <br> <code>[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]</code></td>
<td>将字符串转换为字符数组</td>
</tr>
<tr>
<td align="left">join</td>
<td><code>arr = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;] &lt;br&gt; arr.join</code>  &#x3D;&gt; <code>&quot;abc&quot;</code></td>
<td>将数组转换为字符串</td>
</tr>
<tr>
<td align="left">to_i</td>
<td><code>a = &quot;49&quot; &lt;br&gt; a.to_i</code> &#x3D;&gt; <code>49</code></td>
<td>将字符串转换为整数</td>
</tr>
<tr>
<td align="left">chop</td>
<td><code>&quot;abcd?&quot;.chop(&quot;?&quot;)</code> &#x3D;&gt; <code>&quot;abcd&quot;</code></td>
<td>从字符串中删除最后一个字符</td>
</tr>
<tr>
<td align="left">count</td>
<td><code>str = &quot;aaab&quot; &lt;br&gt; str.count(&quot;a&quot;)</code> <br> <code>3</code></td>
<td>计算字符串中的字符</td>
</tr>
<tr>
<td align="left">to_f</td>
<td><code>a = &quot;49&quot;</code> <br> <code>a.to_f</code> <br> <code>49.0</code></td>
<td>将字符串转换为浮点数</td>
</tr>
<tr>
<td align="left">to_sym</td>
<td><code>a = &quot;key&quot;</code> <br> <code>a.to_sym</code> <br> <code>:key</code></td>
<td>将字符串转换为符号</td>
</tr>
<tr>
<td align="left">match</td>
<td><code>&quot;abcd?&quot;.match(/ab/)</code> &#x3D;&gt; <code>#&lt;MatchData &quot;ab&quot;&gt;</code></td>
<td>将模式转换为正则表达式并在字符串上调用其匹配方法</td>
</tr>
<tr>
<td align="left">empty?</td>
<td><code>&quot;hello&quot;.empty?</code> &#x3D;&gt; <code>false</code></td>
<td>如果字符串的长度为零，则返回 true</td>
</tr>
<tr>
<td align="left">squeeze</td>
<td><code>&quot;Booook&quot;.squeeze</code> &#x3D;&gt; <code>&quot;Bok&quot;</code></td>
<td>返回字符串的副本，其中相同字符的运行被单个字符替换</td>
</tr>
<tr>
<td align="left">*</td>
<td><code>puts &quot;Ruby &quot; * 4</code> &#x3D;&gt; <code>Ruby Ruby Ruby Ruby</code></td>
<td>返回多个 self 副本的串联</td>
</tr>
<tr>
<td align="left">+</td>
<td><code>&quot;sammy &quot; + &quot;shark&quot;</code> &#x3D;&gt; <code>&quot;sammyshark&quot;</code></td>
<td>返回 self 和给定的其他字符串的连接</td>
</tr>
<tr>
<td align="left">eql?</td>
<td><code>s = &#39;foo&#39;</code> &#x3D;&gt; <code>true</code> <br> <code>s.eql?(&#39;foo&#39;)</code> &#x3D;&gt; <code>true</code></td>
<td>如果对象具有相同的长度和内容，则返回 true；作为自己；否则为假</td>
</tr>
<tr>
<td align="left">+</td>
<td><code>&quot;sammy &quot; + &quot;shark&quot;</code> &#x3D;&gt; <code>&quot;sammyshark&quot;</code></td>
<td>返回 self 和给定的其他字符串的连接</td>
</tr>
<tr>
<td align="left">+</td>
<td><code>&quot;sammy &quot; + &quot;shark&quot;</code> &#x3D;&gt; <code>&quot;sammyshark&quot;</code></td>
<td>返回 self 和给定的其他字符串的连接</td>
</tr>
</tbody></table>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><h3 id="声明一个方法"><a href="#声明一个方法" class="headerlink" title="声明一个方法"></a>声明一个方法</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">method_name</span>(<span class="params">parameter1, parameter2</span>)</span><br><span class="line">    puts <span class="string">&quot;<span class="subst">#&#123;parameter1&#125;</span> <span class="subst">#&#123;parameter2&#125;</span>&quot;</span></span><br><span class="line">    parameter1 + parameter2</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">res = method_name(<span class="number">20</span>, <span class="number">10</span>)</span><br><span class="line"><span class="comment"># 输出 =&gt; 30</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">method_name</span>(<span class="params">parameter1, parameter2</span>)</span><br><span class="line">    puts <span class="string">&quot;<span class="subst">#&#123;parameter1&#125;</span> <span class="subst">#&#123;parameter2&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">return</span> parameter1 + parameter2</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># 输出 =&gt; 30</span></span><br></pre></td></tr></table></figure>

<h3 id="调用方法"><a href="#调用方法" class="headerlink" title="调用方法"></a>调用方法</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">res = method_name(parameter1, parameter2)</span><br><span class="line"><span class="comment"># 可以调用不带括号的方法</span></span><br><span class="line">res = method_name parameter1, parameter2</span><br></pre></td></tr></table></figure>

<h3 id="类方法"><a href="#类方法" class="headerlink" title="类方法"></a>类方法</h3><!--rehype:wrap-class=row-span-4-->

<p>类方法是类级别的方法。 有多种定义类方法的方法</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Mobile</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">self</span>.ring</span><br><span class="line">        <span class="string">&quot;ring ring ring...&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Mobile</span>.ring</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Mobile</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">Mobile</span>.ring</span><br><span class="line">        <span class="string">&quot;ring ring ring...&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="title class_">Mobile</span>.ring</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Mobile</span></span><br><span class="line">    <span class="keyword">class</span> &lt;&lt; <span class="variable language_">self</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ring</span></span><br><span class="line">        <span class="string">&quot;ring ring ring...&quot;</span></span><br><span class="line">       <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="title class_">Mobile</span>.ring</span><br></pre></td></tr></table></figure>

<p>类方法是类对象的实例方法。 当创建一个新类时，“Class”类型的对象被初始化并分配给一个全局常量（在本例中为 Mobile）</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Mobile</span> = <span class="title class_">Class</span>.new <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">self</span>.ring</span><br><span class="line">        <span class="string">&quot;ring ring ring...&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="title class_">Mobile</span>.ring</span><br></pre></td></tr></table></figure>

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Mobile</span> = <span class="title class_">Class</span>.new</span><br><span class="line"><span class="keyword">class</span> &lt;&lt; <span class="title class_">Mobile</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">ring</span></span><br><span class="line">        <span class="string">&quot;ring ring ring...&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="title class_">Mobile</span>.ring</span><br></pre></td></tr></table></figure>

<h3 id="使用另一个参数作为默认值"><a href="#使用另一个参数作为默认值" class="headerlink" title="使用另一个参数作为默认值"></a>使用另一个参数作为默认值</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">method_name</span>(<span class="params">num1, num2 = num1</span>)</span><br><span class="line">    <span class="keyword">return</span> num1 + num2</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">res = method_name(<span class="number">10</span>)</span><br><span class="line"><span class="comment"># 输出 =&gt; 20</span></span><br></pre></td></tr></table></figure>

<h3 id="为方法参数定义默认值"><a href="#为方法参数定义默认值" class="headerlink" title="为方法参数定义默认值"></a>为方法参数定义默认值</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">method_name</span>(<span class="params">parameter1, parameter2, type = <span class="string">&quot;ADD&quot;</span></span>)</span><br><span class="line">    puts <span class="string">&quot;<span class="subst">#&#123;parameter1&#125;</span> <span class="subst">#&#123;parameter2&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">return</span> parameter1 + parameter2 <span class="keyword">if</span> type == <span class="string">&quot;ADD&quot;</span></span><br><span class="line">    <span class="keyword">return</span> parameter1 - parameter2 <span class="keyword">if</span> type == <span class="string">&quot;SUB&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">res = method_name(<span class="number">20</span>, <span class="number">10</span>)</span><br><span class="line"><span class="comment"># 输出 =&gt; 30</span></span><br></pre></td></tr></table></figure>

<h3 id="将可变长度参数传递给方法参数"><a href="#将可变长度参数传递给方法参数" class="headerlink" title="将可变长度参数传递给方法参数"></a>将可变长度参数传递给方法参数</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">method_name</span>(<span class="params">type, *values</span>)</span><br><span class="line">    <span class="keyword">return</span> values.reduce(<span class="symbol">:+</span>) <span class="keyword">if</span> type == <span class="string">&quot;ADD&quot;</span></span><br><span class="line">    <span class="keyword">return</span> values.reduce(<span class="symbol">:-</span>) <span class="keyword">if</span> type == <span class="string">&quot;SUB&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">numbers = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>]</span><br><span class="line">res = method_name(<span class="string">&quot;ADD&quot;</span>, *numbers)</span><br><span class="line"><span class="comment"># 输出 =&gt; 15</span></span><br><span class="line">res = method_name(<span class="string">&quot;SUB&quot;</span>, *numbers)</span><br><span class="line"><span class="comment"># 输出 =&gt; -11</span></span><br><span class="line"><span class="comment"># 或者您可以提供这样的值</span></span><br><span class="line">res = method_name(<span class="string">&quot;ADD&quot;</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment"># 输出 =&gt; 15</span></span><br></pre></td></tr></table></figure>

<h3 id="修改对象"><a href="#修改对象" class="headerlink" title="修改对象"></a>修改对象</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">a = [<span class="string">&quot;Drama&quot;</span>, <span class="string">&quot;Mystery&quot;</span>, <span class="string">&quot;Crime&quot;</span>,</span><br><span class="line"><span class="string">&quot;Sci-fi&quot;</span>, <span class="string">&quot;Disaster&quot;</span>, <span class="string">&quot;Thriller&quot;</span>]</span><br><span class="line">a.sort</span><br><span class="line">puts a</span><br><span class="line"><span class="comment"># 我们没有修改对象</span></span><br><span class="line"><span class="comment"># Drama</span></span><br><span class="line"><span class="comment"># Mystery</span></span><br><span class="line"><span class="comment"># Crime</span></span><br><span class="line"><span class="comment"># Sci-fi</span></span><br><span class="line"><span class="comment"># Disaster</span></span><br><span class="line"><span class="comment"># Thriller</span></span><br><span class="line">a.sort!</span><br><span class="line">puts a</span><br><span class="line"><span class="comment"># 修改对象</span></span><br><span class="line"><span class="comment"># Crime</span></span><br><span class="line"><span class="comment"># Disaster</span></span><br><span class="line"><span class="comment"># Drama</span></span><br><span class="line"><span class="comment"># Mystery</span></span><br><span class="line"><span class="comment"># Sci-fi</span></span><br><span class="line"><span class="comment"># Thriller</span></span><br></pre></td></tr></table></figure>

<p>当您要修改对象时，在方法之后使用 <code>!</code></p>
<h3 id="布尔方法"><a href="#布尔方法" class="headerlink" title="布尔方法"></a>布尔方法</h3><p>在 ruby 中，以问号 (?) 结尾的方法称为布尔方法，它返回 true 或 false</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;some text&quot;</span>.<span class="literal">nil</span>?</span><br><span class="line"><span class="comment"># false</span></span><br><span class="line"><span class="literal">nil</span>.<span class="literal">nil</span>?</span><br><span class="line"><span class="comment"># true</span></span><br></pre></td></tr></table></figure>

<p>您可以拥有自己的布尔方法</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">is_vowel?</span>(<span class="params">char</span>)</span><br><span class="line">    [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;i&#x27;</span>,<span class="string">&#x27;o&#x27;</span>,<span class="string">&#x27;u&#x27;</span>].<span class="keyword">include</span>? char</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">is_vowel? <span class="string">&#x27;a&#x27;</span></span><br><span class="line"><span class="comment"># true</span></span><br><span class="line">is_vowel? <span class="string">&#x27;b&#x27;</span></span><br><span class="line"><span class="comment"># false</span></span><br></pre></td></tr></table></figure>

<h2 id="Blocks-块"><a href="#Blocks-块" class="headerlink" title="Blocks (块)"></a>Blocks (块)</h2><h3 id="块示例"><a href="#块示例" class="headerlink" title="块示例"></a>块示例</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># return value</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">give_me_data</span></span><br><span class="line">    data = <span class="keyword">yield</span></span><br><span class="line">    puts <span class="string">&quot;data = <span class="subst">#&#123;data&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">give_me_data &#123; <span class="string">&quot;Big data&quot;</span> &#125;</span><br><span class="line"><span class="comment"># 输出 =&gt; data = Big data</span></span><br></pre></td></tr></table></figure>

<p><code>do</code> 和 <code>end</code>（用于多行）或花括号 <code>&#123;</code> 和 <code>&#125;</code>（用于单行）之间的代码称为块，它们可以在两个管道之间定义多个参数 <code>(|arg1, arg2|)</code></p>
<h3 id="单行块"><a href="#单行块" class="headerlink" title="单行块"></a>单行块</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">salary = [<span class="number">399</span>, <span class="number">234</span>, <span class="number">566</span>, <span class="number">533</span>, <span class="number">233</span>]</span><br><span class="line">salary.each &#123; |<span class="params">s</span>| puts s &#125;</span><br><span class="line"><span class="comment"># puts s = block body</span></span><br><span class="line"><span class="comment"># |s| = block arugments</span></span><br></pre></td></tr></table></figure>

<h3 id="多行块"><a href="#多行块" class="headerlink" title="多行块"></a>多行块</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">salary.each <span class="keyword">do</span> |<span class="params">s</span>|</span><br><span class="line">    a = <span class="number">10</span></span><br><span class="line">    res = a * s</span><br><span class="line">    puts res</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># 块体</span></span><br><span class="line"><span class="comment"># a = 10</span></span><br><span class="line"><span class="comment"># res = a * s</span></span><br><span class="line"><span class="comment"># puts res</span></span><br><span class="line"><span class="comment"># 块参数</span></span><br><span class="line"><span class="comment"># |s|</span></span><br></pre></td></tr></table></figure>

<p>块可以作为方法参数传递，也可以与方法调用相关联。 块返回最后评估的语句</p>
<h3 id="隐式传递一个块"><a href="#隐式传递一个块" class="headerlink" title="隐式传递一个块"></a>隐式传递一个块</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">give_me_data</span></span><br><span class="line">    puts <span class="string">&quot;I am inside give_me_data method&quot;</span></span><br><span class="line">    <span class="keyword">yield</span></span><br><span class="line">    puts <span class="string">&quot;I am back in give_me_data method&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">give_me_data &#123; puts <span class="string">&quot;Big data&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># I am inside give_me_data method</span></span><br><span class="line"><span class="comment"># Big data</span></span><br><span class="line"><span class="comment"># I am back in give_me_data method</span></span><br></pre></td></tr></table></figure>

<h3 id="多次调用"><a href="#多次调用" class="headerlink" title="多次调用"></a>多次调用</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">give_me_data</span></span><br><span class="line">    <span class="keyword">yield</span></span><br><span class="line">    <span class="keyword">yield</span></span><br><span class="line">    <span class="keyword">yield</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">give_me_data &#123; puts <span class="string">&quot;Big data&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># Big data</span></span><br><span class="line"><span class="comment"># Big data</span></span><br><span class="line"><span class="comment"># Big data</span></span><br></pre></td></tr></table></figure>

<h3 id="使用块参数调用"><a href="#使用块参数调用" class="headerlink" title="使用块参数调用"></a>使用块参数调用</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">give_me_data</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">10</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">100</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">30</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">give_me_data &#123; |<span class="params">data</span>| puts <span class="string">&quot;Big data <span class="subst">#&#123;data&#125;</span> TB&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># Big data 10 TB</span></span><br><span class="line"><span class="comment"># Big data 100 TB</span></span><br><span class="line"><span class="comment"># Big data 30 TB</span></span><br></pre></td></tr></table></figure>

<h3 id="使用多个块参数调用"><a href="#使用多个块参数调用" class="headerlink" title="使用多个块参数调用"></a>使用多个块参数调用</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">give_me_data</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&quot;Big data&quot;</span>, <span class="number">10</span>, <span class="string">&quot;TB&quot;</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&quot;Big data&quot;</span>, <span class="number">100</span>, <span class="string">&quot;GB&quot;</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&quot;Big data&quot;</span>, <span class="number">30</span>, <span class="string">&quot;MB&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">give_me_data &#123; |<span class="params">text, data, unit</span>| puts <span class="string">&quot;<span class="subst">#&#123;text&#125;</span> <span class="subst">#&#123;data&#125;</span> <span class="subst">#&#123;unit&#125;</span>&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># Big data 10 TB</span></span><br><span class="line"><span class="comment"># Big data 100 GB</span></span><br><span class="line"><span class="comment"># Big data 30 MB</span></span><br></pre></td></tr></table></figure>

<h3 id="块将尝试从当前上下文返回"><a href="#块将尝试从当前上下文返回" class="headerlink" title="块将尝试从当前上下文返回"></a>块将尝试从当前上下文返回</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">give_me_data</span><br><span class="line">    puts <span class="string">&quot;我在 give_me_data 方法里面&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span></span><br><span class="line">  puts <span class="string">&quot;我在测试方法里面&quot;</span></span><br><span class="line">  give_me_data &#123; <span class="keyword">return</span> <span class="number">10</span> &#125; <span class="comment"># 代码从这里返回</span></span><br><span class="line">  puts <span class="string">&quot;I am back in test method&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">return_value = test</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 我在测试方法里面</span></span><br><span class="line"><span class="comment"># 我在 give_me_data 方法里面</span></span><br><span class="line"><span class="comment"># 10</span></span><br></pre></td></tr></table></figure>

<h3 id="通过使用-参数显式传递块"><a href="#通过使用-参数显式传递块" class="headerlink" title="通过使用 &amp; 参数显式传递块"></a>通过使用 &amp; 参数显式传递块</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">give_me_data</span>(<span class="params">&amp;block</span>)</span><br><span class="line">    block.call</span><br><span class="line">    block.call</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">give_me_data &#123; puts <span class="string">&quot;Big data&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># Big data</span></span><br><span class="line"><span class="comment"># Big data</span></span><br></pre></td></tr></table></figure>

<h3 id="检查是否给出了块"><a href="#检查是否给出了块" class="headerlink" title="检查是否给出了块"></a>检查是否给出了块</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">give_me_data</span></span><br><span class="line">    <span class="keyword">yield</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">give_me_data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># LocalJumpError: no block given (yield)</span></span><br></pre></td></tr></table></figure>

<h3 id="处理异常并使块可选的方法"><a href="#处理异常并使块可选的方法" class="headerlink" title="处理异常并使块可选的方法"></a>处理异常并使块可选的方法</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">give_me_data</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;no block&quot;</span> <span class="keyword">unless</span> block_given?</span><br><span class="line">    <span class="keyword">yield</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">give_me_data &#123; puts <span class="string">&quot;Big data&quot;</span> &#125;</span><br><span class="line">give_me_data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># Big data</span></span><br></pre></td></tr></table></figure>

<h2 id="Procs"><a href="#Procs" class="headerlink" title="Procs"></a>Procs</h2><h3 id="Procs-示例"><a href="#Procs-示例" class="headerlink" title="Procs 示例"></a>Procs 示例</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">p = <span class="title class_">Proc</span>.new &#123; puts <span class="string">&quot;Hello World&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">give_me_data</span>(<span class="params"><span class="built_in">proc</span></span>)</span><br><span class="line">    <span class="built_in">proc</span>.call</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">give_me_data p</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># Hello World</span></span><br></pre></td></tr></table></figure>

<p>proc 就像一个可以存储在变量中的块</p>
<h3 id="任意参数"><a href="#任意参数" class="headerlink" title="任意参数"></a>任意参数</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">p = <span class="title class_">Proc</span>.new &#123; |<span class="params">count</span>| <span class="string">&quot;Hello World &quot;</span> * count &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">give_me_data</span>(<span class="params"><span class="built_in">proc</span></span>)</span><br><span class="line">    <span class="built_in">proc</span>.call <span class="number">5</span>, <span class="number">2</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">give_me_data p</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># &quot;Hello World Hello World Hello World Hello World Hello World &quot;</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="proc-将尝试从当前上下文返回"><a href="#proc-将尝试从当前上下文返回" class="headerlink" title="proc 将尝试从当前上下文返回"></a>proc 将尝试从当前上下文返回</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">p = <span class="title class_">Proc</span>.new &#123; <span class="keyword">return</span> <span class="number">10</span> &#125;</span><br><span class="line">p.call</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="title class_">LocalJumpError</span>: unexpected <span class="keyword">return</span></span><br></pre></td></tr></table></figure>

<h3 id="不能从顶级上下文返回"><a href="#不能从顶级上下文返回" class="headerlink" title="不能从顶级上下文返回"></a>不能从顶级上下文返回</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">give_me_data</span></span><br><span class="line">    puts <span class="string">&quot;我在 give_me_data 方法里面&quot;</span></span><br><span class="line">    p = <span class="title class_">Proc</span>.new &#123; <span class="keyword">return</span> <span class="number">10</span> &#125;</span><br><span class="line">    p.call <span class="comment"># 代码从这里返回</span></span><br><span class="line">    puts <span class="string">&quot;I am back in give_me_data method&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">return_value = give_me_data</span><br><span class="line">puts return_value</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 我在 give_me_data 方法里面</span></span><br><span class="line"><span class="comment"># 10</span></span><br></pre></td></tr></table></figure>

<h2 id="Lambdas"><a href="#Lambdas" class="headerlink" title="Lambdas"></a>Lambdas</h2><h3 id="声明一个-lambda"><a href="#声明一个-lambda" class="headerlink" title="声明一个 lambda"></a>声明一个 lambda</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">l = <span class="built_in">lambda</span> &#123; puts <span class="string">&quot;Hello World&quot;</span> &#125;</span><br><span class="line"><span class="comment"># 速记</span></span><br><span class="line">l = -&gt; &#123; puts <span class="string">&quot;Hello World&quot;</span> &#125;</span><br><span class="line"><span class="comment"># 调用 lambda</span></span><br><span class="line">l.call</span><br><span class="line"><span class="comment"># 输出 =&gt; Hello World</span></span><br></pre></td></tr></table></figure>

<p>有多种方法可以调用 lambda</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">l.()</span><br><span class="line">l[]</span><br></pre></td></tr></table></figure>

<h3 id="严格的-arguments"><a href="#严格的-arguments" class="headerlink" title="严格的 arguments"></a>严格的 arguments</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">l = -&gt; (count) &#123; <span class="string">&quot;Hello World &quot;</span> * count &#125;</span><br><span class="line">l.call <span class="number">5</span></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># &quot;Hello World Hello World Hello World Hello World Hello World &quot;</span></span><br><span class="line">l.call <span class="number">5</span>, <span class="number">2</span></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">wrong number of arguments (given <span class="number">2</span>, expected <span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<h3 id="块中声明一个-lambda"><a href="#块中声明一个-lambda" class="headerlink" title="块中声明一个 lambda"></a>块中声明一个 lambda</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">give_me_data</span></span><br><span class="line">    puts <span class="string">&quot;I am inside give_me_data method&quot;</span></span><br><span class="line">    l = -&gt; &#123; <span class="keyword">return</span> <span class="number">10</span> &#125;</span><br><span class="line">    l.call</span><br><span class="line">    puts <span class="string">&quot;I am back in give_me_data method&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">return_value = give_me_data</span><br><span class="line">puts return_value</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># I am inside give_me_data method</span></span><br><span class="line"><span class="comment"># I am back in give_me_data method</span></span><br><span class="line"><span class="comment"># nil # because puts return nil</span></span><br></pre></td></tr></table></figure>

<h3 id="lambdas-从-lambda-本身返回，就像常规方法一样"><a href="#lambdas-从-lambda-本身返回，就像常规方法一样" class="headerlink" title="lambdas 从 lambda 本身返回，就像常规方法一样"></a>lambdas 从 lambda 本身返回，就像常规方法一样</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">l = -&gt; &#123; <span class="keyword">return</span> <span class="number">10</span> &#125;</span><br><span class="line">l.call</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出 =&gt; 10</span></span><br></pre></td></tr></table></figure>

<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="初始化一个空数组"><a href="#初始化一个空数组" class="headerlink" title="初始化一个空数组"></a>初始化一个空数组</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">array = <span class="title class_">Array</span>.new   <span class="comment">#=&gt; []</span></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">array = []</span><br></pre></td></tr></table></figure>

<h3 id="包含不同类型的对象的数组"><a href="#包含不同类型的对象的数组" class="headerlink" title="包含不同类型的对象的数组"></a>包含不同类型的对象的数组</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">array = [<span class="number">1</span>, <span class="string">&quot;two&quot;</span>, <span class="number">3.0</span>] </span><br><span class="line"><span class="comment">#=&gt; [1, &quot;two&quot;, 3.0]</span></span><br></pre></td></tr></table></figure>

<h3 id="用初始大小和默认对象填充数组"><a href="#用初始大小和默认对象填充数组" class="headerlink" title="用初始大小和默认对象填充数组"></a>用初始大小和默认对象填充数组</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = <span class="title class_">Array</span>.new(<span class="number">3</span>)       </span><br><span class="line"><span class="comment">#=&gt; [nil, nil, nil]</span></span><br><span class="line">numbers = <span class="title class_">Array</span>.new(<span class="number">3</span>, <span class="number">7</span>)    </span><br><span class="line"><span class="comment">#=&gt; [7, 7, 7]</span></span><br><span class="line">numbers = <span class="title class_">Array</span>.new(<span class="number">3</span>, <span class="literal">true</span>) </span><br><span class="line"><span class="comment">#=&gt; [true, true, true]</span></span><br><span class="line">numbers = []</span><br><span class="line">numbers.fill(<span class="number">7</span>, <span class="number">0</span>..<span class="number">2</span>)   <span class="comment">#=&gt; [7, 7, 7]</span></span><br></pre></td></tr></table></figure>

<h3 id="不同哈希值的数组"><a href="#不同哈希值的数组" class="headerlink" title="不同哈希值的数组"></a>不同哈希值的数组</h3><!--rehype:wrap-class=col-span-2-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">array_with_hashes = <span class="title class_">Array</span>.new(<span class="number">2</span>) &#123; &#123;&#125; &#125; <span class="comment">#=&gt; [&#123;&#125;, &#123;&#125;]</span></span><br><span class="line">array_with_hashes[<span class="number">0</span>][<span class="symbol">:name</span>] = <span class="string">&quot;Bob&quot;</span></span><br><span class="line">array_with_hashes[<span class="number">0</span>][<span class="symbol">:id</span>] = <span class="number">10</span>          <span class="comment">#=&gt; [&#123;:name=&gt;&quot;Bob&quot;, :id=&gt;10&#125;, &#123;&#125;]</span></span><br></pre></td></tr></table></figure>

<h3 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">temperature_data = [</span><br><span class="line">              [<span class="string">&quot;A908&quot;</span>, <span class="number">38</span>],</span><br><span class="line">              [<span class="string">&quot;A909&quot;</span>, <span class="number">37</span>],</span><br><span class="line">              [<span class="string">&quot;A910&quot;</span>, <span class="number">38</span>],</span><br><span class="line">          ]</span><br><span class="line">temperature_data[<span class="number">0</span>]    <span class="comment">#=&gt; [&quot;A908&quot;, 38]</span></span><br><span class="line">temperature_data[<span class="number">0</span>][<span class="number">0</span>] <span class="comment">#=&gt; &quot;A908&quot;</span></span><br><span class="line">temperature_data[<span class="number">0</span>][<span class="number">1</span>] <span class="comment">#=&gt; 38</span></span><br></pre></td></tr></table></figure>

<h3 id="数组索引"><a href="#数组索引" class="headerlink" title="数组索引"></a>数组索引</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">str_array = [</span><br><span class="line">  <span class="string">&quot;This&quot;</span>, <span class="string">&quot;is&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;small&quot;</span>, <span class="string">&quot;array&quot;</span></span><br><span class="line">]</span><br><span class="line">str_array[<span class="number">0</span>]            <span class="comment">#=&gt; &quot;This&quot;</span></span><br><span class="line">str_array[<span class="number">1</span>]            <span class="comment">#=&gt; &quot;is&quot;</span></span><br><span class="line">str_array[<span class="number">4</span>]            <span class="comment">#=&gt; &quot;array&quot;</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="负索引"><a href="#负索引" class="headerlink" title="负索引"></a>负索引</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">str_array = [</span><br><span class="line">  <span class="string">&quot;This&quot;</span>, <span class="string">&quot;is&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;small&quot;</span>, <span class="string">&quot;array&quot;</span></span><br><span class="line">]</span><br><span class="line"><span class="comment"># 索引 -1 表示最后一个元素</span></span><br><span class="line">str_array[-<span class="number">1</span>]        <span class="comment">#=&gt; &quot;array&quot;</span></span><br><span class="line"><span class="comment"># 索引 -2 表示倒数第二个元素</span></span><br><span class="line">str_array[-<span class="number">2</span>]        <span class="comment">#=&gt; &quot;small&quot;</span></span><br><span class="line">str_array[-<span class="number">6</span>]        <span class="comment">#=&gt; nil</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="数组方法-at"><a href="#数组方法-at" class="headerlink" title="数组方法 at"></a>数组方法 at</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">str_array = [</span><br><span class="line">  <span class="string">&quot;This&quot;</span>, <span class="string">&quot;is&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;small&quot;</span>, <span class="string">&quot;array&quot;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">puts str_array.at(<span class="number">0</span>)      <span class="comment">#=&gt; &quot;This&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="范围获取"><a href="#范围获取" class="headerlink" title="范围获取"></a>范围获取</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">arr[<span class="number">100</span>]                  <span class="comment">#=&gt; nil</span></span><br><span class="line">arr[-<span class="number">3</span>]                   <span class="comment">#=&gt; 4</span></span><br><span class="line">arr[<span class="number">2</span>, <span class="number">3</span>]                 <span class="comment">#=&gt; [3, 4, 5]</span></span><br><span class="line">arr[<span class="number">1</span>..<span class="number">4</span>]                 <span class="comment">#=&gt; [2, 3, 4, 5]</span></span><br><span class="line">arr[<span class="number">1</span>..-<span class="number">3</span>]                <span class="comment">#=&gt; [2, 3, 4]</span></span><br></pre></td></tr></table></figure>

<h3 id="数组方法-fetch"><a href="#数组方法-fetch" class="headerlink" title="数组方法 fetch"></a>数组方法 fetch</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>]</span><br><span class="line">arr.fetch(<span class="number">100</span>)</span><br><span class="line"><span class="comment">#=&gt; IndexError: 数组边界外的索引 100：-6...6</span></span><br><span class="line">arr.fetch(<span class="number">100</span>, <span class="string">&quot;oops&quot;</span>)    <span class="comment">#=&gt; &quot;oops&quot;</span></span><br></pre></td></tr></table></figure>

<p>超出边界，给默认值</p>
<h3 id="获取数组元素"><a href="#获取数组元素" class="headerlink" title="获取数组元素"></a>获取数组元素</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"></span><br><span class="line">arr.first     <span class="comment"># 第一个值 =&gt; 1</span></span><br><span class="line">arr.last      <span class="comment"># 最后一个值 =&gt; 6</span></span><br><span class="line"><span class="comment"># take 返回前 n 个元素</span></span><br><span class="line">arr.take(<span class="number">3</span>)   <span class="comment">#=&gt; [1, 2, 3]</span></span><br><span class="line"><span class="comment"># drop 在 n 个元素被删除之后</span></span><br><span class="line">arr.drop(<span class="number">3</span>)   <span class="comment">#=&gt; [4, 5, 6]</span></span><br></pre></td></tr></table></figure>

<h3 id="在数组末尾添加值-push"><a href="#在数组末尾添加值-push" class="headerlink" title="在数组末尾添加值 push"></a>在数组末尾添加值 push</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">numbers.push(<span class="number">11</span>)          </span><br><span class="line"><span class="comment">#=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]</span></span><br><span class="line">numbers.push(<span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>)  </span><br><span class="line"><span class="comment">#=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]</span></span><br></pre></td></tr></table></figure>

<h3 id="数组末尾删除值-pop"><a href="#数组末尾删除值-pop" class="headerlink" title="数组末尾删除值 pop"></a>数组末尾删除值 pop</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">num_array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">num_array.pop             <span class="comment">#=&gt; 10</span></span><br><span class="line">num_array</span><br><span class="line"><span class="comment">#=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="在数组的开头添加值-unshift"><a href="#在数组的开头添加值-unshift" class="headerlink" title="在数组的开头添加值 unshift"></a>在数组的开头添加值 unshift</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">numbers.unshift(<span class="number">0</span>)          </span><br><span class="line"><span class="comment">#=&gt; [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br><span class="line">numbers.unshift(-<span class="number">3</span>, -<span class="number">2</span>, -<span class="number">1</span>) </span><br><span class="line"><span class="comment">#=&gt; [-3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br></pre></td></tr></table></figure>

<h3 id="检索并同时删除第一个元素-shift"><a href="#检索并同时删除第一个元素-shift" class="headerlink" title="检索并同时删除第一个元素 shift"></a>检索并同时删除第一个元素 shift</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">numbers.shift <span class="comment">#=&gt; 1</span></span><br><span class="line">numbers</span><br><span class="line"><span class="comment">#=&gt; [2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br></pre></td></tr></table></figure>

<h3 id="删除特定索引处的元素-delete-at"><a href="#删除特定索引处的元素-delete-at" class="headerlink" title="删除特定索引处的元素 delete_at"></a>删除特定索引处的元素 delete_at</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">numbers.delete_at(<span class="number">2</span>) <span class="comment">#=&gt; 4</span></span><br><span class="line">numbers             </span><br><span class="line"><span class="comment">#=&gt; [2, 3, 5, 6, 7, 8, 9, 10]</span></span><br></pre></td></tr></table></figure>

<h3 id="删除数组中任意位置的特定元素"><a href="#删除数组中任意位置的特定元素" class="headerlink" title="删除数组中任意位置的特定元素"></a>删除数组中任意位置的特定元素</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">numbers.delete(<span class="number">2</span>) <span class="comment">#=&gt; 2</span></span><br><span class="line">numbers           <span class="comment">#=&gt; [3, 5, 6, 7, 8, 9, 10]</span></span><br></pre></td></tr></table></figure>

<h3 id="在给定索引处插入值-insert"><a href="#在给定索引处插入值-insert" class="headerlink" title="在给定索引处插入值 insert"></a>在给定索引处插入值 insert</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">numbers.insert(<span class="number">0</span>, <span class="number">0</span>)           </span><br><span class="line"><span class="comment">#=&gt; [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br><span class="line">numbers.insert(<span class="number">0</span>, -<span class="number">3</span>, -<span class="number">2</span>, -<span class="number">1</span>)  </span><br><span class="line"><span class="comment">#=&gt; [-3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br><span class="line"></span><br><span class="line">numbers.insert(-<span class="number">1</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>) </span><br><span class="line"><span class="comment">#=&gt; [-3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13, 14]</span></span><br><span class="line">numbers.insert(-<span class="number">4</span>, <span class="number">11</span>)         </span><br><span class="line"><span class="comment">#=&gt; [-3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="一个块来填充数组的值"><a href="#一个块来填充数组的值" class="headerlink" title="一个块来填充数组的值"></a>一个块来填充数组的值</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = <span class="title class_">Array</span>.new(<span class="number">10</span>) &#123; |<span class="params">n</span>| n = n * <span class="number">2</span> &#125; </span><br><span class="line"><span class="comment">#=&gt; [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]</span></span><br></pre></td></tr></table></figure>

<h3 id="填充数组变得更容易"><a href="#填充数组变得更容易" class="headerlink" title="填充数组变得更容易"></a>填充数组变得更容易</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = <span class="title class_">Array</span>(<span class="number">100</span>..<span class="number">110</span>)</span><br><span class="line"><span class="comment">#=&gt; [100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者我们可以将范围转换为数组</span></span><br><span class="line">(<span class="number">100</span>..<span class="number">110</span>).to_a </span><br><span class="line"><span class="comment">#=&gt; [100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110]</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="从数组中删除-nil-值"><a href="#从数组中删除-nil-值" class="headerlink" title="从数组中删除 nil 值"></a>从数组中删除 nil 值</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">arr = [<span class="string">&#x27;foo&#x27;</span>, <span class="number">0</span>, <span class="literal">nil</span>, <span class="string">&#x27;bar&#x27;</span>, <span class="number">7</span>, <span class="literal">nil</span>]</span><br><span class="line">arr.compact  <span class="comment">#=&gt; [&#x27;foo&#x27;, 0, &#x27;bar&#x27;, 7]</span></span><br><span class="line">arr      <span class="comment">#=&gt; [&#x27;foo&#x27;, 0, nil, &#x27;bar&#x27;, 7, nil]</span></span><br><span class="line">arr.compact! <span class="comment">#=&gt; [&#x27;foo&#x27;, 0, &#x27;bar&#x27;, 7]</span></span><br><span class="line">arr      <span class="comment">#=&gt; [&#x27;foo&#x27;, 0, &#x27;bar&#x27;, 7]</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="去重-uniq"><a href="#去重-uniq" class="headerlink" title="去重 uniq"></a>去重 uniq</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">arr = [<span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">556</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="number">123</span>, <span class="number">556</span>]</span><br><span class="line">arr.uniq <span class="comment">#=&gt; [2, 5, 6, 556, 8, 9, 0, 123]</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="检查数组中是否存在值（include？）"><a href="#检查数组中是否存在值（include？）" class="headerlink" title="检查数组中是否存在值（include？）"></a>检查数组中是否存在值（<code>include？</code>）</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">planets = [<span class="string">&quot;Mercury&quot;</span>, <span class="string">&quot;Venus&quot;</span>, <span class="string">&quot;Earth&quot;</span>, <span class="string">&quot;Mars&quot;</span>, <span class="string">&quot;Jupiter&quot;</span>, <span class="string">&quot;Saturn&quot;</span>, <span class="string">&quot;Uranus&quot;</span>, <span class="string">&quot;Neptune&quot;</span>]</span><br><span class="line">planets.<span class="keyword">include</span>? <span class="string">&quot;Mars&quot;</span></span><br><span class="line"><span class="comment"># 输出 =&gt; true</span></span><br><span class="line">planets.<span class="keyword">include</span>? <span class="string">&quot;Pluto&quot;</span></span><br><span class="line"><span class="comment"># 输出 =&gt; false</span></span><br></pre></td></tr></table></figure>

<h3 id="获取数组大小"><a href="#获取数组大小" class="headerlink" title="获取数组大小"></a>获取数组大小</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">planets = [<span class="string">&quot;Mercury&quot;</span>, <span class="string">&quot;Venus&quot;</span>, <span class="string">&quot;Earth&quot;</span>, <span class="string">&quot;Mars&quot;</span>, <span class="string">&quot;Jupiter&quot;</span>, <span class="string">&quot;Saturn&quot;</span>, <span class="string">&quot;Uranus&quot;</span>, <span class="string">&quot;Neptune&quot;</span>]</span><br><span class="line">planets.size</span><br><span class="line"><span class="comment"># 输出 =&gt; 8</span></span><br><span class="line">planets.length</span><br><span class="line"><span class="comment"># 输出 =&gt; 8</span></span><br></pre></td></tr></table></figure>

<p>您可以使用大小或长度，两者都是同义词</p>
<h3 id="清除数组"><a href="#清除数组" class="headerlink" title="清除数组"></a>清除数组</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">numbers.clear</span><br><span class="line"><span class="comment"># 输出 =&gt; []</span></span><br></pre></td></tr></table></figure>

<h3 id="获取数组的第一个元素"><a href="#获取数组的第一个元素" class="headerlink" title="获取数组的第一个元素"></a>获取数组的第一个元素</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">numbers[<span class="number">0</span>]</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">numbers.first</span><br><span class="line"><span class="comment"># 输出 =&gt; 1</span></span><br></pre></td></tr></table></figure>

<h3 id="获取数组的最后一个元素"><a href="#获取数组的最后一个元素" class="headerlink" title="获取数组的最后一个元素"></a>获取数组的最后一个元素</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">numbers[-<span class="number">1</span>]</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">numbers.last</span><br><span class="line"><span class="comment"># 输出 =&gt; 10</span></span><br></pre></td></tr></table></figure>

<h3 id="合并两个数组"><a href="#合并两个数组" class="headerlink" title="合并两个数组"></a>合并两个数组</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">a = [<span class="string">&quot;tom&quot;</span>, <span class="string">&quot;mot&quot;</span>, <span class="string">&quot;otm&quot;</span>]</span><br><span class="line">b = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">a.zip(b)</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># [[&quot;tom&quot;, 2], [&quot;mot&quot;, 3], [&quot;otm&quot;, 5]]</span></span><br></pre></td></tr></table></figure>

<h3 id="对数组进行排序"><a href="#对数组进行排序" class="headerlink" title="对数组进行排序"></a>对数组进行排序</h3><!--rehype:wrap-class=row-span-3-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">primes = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">sorted_primes = primes.sort</span><br><span class="line">puts <span class="string">&quot;<span class="subst">#&#123;sorted_primes&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># 输出 =&gt; [2, 3, 5, 7]</span></span><br></pre></td></tr></table></figure>

<p>or in-place sort</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">primes = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">primes.sort!</span><br><span class="line">puts <span class="string">&quot;<span class="subst">#&#123;primes&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># 输出 =&gt; [2, 3, 5, 7]</span></span><br></pre></td></tr></table></figure>

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">planets = [<span class="string">&quot;Mercury&quot;</span>, <span class="string">&quot;Venus&quot;</span>, <span class="string">&quot;Earth&quot;</span>, <span class="string">&quot;Mars&quot;</span>, <span class="string">&quot;Jupiter&quot;</span>, <span class="string">&quot;Saturn&quot;</span>, <span class="string">&quot;Uranus&quot;</span>, <span class="string">&quot;Neptune&quot;</span>]</span><br><span class="line">planets.sort</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># [&quot;Earth&quot;, &quot;Jupiter&quot;, &quot;Mars&quot;, &quot;Mercury&quot;, &quot;Neptune&quot;, &quot;Saturn&quot;, &quot;Uranus&quot;, &quot;Venus&quot;]</span></span><br><span class="line">planets.sort_by &#123; |<span class="params">p</span>| p &#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># [&quot;Earth&quot;, &quot;Jupiter&quot;, &quot;Mars&quot;, &quot;Mercury&quot;, &quot;Neptune&quot;, &quot;Saturn&quot;, &quot;Uranus&quot;, &quot;Venus&quot;]</span></span><br><span class="line">planets.sort_by &#123; |<span class="params">p</span>| p.length &#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># [&quot;Mars&quot;, &quot;Earth&quot;, &quot;Venus&quot;, &quot;Saturn&quot;, &quot;Uranus&quot;, &quot;Neptune&quot;, &quot;Jupiter&quot;, &quot;Mercury&quot;]</span></span><br></pre></td></tr></table></figure>

<h3 id="从数组中获取最大值"><a href="#从数组中获取最大值" class="headerlink" title="从数组中获取最大值"></a>从数组中获取最大值</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">primes = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">primes.max_by &#123; |<span class="params">p</span>| p &#125;</span><br><span class="line"><span class="comment"># 输出 =&gt; 7</span></span><br></pre></td></tr></table></figure>

<h3 id="使用范围获取数组元素"><a href="#使用范围获取数组元素" class="headerlink" title="使用范围获取数组元素"></a>使用范围获取数组元素</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># numbers[start..end], both index are inclusive</span></span><br><span class="line">puts numbers[<span class="number">0</span>..<span class="number">3</span>]</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 4</span></span><br><span class="line"><span class="comment"># numbers[start..end], end index is exclusive</span></span><br><span class="line">puts numbers[<span class="number">0</span>...<span class="number">3</span>]</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># or numbers[start..length]</span></span><br><span class="line">puts numbers[<span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line"><span class="comment"># 1</span></span><br></pre></td></tr></table></figure>

<h3 id="获取数组的前n个元素"><a href="#获取数组的前n个元素" class="headerlink" title="获取数组的前n个元素"></a>获取数组的前n个元素</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">primes = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">primes.take(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># [7, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="访问元素"><a href="#访问元素" class="headerlink" title="访问元素"></a>访问元素</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">primes = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">primes.fetch(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 5</span></span><br><span class="line"><span class="comment"># Fetch will throw an error if the element does not exist</span></span><br><span class="line">primes.fetch(<span class="number">10</span>)</span><br><span class="line"><span class="comment"># (index 10 outside of array bounds: -4...4)</span></span><br><span class="line"><span class="comment"># or get an default value</span></span><br><span class="line">primes.fetch(<span class="number">10</span>, -<span class="number">1</span>)</span><br><span class="line"><span class="comment"># -1</span></span><br></pre></td></tr></table></figure>

<h3 id="从数组中删除重复元素"><a href="#从数组中删除重复元素" class="headerlink" title="从数组中删除重复元素"></a>从数组中删除重复元素</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">1</span>]</span><br><span class="line">numbers.uniq</span><br><span class="line"><span class="comment"># [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br></pre></td></tr></table></figure>

<h3 id="删除前-n-个元素"><a href="#删除前-n-个元素" class="headerlink" title="删除前 n 个元素"></a>删除前 n 个元素</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">primes = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">primes.drop(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># [5]</span></span><br></pre></td></tr></table></figure>

<h3 id="删除第一个元素"><a href="#删除第一个元素" class="headerlink" title="删除第一个元素"></a>删除第一个元素</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">primes = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">primes.shift</span><br><span class="line"><span class="comment"># [2, 3, 5]</span></span><br></pre></td></tr></table></figure>

<h3 id="删除最后一个元素"><a href="#删除最后一个元素" class="headerlink" title="删除最后一个元素"></a>删除最后一个元素</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">primes = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">primes.pop</span><br><span class="line"><span class="comment"># [7, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="删除带有索引的元素"><a href="#删除带有索引的元素" class="headerlink" title="删除带有索引的元素"></a>删除带有索引的元素</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">primes = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">primes.delete_at(-<span class="number">1</span>)</span><br><span class="line"><span class="comment"># [7, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="删除所有出现的元素"><a href="#删除所有出现的元素" class="headerlink" title="删除所有出现的元素"></a>删除所有出现的元素</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">primes = [<span class="number">7</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>]</span><br><span class="line">primes.delete(<span class="number">5</span>)</span><br><span class="line"><span class="comment"># [7, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="each"><a href="#each" class="headerlink" title="each"></a>each</h3><!--rehype:wrap-class=row-span-3-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 当你有单行块时</span></span><br><span class="line">salary = [<span class="number">399</span>, <span class="number">234</span>, <span class="number">566</span>, <span class="number">533</span>, <span class="number">233</span>]</span><br><span class="line">salary.each &#123; |<span class="params">s</span>| puts s &#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 399</span></span><br><span class="line"><span class="comment"># 234</span></span><br><span class="line"><span class="comment"># 566</span></span><br><span class="line"><span class="comment"># 533</span></span><br><span class="line"><span class="comment"># 233</span></span><br></pre></td></tr></table></figure>

<p>当你有一个多行块时，你可以用 <code>do</code> 和 <code>end</code> 替换花括号 <code>&#123;&#125;</code></p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">salary.each <span class="keyword">do</span> |<span class="params">s</span>|</span><br><span class="line">  a = <span class="number">10</span></span><br><span class="line">  res = a * s</span><br><span class="line">  puts res</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 3990</span></span><br><span class="line"><span class="comment"># 2340</span></span><br><span class="line"><span class="comment"># 5660</span></span><br><span class="line"><span class="comment"># 5330</span></span><br><span class="line"><span class="comment"># 2330</span></span><br></pre></td></tr></table></figure>

<p>或者您可以使用大括号 {} 和分号作为分隔符而不是换行符来做同样的事情</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">salary.each &#123; |<span class="params">s</span>| a = <span class="number">10</span> ; res = a * s ; puts res &#125;</span><br></pre></td></tr></table></figure>

<h3 id="each-with-index"><a href="#each-with-index" class="headerlink" title="each_with_index"></a>each_with_index</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">salary = [<span class="number">399</span>, <span class="number">234</span>, <span class="number">566</span>, <span class="number">533</span>, <span class="number">233</span>]</span><br><span class="line">salary.each_with_index &#123; |<span class="params">value, index</span>| puts <span class="string">&quot;<span class="subst">#&#123;index&#125;</span> <span class="subst">#&#123;value&#125;</span>&quot;</span> &#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 0 399</span></span><br><span class="line"><span class="comment"># 1 234</span></span><br><span class="line"><span class="comment"># 2 566</span></span><br><span class="line"><span class="comment"># 3 533</span></span><br><span class="line"><span class="comment"># 4 233</span></span><br></pre></td></tr></table></figure>

<h3 id="each-index"><a href="#each-index" class="headerlink" title="each_index"></a>each_index</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">salary = [<span class="number">399</span>, <span class="number">234</span>, <span class="number">566</span>, <span class="number">533</span>, <span class="number">233</span>]</span><br><span class="line">salary.each_index &#123; |<span class="params">i</span>| puts i&#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 0</span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 4</span></span><br></pre></td></tr></table></figure>

<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">salary = [<span class="number">399</span>, <span class="number">234</span>, <span class="number">566</span>, <span class="number">533</span>, <span class="number">233</span>]</span><br><span class="line">salary.map &#123; |<span class="params">s</span>|  s * <span class="number">10</span>  &#125;</span><br><span class="line"><span class="comment"># 返回</span></span><br><span class="line"><span class="comment"># [3990, 2340, 5660, 5330, 2330]</span></span><br><span class="line"><span class="comment"># 另一方面，每个都返回原始值</span></span><br><span class="line">salary = [<span class="number">399</span>, <span class="number">234</span>, <span class="number">566</span>, <span class="number">533</span>, <span class="number">233</span>]</span><br><span class="line">salary.each &#123; |<span class="params">s</span>|  s * <span class="number">10</span>  &#125;</span><br><span class="line"><span class="comment"># 返回</span></span><br><span class="line"><span class="comment"># [399, 234, 566, 533, 233]</span></span><br></pre></td></tr></table></figure>

<h3 id="collect"><a href="#collect" class="headerlink" title="collect"></a>collect</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">salary = [<span class="number">399</span>, <span class="number">234</span>, <span class="number">566</span>, <span class="number">533</span>, <span class="number">233</span>]</span><br><span class="line">salary.collect &#123; |<span class="params">s</span>| s &gt; <span class="number">400</span> &#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># [false, false, true, true, false]</span></span><br></pre></td></tr></table></figure>

<h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>]</span><br><span class="line">    puts value</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="each-with-object"><a href="#each-with-object" class="headerlink" title="each_with_object"></a>each_with_object</h3><!--rehype:wrap-class=col-span-2-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">colors = [</span><br><span class="line">  &#123;<span class="symbol">color:</span> <span class="string">&quot;red&quot;</span>, <span class="symbol">count:</span> <span class="number">3</span>&#125;, &#123;<span class="symbol">color:</span> <span class="string">&quot;red&quot;</span>, <span class="symbol">count:</span> <span class="number">5</span>&#125;, &#123;<span class="symbol">color:</span> <span class="string">&quot;black&quot;</span>, <span class="symbol">count:</span> <span class="number">4</span>&#125;</span><br><span class="line">]</span><br><span class="line">colors.each_with_object(<span class="title class_">Hash</span>.new(<span class="number">0</span>)) &#123; |<span class="params">color, hash</span>| hash[<span class="string">&quot;color_&quot;</span>+color[<span class="symbol">:color</span>]] = color[<span class="symbol">:color</span>].upcase; hash[<span class="string">&quot;count_&quot;</span>+color[<span class="symbol">:color</span>]] += color[<span class="symbol">:count</span>] &#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">&#123;<span class="string">&quot;color_red&quot;</span>=&gt;<span class="string">&quot;RED&quot;</span>, <span class="string">&quot;count_red&quot;</span>=&gt;<span class="number">8</span>, <span class="string">&quot;color_black&quot;</span>=&gt;<span class="string">&quot;BLACK&quot;</span>, <span class="string">&quot;count_black&quot;</span>=&gt;<span class="number">4</span>&#125;</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].each_with_object(<span class="number">0</span>) &#123; |<span class="params">number, sum</span>| sum += number&#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 0</span></span><br><span class="line"><span class="comment"># 因为0是不可变的，由于初始对象是0，所以方法返回0</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">planets = [<span class="string">&quot;Mercury&quot;</span>, <span class="string">&quot;Venus&quot;</span>, <span class="string">&quot;Earth&quot;</span>, <span class="string">&quot;Mars&quot;</span>, <span class="string">&quot;Jupiter&quot;</span>, <span class="string">&quot;Saturn&quot;</span>, <span class="string">&quot;Uranus&quot;</span>, <span class="string">&quot;Neptune&quot;</span>]</span><br><span class="line">index = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> index &lt; planets.size</span><br><span class="line">    puts <span class="string">&quot;<span class="subst">#&#123;planets[index]&#125;</span>&quot;</span></span><br><span class="line">    index += <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->
<hr>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line">star = <span class="string">&#x27;*&#x27;</span></span><br><span class="line"><span class="keyword">while</span> a &lt;= <span class="number">10</span></span><br><span class="line">    puts star</span><br><span class="line">    star += <span class="string">&#x27;*&#x27;</span></span><br><span class="line">    a += <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="do-while"><a href="#do-while" class="headerlink" title="do while"></a>do while</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">planets = [<span class="string">&quot;Mercury&quot;</span>, <span class="string">&quot;Venus&quot;</span>, <span class="string">&quot;Earth&quot;</span>, <span class="string">&quot;Mars&quot;</span>, <span class="string">&quot;Jupiter&quot;</span>, <span class="string">&quot;Saturn&quot;</span>, <span class="string">&quot;Uranus&quot;</span>, <span class="string">&quot;Neptune&quot;</span>]</span><br><span class="line">index = <span class="number">0</span></span><br><span class="line">loop <span class="keyword">do</span></span><br><span class="line">    puts <span class="string">&quot;<span class="subst">#&#123;planets[index]&#125;</span>&quot;</span></span><br><span class="line">    index += <span class="number">1</span></span><br><span class="line">    <span class="keyword">break</span> <span class="keyword">if</span> planets[index] == <span class="string">&quot;Mars&quot;</span> <span class="keyword">or</span> index &gt; planets.size</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="until"><a href="#until" class="headerlink" title="until"></a>until</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">planets = [<span class="string">&quot;Mercury&quot;</span>, <span class="string">&quot;Venus&quot;</span>, <span class="string">&quot;Earth&quot;</span>, <span class="string">&quot;Mars&quot;</span>, <span class="string">&quot;Jupiter&quot;</span>, <span class="string">&quot;Saturn&quot;</span>, <span class="string">&quot;Uranus&quot;</span>, <span class="string">&quot;Neptune&quot;</span>]</span><br><span class="line">index = planets.size - <span class="number">1</span></span><br><span class="line"><span class="keyword">until</span> index &lt; <span class="number">0</span></span><br><span class="line">    puts <span class="string">&quot;<span class="subst">#&#123;planets[index]&#125;</span>&quot;</span></span><br><span class="line">    index -= <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line">star = <span class="string">&#x27;*&#x27;</span></span><br><span class="line"><span class="keyword">until</span> star.length &gt; <span class="number">10</span></span><br><span class="line">    puts star</span><br><span class="line">    star += <span class="string">&#x27;*&#x27;</span></span><br><span class="line">    a += <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="times"><a href="#times" class="headerlink" title="times"></a>times</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="number">10</span>.times &#123; puts <span class="string">&quot;<span class="subst">#&#123;rand(<span class="number">1</span>..<span class="number">100</span>)&#125;</span>&quot;</span>&#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 将打印 10 个随机数</span></span><br></pre></td></tr></table></figure>

<p>仅仅因为你可以并不意味着你应该像这样迭代一个数组</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">data_sample = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>]</span><br><span class="line">data_sample.size.times &#123; |<span class="params">index</span>| puts <span class="string">&quot;<span class="subst">#&#123;data_sample[index]&#125;</span>&quot;</span> &#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 5</span></span><br><span class="line"><span class="comment"># 7</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="upto"><a href="#upto" class="headerlink" title="upto"></a>upto</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">data_sample = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>]</span><br><span class="line"><span class="number">0</span>.upto((data_sample.size - <span class="number">1</span>) / <span class="number">2</span>) &#123; |<span class="params">index</span>| puts <span class="string">&quot;<span class="subst">#&#123;data_sample[index]&#125;</span>&quot;</span> &#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 3</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="downto"><a href="#downto" class="headerlink" title="downto"></a>downto</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">data_sample = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>]</span><br><span class="line">(data_sample.size - <span class="number">1</span>).downto(data_sample.size / <span class="number">2</span>) &#123; |<span class="params">index</span>| puts <span class="string">&quot;<span class="subst">#&#123;data_sample[index]&#125;</span>&quot;</span> &#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 7</span></span><br><span class="line"><span class="comment"># 5</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="step"><a href="#step" class="headerlink" title="step"></a>step</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>.step(<span class="number">20</span>, <span class="number">2</span>) &#123; |<span class="params">number</span>| puts <span class="string">&quot;<span class="subst">#&#123;number&#125;</span>&quot;</span>&#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 5</span></span><br><span class="line"><span class="comment"># 7</span></span><br><span class="line"><span class="comment"># 9</span></span><br><span class="line"><span class="comment"># 11</span></span><br><span class="line"><span class="comment"># 13</span></span><br><span class="line"><span class="comment"># 15</span></span><br><span class="line"><span class="comment"># 17</span></span><br><span class="line"><span class="comment"># 19</span></span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="number">19</span>.step(<span class="number">1</span>, -<span class="number">2</span>) &#123; |<span class="params">number</span>| puts <span class="string">&quot;<span class="subst">#&#123;number&#125;</span>&quot;</span>&#125;</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 19</span></span><br><span class="line"><span class="comment"># 17</span></span><br><span class="line"><span class="comment"># 15</span></span><br><span class="line"><span class="comment"># 13</span></span><br><span class="line"><span class="comment"># 11</span></span><br><span class="line"><span class="comment"># 9</span></span><br><span class="line"><span class="comment"># 7</span></span><br><span class="line"><span class="comment"># 5</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 1</span></span><br></pre></td></tr></table></figure>

<h3 id="inject"><a href="#inject" class="headerlink" title="inject"></a>inject</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">numbers.inject&#123; |<span class="params">res, n</span>| res + n &#125;</span><br><span class="line"><span class="comment"># 输出是所有数字之和的结果</span></span><br><span class="line"><span class="comment"># 如果不给res设置初始值，则数组的第一个元素作为res的初始值</span></span><br><span class="line"><span class="comment"># 10</span></span><br><span class="line"><span class="comment"># 现在将 res 的值设置为 11</span></span><br><span class="line">numbers = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">numbers.inject(<span class="number">11</span>) &#123; |<span class="params">res, n</span>| res + n &#125;</span><br><span class="line"><span class="comment"># so 11 + 2, 13 + 2, 15 + 2, 17 + 2 and 19 + 2</span></span><br><span class="line"><span class="comment"># 21</span></span><br><span class="line"><span class="comment"># using symbol</span></span><br><span class="line">numbers = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">numbers.inject(<span class="symbol">:+</span>)</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 10</span></span><br></pre></td></tr></table></figure>

<p>使用初始值和符号</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">numbers.inject(<span class="number">11</span>, <span class="symbol">:+</span>)</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 21</span></span><br></pre></td></tr></table></figure>

<h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">numbers.reduce(<span class="number">11</span>, <span class="symbol">:+</span>)</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 21</span></span><br></pre></td></tr></table></figure>

<h3 id="detect"><a href="#detect" class="headerlink" title="detect"></a>detect</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">planets = [<span class="string">&quot;Mercury&quot;</span>, <span class="string">&quot;Venus&quot;</span>, <span class="string">&quot;Earth&quot;</span>, <span class="string">&quot;Mars&quot;</span>, <span class="string">&quot;Jupiter&quot;</span>, <span class="string">&quot;Saturn&quot;</span>, <span class="string">&quot;Uranus&quot;</span>, <span class="string">&quot;Neptune&quot;</span>]</span><br><span class="line">planets.detect &#123; |<span class="params">name</span>| name.start_with?(<span class="string">&quot;E&quot;</span>) <span class="keyword">and</span> name.end_with?(<span class="string">&quot;h&quot;</span>) &#125;</span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="comment"># Earth</span></span><br><span class="line">salary = [<span class="number">399</span>, <span class="number">234</span>, <span class="number">566</span>, <span class="number">533</span>, <span class="number">233</span>]</span><br><span class="line">salary.detect &#123; |<span class="params">s</span>| s &gt; <span class="number">1000</span> &#125;</span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="comment"># nil</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">planets = [<span class="string">&quot;Mercury&quot;</span>, <span class="string">&quot;Venus&quot;</span>, <span class="string">&quot;Earth&quot;</span>, <span class="string">&quot;Mars&quot;</span>, <span class="string">&quot;Jupiter&quot;</span>, <span class="string">&quot;Saturn&quot;</span>, <span class="string">&quot;Uranus&quot;</span>, <span class="string">&quot;Neptune&quot;</span>]</span><br><span class="line">planets.find &#123; |<span class="params">name</span>| name.start_with?(<span class="string">&quot;E&quot;</span>) <span class="keyword">and</span> name.end_with?(<span class="string">&quot;h&quot;</span>) &#125;</span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="comment"># Earth</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">numbers.select &#123; |<span class="params">n</span>| n % <span class="number">2</span> == <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment"># 现在你有一个偶数数组</span></span><br><span class="line"><span class="comment"># [2, 4, 6, 8, 10]</span></span><br><span class="line"><span class="comment"># 如果没有满足您的逻辑的值，则返回一个空数组</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>].select &#123; |<span class="params">n</span>| n % <span class="number">2</span> == <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment"># no even numbers</span></span><br><span class="line"><span class="comment"># []</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="reject"><a href="#reject" class="headerlink" title="reject"></a>reject</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">numbers.reject &#123; |<span class="params">n</span>| n % <span class="number">2</span> == <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment"># 如果数字是偶数则拒绝，所以现在我们有一个奇数数组</span></span><br><span class="line"><span class="comment"># [1, 3, 5, 7, 9]</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="keep-if"><a href="#keep-if" class="headerlink" title="keep_if"></a>keep_if</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">numbers.keep_if &#123; |<span class="params">n</span>| n % <span class="number">2</span> == <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment"># numbers 数组仅包含偶数</span></span><br><span class="line"><span class="comment"># [2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="delete-if"><a href="#delete-if" class="headerlink" title="delete_if"></a>delete_if</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">numbers.delete_if &#123; |<span class="params">n</span>| n % <span class="number">2</span> == <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment"># numbers 数组仅包含奇数</span></span><br><span class="line"><span class="comment"># [1, 3, 5, 7, 9]</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="drop-while"><a href="#drop-while" class="headerlink" title="drop_while"></a>drop_while</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>]</span><br><span class="line">numbers.drop_while &#123; |<span class="params">n</span>| n &lt; <span class="number">3</span> &#125;</span><br><span class="line"><span class="comment"># 是 3 小于 3，返回 false，所以删除 1, 2</span></span><br><span class="line"><span class="comment"># [3, 1, 2, 3, 0]</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="reverse-each"><a href="#reverse-each" class="headerlink" title="reverse_each"></a>reverse_each</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">words = <span class="string">%w[first second third fourth fifth sixth]</span></span><br><span class="line">str = <span class="string">&quot;&quot;</span></span><br><span class="line">words.reverse_each &#123;|<span class="params">word</span>| str += <span class="string">&quot;<span class="subst">#&#123;word&#125;</span> &quot;</span>&#125;</span><br><span class="line">p str <span class="comment">#=&gt; &quot;sixth fifth fourth third second first &quot;</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h2 id="布尔可枚举方法"><a href="#布尔可枚举方法" class="headerlink" title="布尔可枚举方法"></a>布尔可枚举方法</h2><h3 id="布尔可枚举方法-1"><a href="#布尔可枚举方法-1" class="headerlink" title="布尔可枚举方法"></a>布尔可枚举方法</h3><!--rehype:wrap-class=row-span-2-->

<table>
<thead>
<tr>
<th align="left">Name</th>
<th>When to use</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>all?</code></td>
<td>当您想检查所有元素是否满足您的条件时</td>
</tr>
<tr>
<td align="left"><code>any?</code></td>
<td>当您想检查至少一项是否满足您的条件时</td>
</tr>
<tr>
<td align="left"><code>one?</code></td>
<td>当您想检查一个元素是否满足您的要求时</td>
</tr>
<tr>
<td align="left"><code>none?</code></td>
<td>当您想检查是否没有任何项目满足您的条件时，相反？</td>
</tr>
<tr>
<td align="left"><code>empty?</code></td>
<td>当你想检查对象是否为空时</td>
</tr>
<tr>
<td align="left"><code>include?</code></td>
<td>当你想检查元素是否存在于对象中时</td>
</tr>
</tbody></table>
<h3 id="all"><a href="#all" class="headerlink" title="all?"></a>all?</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>].all? &#123; |<span class="params">num</span>| num % <span class="number">2</span> == <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment"># true</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>].all? &#123; |<span class="params">num</span>| num % <span class="number">2</span> == <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment"># false</span></span><br></pre></td></tr></table></figure>

<h3 id="any"><a href="#any" class="headerlink" title="any?"></a>any?</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">10</span>].any? &#123; |<span class="params">num</span>| num % <span class="number">2</span> == <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment"># true</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">19</span>].any? &#123; |<span class="params">num</span>| num % <span class="number">2</span> == <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment"># false</span></span><br></pre></td></tr></table></figure>

<h3 id="one"><a href="#one" class="headerlink" title="one?"></a>one?</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">7</span>].one? &#123; |<span class="params">num</span>| num % <span class="number">2</span> == <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment"># true</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">4</span>].one? &#123; |<span class="params">num</span>| num % <span class="number">2</span> == <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment"># false</span></span><br></pre></td></tr></table></figure>

<h3 id="none"><a href="#none" class="headerlink" title="none?"></a>none?</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>].none? &#123; |<span class="params">num</span>| num % <span class="number">2</span> == <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment"># true</span></span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>].none? &#123; |<span class="params">num</span>| num % <span class="number">2</span> == <span class="number">0</span> &#125;</span><br><span class="line"><span class="comment"># false</span></span><br></pre></td></tr></table></figure>

<h3 id="empty"><a href="#empty" class="headerlink" title="empty?"></a>empty?</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">[].empty?</span><br><span class="line"><span class="comment"># true</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>].empty?</span><br><span class="line"><span class="comment"># false</span></span><br></pre></td></tr></table></figure>

<h2 id="组合方法"><a href="#组合方法" class="headerlink" title="组合方法"></a>组合方法</h2><h3 id="组合方法-1"><a href="#组合方法-1" class="headerlink" title="组合方法"></a>组合方法</h3><!--rehype:wrap-class=row-span-2-->

<ul>
<li><code>&amp;</code>            返回一个新数组，其中包含在数组和数组 other_array 中找到的每个元素；省略重复；使用 eql? 比较项目</li>
<li><code>intersection</code> 返回一个新数组，其中包含在 self 和所有给定数组 other_arrays 中找到的每个元素；省略重复；使用 eql? 比较项目</li>
<li><code>+</code>            返回一个数组，该数组包含 self 的所有元素，后跟给定数组的所有元素</li>
<li><code>-</code>            返回一个数组，其中包含在给定数组中找不到的所有 self 元素</li>
<li><code>union</code>        返回一个数组，其中包含 self 的所有元素和给定数组的所有元素，已删除重复项</li>
<li><code>difference</code>   返回一个数组，其中包含在任何给定数组中找不到的所有 self 元素</li>
<li><code>product</code>      返回或产生来自 self 和给定数组的所有元素组合</li>
</ul>
<h3 id=""><a href="#" class="headerlink" title="&amp;"></a>&amp;</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] &amp; [<span class="number">1</span>, <span class="number">2</span>] <span class="comment"># =&gt; [1, 2]</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>] &amp; [<span class="number">0</span>, <span class="number">1</span>] <span class="comment"># =&gt; [0, 1]</span></span><br></pre></td></tr></table></figure>

<h3 id="intersection"><a href="#intersection" class="headerlink" title="intersection"></a>intersection</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].intersection([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>])</span><br><span class="line"><span class="comment"># =&gt; [0, 1]</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].intersection([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>])</span><br><span class="line"><span class="comment"># =&gt; [0, 1]</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h3 id="-1"><a href="#-1" class="headerlink" title="+"></a>+</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">0</span>, <span class="number">1</span>] + [<span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">a <span class="comment"># =&gt; [0, 1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="-2"><a href="#-2" class="headerlink" title="-"></a>-</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>] - [<span class="number">1</span>] </span><br><span class="line"><span class="comment"># =&gt; [0, 2, 3]</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] - [<span class="number">3</span>, <span class="number">0</span>] </span><br><span class="line"><span class="comment"># =&gt; [1, 2]</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>] - [<span class="number">4</span>] </span><br><span class="line"><span class="comment"># =&gt; [0, 1, 2]</span></span><br></pre></td></tr></table></figure>

<h3 id="union"><a href="#union" class="headerlink" title="union"></a>union</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].union([<span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>]) </span><br><span class="line"><span class="comment"># =&gt; [0, 1, 2, 3, 4, 5, 6, 7]</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>].union([<span class="number">2</span>, <span class="number">1</span>], [<span class="number">3</span>, <span class="number">1</span>]) </span><br><span class="line"><span class="comment"># =&gt; [0, 1, 2, 3]</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].union([<span class="number">3</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">0</span>]) </span><br><span class="line"><span class="comment"># =&gt; [0, 1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="difference"><a href="#difference" class="headerlink" title="difference"></a>difference</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>].difference([<span class="number">1</span>])</span><br><span class="line"><span class="comment"># =&gt; [0, 2, 3]</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].difference([<span class="number">3</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">3</span>])</span><br><span class="line"><span class="comment"># =&gt; [2]</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>].difference([<span class="number">4</span>])</span><br><span class="line"><span class="comment"># =&gt; [0, 1, 2]</span></span><br></pre></td></tr></table></figure>

<h3 id="product"><a href="#product" class="headerlink" title="product"></a>product</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">a1 = [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">p = a.product(a1)</span><br><span class="line">p.size <span class="comment"># =&gt; 6 # a.size * a1.size</span></span><br><span class="line">p <span class="comment"># =&gt; [[0, 3], [0, 4], [1, 3], [1, 4], [2, 3], [2, 4]]</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><h3 id="while-循环"><a href="#while-循环" class="headerlink" title="while 循环"></a>while 循环</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># variable count</span></span><br><span class="line">count = <span class="number">4</span></span><br><span class="line"><span class="comment"># using while loop</span></span><br><span class="line"><span class="comment"># here conditional is count i.e. 4</span></span><br><span class="line"><span class="keyword">while</span> count &gt;= <span class="number">1</span></span><br><span class="line">  <span class="comment"># statements to be executed</span></span><br><span class="line">  puts <span class="string">&quot;Ruby Cheatsheet&quot;</span></span><br><span class="line">  count = count - <span class="number">1</span></span><br><span class="line">  <span class="comment"># while loop ends here</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Ruby Cheatsheet</span><br><span class="line">Ruby Cheatsheet</span><br><span class="line">Ruby Cheatsheet</span><br><span class="line">Ruby Cheatsheet</span><br></pre></td></tr></table></figure>

<h3 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a>for 循环</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># loop using range as expression</span></span><br><span class="line">text = <span class="string">&quot;Ruby Cheatsheet&quot;</span></span><br><span class="line"><span class="comment"># using for loop with the range</span></span><br><span class="line"><span class="keyword">for</span> count <span class="keyword">in</span> <span class="number">1</span>..<span class="number">5</span> <span class="keyword">do</span></span><br><span class="line">  puts text</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Ruby Cheatsheet</span><br><span class="line">Ruby Cheatsheet</span><br><span class="line">Ruby Cheatsheet</span><br><span class="line">Ruby Cheatsheet</span><br><span class="line">Ruby Cheatsheet</span><br></pre></td></tr></table></figure>

<h3 id="do-while-循环"><a href="#do-while-循环" class="headerlink" title="do..while 循环"></a>do..while 循环</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="comment"># starting of do..while loop</span></span><br><span class="line">loop <span class="keyword">do</span></span><br><span class="line">  puts <span class="string">&quot;Ruby Cheatsheet&quot;</span></span><br><span class="line">  val = <span class="string">&#x27;7&#x27;</span></span><br><span class="line">  <span class="comment"># using boolean expressions</span></span><br><span class="line">  <span class="keyword">if</span> val == <span class="string">&#x27;7&#x27;</span></span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="comment"># ending of ruby do..while loop</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Ruby Cheatsheet</span><br></pre></td></tr></table></figure>

<h3 id="until-循环"><a href="#until-循环" class="headerlink" title="until 循环"></a>until 循环</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">var = <span class="number">7</span></span><br><span class="line"><span class="comment"># here do is optional</span></span><br><span class="line"><span class="keyword">until</span> var == <span class="number">11</span> <span class="keyword">do</span></span><br><span class="line">  <span class="comment"># code to be executed</span></span><br><span class="line">  puts var * <span class="number">10</span></span><br><span class="line">  var = var + <span class="number">1</span></span><br><span class="line">  <span class="comment"># here loop ends</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">70</span><br><span class="line">80</span><br><span class="line">90</span><br><span class="line">100</span><br></pre></td></tr></table></figure>

<h3 id="跳出循环"><a href="#跳出循环" class="headerlink" title="跳出循环"></a>跳出循环</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">salary = [<span class="number">399</span>, <span class="number">234</span>, <span class="number">566</span>, <span class="number">533</span>, <span class="number">233</span>]</span><br><span class="line">salary.each <span class="keyword">do</span> |<span class="params">s</span>|</span><br><span class="line">  <span class="keyword">break</span> <span class="keyword">if</span> s == <span class="number">566</span></span><br><span class="line">  puts s</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 399</span></span><br><span class="line"><span class="comment"># 234</span></span><br></pre></td></tr></table></figure>

<p>通过使用 <code>break</code> 关键字</p>
<h3 id="在循环内跳过"><a href="#在循环内跳过" class="headerlink" title="在循环内跳过"></a>在循环内跳过</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">salary = [<span class="number">399</span>, <span class="number">234</span>, <span class="number">566</span>, <span class="number">533</span>, <span class="number">233</span>]</span><br><span class="line">salary.each <span class="keyword">do</span> |<span class="params">s</span>|</span><br><span class="line">  <span class="keyword">next</span> <span class="keyword">if</span> s == <span class="number">533</span></span><br><span class="line">  puts s</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 399</span></span><br><span class="line"><span class="comment"># 234</span></span><br><span class="line"><span class="comment"># 566</span></span><br><span class="line"><span class="comment"># 233</span></span><br></pre></td></tr></table></figure>

<p>通过使用 next 关键字</p>
<h3 id="重复当前迭代"><a href="#重复当前迭代" class="headerlink" title="重复当前迭代"></a>重复当前迭代</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">data = [<span class="number">456</span>, <span class="number">3000</span>]</span><br><span class="line">retry_count = <span class="number">0</span></span><br><span class="line">status = <span class="string">&quot;network failure&quot;</span></span><br><span class="line">sum = <span class="number">0</span></span><br><span class="line">data.each <span class="keyword">do</span> |<span class="params">d</span>|</span><br><span class="line">    <span class="keyword">if</span> retry_count == <span class="number">3</span></span><br><span class="line">        status = <span class="string">&quot;connection established&quot;</span></span><br><span class="line">        retry_count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">redo</span></span><br><span class="line">    <span class="keyword">elsif</span> status == <span class="string">&quot;network failure&quot;</span> <span class="keyword">and</span> retry_count &lt; <span class="number">5</span></span><br><span class="line">        puts <span class="string">&quot;network failure <span class="subst">#&#123;retry_count&#125;</span>&quot;</span></span><br><span class="line">        retry_count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">redo</span></span><br><span class="line">    <span class="keyword">elsif</span> status == <span class="string">&quot;connection established&quot;</span></span><br><span class="line">        puts d</span><br><span class="line">        sum += d</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># output of sum</span></span><br><span class="line"><span class="comment"># 3456</span></span><br></pre></td></tr></table></figure>

<h3 id="重新开始循环"><a href="#重新开始循环" class="headerlink" title="重新开始循环"></a>重新开始循环</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">numbers = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">44</span>, <span class="number">44</span>]</span><br><span class="line">sum = <span class="number">0</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    numbers.each <span class="keyword">do</span> |<span class="params">s</span>|</span><br><span class="line">        <span class="keyword">if</span> rand(<span class="number">1</span>..<span class="number">10</span>) == <span class="number">5</span></span><br><span class="line">            puts <span class="string">&quot;hi 5, let&#x27;s do it again!&quot;</span></span><br><span class="line">            sum = <span class="number">0</span></span><br><span class="line">            <span class="keyword">raise</span> <span class="string">&quot;hi 5&quot;</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        puts s</span><br><span class="line">        sum += s</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">rescue</span></span><br><span class="line">    <span class="keyword">retry</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h2 id="Classes"><a href="#Classes" class="headerlink" title="Classes"></a>Classes</h2><h3 id="Classes-示例"><a href="#Classes-示例" class="headerlink" title="Classes 示例"></a>Classes 示例</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">    <span class="comment"># when you create a new object, it looks for a method named initialize and executes it, like a constructor in java</span></span><br><span class="line">    <span class="comment"># def initialize(name, number)</span></span><br><span class="line">    <span class="comment">#    <span class="doctag">@name</span> = name</span></span><br><span class="line">    <span class="comment">#    <span class="doctag">@number</span> = number</span></span><br><span class="line">    <span class="comment"># end</span></span><br><span class="line">    <span class="comment"># instance variable</span></span><br><span class="line">    <span class="comment"># <span class="doctag">@name</span></span></span><br><span class="line">    <span class="comment"># class variable</span></span><br><span class="line">    <span class="comment"># @<span class="doctag">@count</span></span></span><br><span class="line">    <span class="comment"># attr_accessor acts as a getter and setter for the following instance attributes</span></span><br><span class="line">    <span class="built_in">attr_accessor</span> <span class="symbol">:name</span>, <span class="symbol">:number</span></span><br><span class="line">    <span class="comment"># class variable must be initialized</span></span><br><span class="line">    <span class="variable">@@count</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">self</span>.count</span><br><span class="line">        <span class="variable">@@count</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">self</span>.count=(count)</span><br><span class="line">        <span class="variable">@@count</span> = count</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initialize</span></span><br><span class="line">        <span class="variable">@@count</span> += <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># create an instance of the Person class</span></span><br><span class="line">p1 = <span class="title class_">Person</span>.new</span><br><span class="line"><span class="comment"># set attributes of the Person class</span></span><br><span class="line">p1.name = <span class="string">&quot;Yukihiro Matsumoto&quot;</span></span><br><span class="line">p1.number = <span class="number">9999999999</span></span><br><span class="line"><span class="comment"># get attributes of the Person class</span></span><br><span class="line">puts <span class="string">&quot;<span class="subst">#&#123;p1.name&#125;</span>&quot;</span></span><br><span class="line">puts <span class="string">&quot;<span class="subst">#&#123;p1.number&#125;</span>&quot;</span></span><br><span class="line">puts <span class="string">&quot;<span class="subst">#&#123;<span class="title class_">Person</span>.count&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># Yukihiro Matsumoto</span></span><br><span class="line"><span class="comment"># 9999999999</span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line">p2 = <span class="title class_">Person</span>.new</span><br><span class="line">p2.name = <span class="string">&quot;Yukihiro Matsumoto&quot;</span></span><br><span class="line">p2.number = <span class="number">9999999999</span></span><br><span class="line"><span class="comment"># get attributes of the Person class</span></span><br><span class="line">puts <span class="string">&quot;<span class="subst">#&#123;p2.name&#125;</span>&quot;</span></span><br><span class="line">puts <span class="string">&quot;<span class="subst">#&#123;p2.number&#125;</span>&quot;</span></span><br><span class="line">puts <span class="string">&quot;<span class="subst">#&#123;<span class="title class_">Person</span>.count&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># Yukihiro Matsumoto</span></span><br><span class="line"><span class="comment"># 9999999999</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># set class variable</span></span><br><span class="line"><span class="title class_">Person</span>.count = <span class="number">3</span></span><br><span class="line">puts <span class="string">&quot;<span class="subst">#&#123;<span class="title class_">Person</span>.count&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># 3</span></span><br></pre></td></tr></table></figure>

<h3 id="继承一个类"><a href="#继承一个类" class="headerlink" title="继承一个类"></a>继承一个类</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">    <span class="built_in">attr_accessor</span> <span class="symbol">:name</span>, <span class="symbol">:number</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># 使用 &lt; 符号从父类继承方法和属性</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &lt; <span class="title class_ inherited__">Person</span></span><br><span class="line">    <span class="built_in">attr_accessor</span> <span class="symbol">:id</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">s = <span class="title class_">Student</span>.new</span><br><span class="line">s.name = <span class="string">&quot;James Bond&quot;</span></span><br><span class="line">s.number = <span class="number">700</span></span><br><span class="line">s.id = <span class="number">678</span></span><br><span class="line">puts <span class="string">&quot;<span class="subst">#&#123;p.name&#125;</span>&quot;</span></span><br><span class="line"><span class="title class_">James</span> <span class="title class_">Bond</span></span><br><span class="line">puts <span class="string">&quot;<span class="subst">#&#123;p.number&#125;</span>&quot;</span></span><br><span class="line"><span class="number">700</span></span><br><span class="line">puts <span class="string">&quot;<span class="subst">#&#123;p.id&#125;</span>&quot;</span></span><br><span class="line"><span class="number">678</span></span><br></pre></td></tr></table></figure>

<h3 id="检查实例类型"><a href="#检查实例类型" class="headerlink" title="检查实例类型"></a>检查实例类型</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vehicle</span>; <span class="keyword">end</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &lt; <span class="title class_ inherited__">Vehicle</span>; <span class="keyword">end</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Audi</span> &lt; <span class="title class_ inherited__">Car</span>; <span class="keyword">end</span></span><br><span class="line">car = <span class="title class_">Car</span>.new</span><br><span class="line">car.instance_of? <span class="title class_">Vehicle</span></span><br><span class="line"><span class="literal">false</span></span><br><span class="line">car.instance_of? <span class="title class_">Car</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line">car.instance_of? <span class="title class_">Audi</span></span><br><span class="line"><span class="literal">false</span></span><br><span class="line">a = <span class="number">7</span></span><br><span class="line">a.instance_of? <span class="title class_">Integer</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line">a.instance_of? <span class="title class_">Numeric</span></span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>如果对象是给定类的实例，而不是子类或超类，则返回 true</p>
<h3 id="打印一个类的所有方法名"><a href="#打印一个类的所有方法名" class="headerlink" title="打印一个类的所有方法名"></a>打印一个类的所有方法名</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">puts (<span class="title class_">String</span>.methods).sort</span><br><span class="line"><span class="comment"># 排除从 Object 类继承的方法</span></span><br><span class="line">puts (<span class="title class_">String</span>.methods - <span class="title class_">Object</span>.public_instance_methods).sort</span><br></pre></td></tr></table></figure>

<h3 id="检查一个类是否有特定的方法"><a href="#检查一个类是否有特定的方法" class="headerlink" title="检查一个类是否有特定的方法"></a>检查一个类是否有特定的方法</h3><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="title class_">String</span>.respond_to?(<span class="symbol">:prepend</span>)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="title class_">String</span>.respond_to?(<span class="symbol">:append</span>)</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h2 id="另见"><a href="#另见" class="headerlink" title="另见"></a>另见</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.ruby-lang.org/en/">Ruby 官网</a> <em>(ruby-lang.org)</em></li>
<li><a target="_blank" rel="noopener" href="https://github.com/lifeparticle/Ruby-Cheatsheet">Ruby Cheatsheet</a> <em>(github.com)</em></li>
</ul>
</div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">毅栈</div><div class="author-info__description">记录生活，分享技术。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/caoyixiong"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;amp;uin=409677557&amp;amp;site=qq&amp;amp;menu=yes" target="_blank" title="QQ"><i class="fab fa-qq" style="color: #24292e;"></i></a><a class="social-icon" href="/img/wechat.jpg" target="_blank" title="微信"><i class="fab fa-weixin" style="color: #24292e;"></i></a><a class="social-icon" href="https://github.com/caoyixiong" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:409677557@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">如果阅读过程中遇到了问题，请及时评论或者留言，看到了会在第一时间给出回复。</div></div><!-- !=partial('includes/widget/card_wx', {}, {cache: true})--><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/adab0374.html" title="Node 多版本管理">Node 多版本管理</a><time datetime="2024-08-27T12:54:37.582Z" title="发表于 2024-08-27 20:54:37">2024-08-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/5c3d4808.html" title="第一个Go程序">第一个Go程序</a><time datetime="2024-08-23T16:46:21.634Z" title="发表于 2024-08-24 00:46:21">2024-08-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/65b9ed48.html" title="GOPATH">GOPATH</a><time datetime="2024-08-21T16:28:07.159Z" title="发表于 2024-08-22 00:28:07">2024-08-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/6b9fbde2.html" title="Gin 快速入门">Gin 快速入门</a><time datetime="2024-08-19T17:27:21.321Z" title="发表于 2024-08-20 01:27:21">2024-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/a25657cf.html" title="Go 环境搭建">Go 环境搭建</a><time datetime="2024-08-19T17:27:21.321Z" title="发表于 2024-08-20 01:27:21">2024-08-20</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Go/"><span class="card-category-list-name">Go</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Node/"><span class="card-category-list-name">Node</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Ubuntu/"><span class="card-category-list-name">Ubuntu</span><span class="card-category-list-count">3</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Crontab/" style="font-size: 1.1em; color: #999">Crontab</a> <a href="/tags/Go/" style="font-size: 1.5em; color: #99a9bf">Go</a> <a href="/tags/AWK/" style="font-size: 1.1em; color: #999">AWK</a> <a href="/tags/LAMP/" style="font-size: 1.1em; color: #999">LAMP</a> <a href="/tags/%E4%B8%BB%E9%A2%98/" style="font-size: 1.1em; color: #999">主题</a> <a href="/tags/Gin/" style="font-size: 1.1em; color: #999">Gin</a> <a href="/tags/Nvm/" style="font-size: 1.1em; color: #999">Nvm</a> <a href="/tags/LNMP/" style="font-size: 1.1em; color: #999">LNMP</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">2024年08月</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/07/"><span class="card-archive-list-date">2020年07月</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/03/"><span class="card-archive-list-date">2020年03月</span><span class="card-archive-list-count">4</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">12</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2016-05-13T00:30:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">9.4k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-08-31T16:53:18.465Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/home.jpg')"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">公益广告</p><div class="bg-ad"><div>国家反诈中心是国务院打击治理电信网络新型违法犯罪工作部际联席会议合成作战平台，集资源整合、情报研判、侦查指挥为一体，在打击、防范、治理电信网络诈骗等新型违法犯罪中发挥着重要作用。</div><div class="btn-xz-box"><a class="btn-xz" href="https://caoyixiong.com/">主页</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">导航</p><ul class="ft-links"><li><a href="https://caoyixiong.com/about/">关于博主</a><a href="https://caoyixiong.com/categories/">文章分类</a></li><li><a href="https://caoyixiong.com/sponsor/">来杯咖啡</a><a href="https://caoyixiong.com/tags/">文章标签</a></li><li><a href="https://caoyixiong.com/comments/">说点什么</a><a href="https://caoyixiong.com/archives/">文章归档</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">友链</p><div class="ft-img-group"><div class="img-group-item"><a href="https://caoyixiong.com/"><img src="/img/avatar.jpg" alt=""/></a></div></div></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-8sxa.vercel.app',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-8sxa.vercel.app',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-8sxa.vercel.app',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script data-pjax defer src="https://npm.elemecdn.com/tzy-blog/lib/js/theme/chocolate.js"></script><script data-pjax defer src="/js/cursor.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.22.1/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.65.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js?v=4.13.0"></script></div></div></body></html>