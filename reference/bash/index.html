<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Bash 备忘清单 | 太空毅栈</title><meta name="author" content="太空毅栈"><meta name="copyright" content="太空毅栈"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="这是开始使用 linux bash shell 脚本的快速参考备忘单。 入门hello.sh#!&#x2F;bin&#x2F;bashVAR&#x3D;&quot;world&quot;echo &quot;Hello $VAR!&quot; # &#x3D;&gt; Hello world!  执行脚本 $ bash hello.sh  变量NAME&#x3D;&quot;John&quot;echo $&#123;NAME&#125;">
<meta property="og:type" content="website">
<meta property="og:title" content="Bash 备忘清单">
<meta property="og:url" content="https://caoyixiong.com/reference/bash/index.html">
<meta property="og:site_name" content="太空毅栈">
<meta property="og:description" content="这是开始使用 linux bash shell 脚本的快速参考备忘单。 入门hello.sh#!&#x2F;bin&#x2F;bashVAR&#x3D;&quot;world&quot;echo &quot;Hello $VAR!&quot; # &#x3D;&gt; Hello world!  执行脚本 $ bash hello.sh  变量NAME&#x3D;&quot;John&quot;echo $&#123;NAME&#125;">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://caoyixiong.com/img/avatar.jpg">
<meta property="article:published_time" content="2024-08-10T06:16:15.564Z">
<meta property="article:modified_time" content="2024-08-10T06:16:15.564Z">
<meta property="article:author" content="太空毅栈">
<meta property="article:tag" content="博客，生活，技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://caoyixiong.com/img/avatar.jpg"><link rel="shortcut icon" href="/img/logo.png"><link rel="canonical" href="https://caoyixiong.com/reference/bash/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"3NQ1I8Z7GZ","apiKey":"df5bcd27157ba7efa007752258f185fd","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 太空毅栈","link":"链接: ","source":"来源: 太空毅栈","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Bash 备忘清单',
  isPost: false,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-08-10 14:16:15'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="/css/universe.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/reference/"><i class="fa-fw fas fa-list"></i><span> 备忘清单</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header" style="background-image: url('/img/home.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="太空毅栈"><img class="site-icon" src="/img/logo.png"/><span class="site-name">太空毅栈</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/reference/"><i class="fa-fw fas fa-list"></i><span> 备忘清单</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="page-site-info"><h1 id="site-title">Bash 备忘清单</h1></div></header><main class="layout" id="content-inner"><div id="page"><div id="article-container"><p>这是开始使用 linux bash shell 脚本的快速参考备忘单。</p>
<h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><h3 id="hello-sh"><a href="#hello-sh" class="headerlink" title="hello.sh"></a>hello.sh</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">VAR=<span class="string">&quot;world&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Hello <span class="variable">$VAR</span>!&quot;</span> <span class="comment"># =&gt; Hello world!</span></span><br></pre></td></tr></table></figure>

<p>执行脚本</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">bash hello.sh</span></span><br></pre></td></tr></table></figure>

<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">NAME=<span class="string">&quot;John&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;NAME&#125;</span>    <span class="comment"># =&gt; John (变量)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$NAME</span>      <span class="comment"># =&gt; John (变量)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$NAME</span>&quot;</span>    <span class="comment"># =&gt; John (变量)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$NAME&#x27;</span>    <span class="comment"># =&gt; $NAME (字符串原样输出)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;NAME&#125;</span>!&quot;</span> <span class="comment"># =&gt; John! (变量)</span></span><br><span class="line">NAME = <span class="string">&quot;John&quot;</span>   <span class="comment"># =&gt; Error (注意不能有空格)</span></span><br></pre></td></tr></table></figure>

<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">这是一个内联 Bash 注释。</span></span><br><span class="line"></span><br><span class="line">: &#x27;</span><br><span class="line">这是一个</span><br><span class="line">非常整洁的</span><br><span class="line">bash 注释</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure>

<p>多行注释使用 <code>:&#39;</code> 打开和 <code>&#39;</code> 关闭</p>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><!--rehype:wrap-class=row-span-2-->

<table>
<thead>
<tr>
<th align="left">表示</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>$1</code> … <code>$9</code></td>
<td>参数 1 … 9</td>
</tr>
<tr>
<td align="left"><code>$0</code></td>
<td>脚本本身的名称</td>
</tr>
<tr>
<td align="left"><code>$1</code></td>
<td>第一个参数</td>
</tr>
<tr>
<td align="left"><code>$&#123;10&#125;</code></td>
<td>位置参数 10</td>
</tr>
<tr>
<td align="left"><code>$#</code></td>
<td>参数数量</td>
</tr>
<tr>
<td align="left"><code>$$</code></td>
<td>shell 的进程 id</td>
</tr>
<tr>
<td align="left"><code>$*</code></td>
<td>所有参数</td>
</tr>
<tr>
<td align="left"><code>$@</code></td>
<td>所有参数，从第一个开始</td>
</tr>
<tr>
<td align="left"><code>$-</code></td>
<td>当前选项</td>
</tr>
<tr>
<td align="left"><code>$_</code></td>
<td>上一个命令的最后一个参数</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<p>见：<a target="_blank" rel="noopener" href="http://wiki.bash-hackers.org/syntax/shellvars#special_parameters_and_shell_variables">特殊参数</a></p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">get_name</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;John&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;You are <span class="subst">$(get_name)</span>&quot;</span></span><br></pre></td></tr></table></figure>

<p>见：<a href="#bash-%E5%87%BD%E6%95%B0">函数</a></p>
<h3 id="条件句"><a href="#条件句" class="headerlink" title="条件句"></a>条件句</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [[ -z <span class="string">&quot;<span class="variable">$string</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;String is empty&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [[ -n <span class="string">&quot;<span class="variable">$string</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;String is not empty&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>见：<a href="#bash-%E6%9D%A1%E4%BB%B6%E5%8F%A5">条件句</a></p>
<h3 id="大括号扩展"><a href="#大括号扩展" class="headerlink" title="大括号扩展"></a>大括号扩展</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo &#123;A,B&#125;.js</span><br></pre></td></tr></table></figure>

<hr>
<table>
<thead>
<tr>
<th align="left">表示</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>&#123;A,B&#125;</code></td>
<td>与 <code>A B</code> 相同</td>
</tr>
<tr>
<td align="left"><code>&#123;A,B&#125;.js</code></td>
<td>与 <code>A.js B.js</code> 相同</td>
</tr>
<tr>
<td align="left"><code>&#123;1..5&#125;</code></td>
<td>与 <code>1 2 3 4 5</code> 相同</td>
</tr>
</tbody></table>
<p>见：<a target="_blank" rel="noopener" href="http://wiki.bash-hackers.org/syntax/expansion/brace">大括号扩展</a></p>
<h3 id="Shell-执行"><a href="#Shell-执行" class="headerlink" title="Shell 执行"></a>Shell 执行</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># =&gt; I&#x27;m in /当前/的/路径</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;I&#x27;m in <span class="subst">$(PWD)</span>&quot;</span></span><br><span class="line"><span class="comment"># Same as:</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;I&#x27;m in `pwd`&quot;</span></span><br></pre></td></tr></table></figure>

<p>见：<a target="_blank" rel="noopener" href="http://wiki.bash-hackers.org/syntax/expansion/cmdsubst">命令替换</a></p>
<h2 id="Bash-参数扩展"><a href="#Bash-参数扩展" class="headerlink" title="Bash 参数扩展"></a>Bash 参数扩展</h2><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><!--rehype:wrap-class=row-span-2-->

<table>
<thead>
<tr>
<th align="left">代码</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>$&#123;FOO%suffix&#125;</code></td>
<td>删除后缀</td>
</tr>
<tr>
<td align="left"><code>$&#123;FOO#prefix&#125;</code></td>
<td>删除前缀</td>
</tr>
<tr>
<td align="left"><code>$&#123;FOO%%suffix&#125;</code></td>
<td>去掉长后缀</td>
</tr>
<tr>
<td align="left"><code>$&#123;FOO##prefix&#125;</code></td>
<td>删除长前缀</td>
</tr>
<tr>
<td align="left"><code>$&#123;FOO/from/to&#125;</code></td>
<td>替换第一个匹配项</td>
</tr>
<tr>
<td align="left"><code>$&#123;FOO//from/to&#125;</code></td>
<td>全部替换</td>
</tr>
<tr>
<td align="left"><code>$&#123;FOO/%from/to&#125;</code></td>
<td>替换后缀</td>
</tr>
<tr>
<td align="left"><code>$&#123;FOO/#from/to&#125;</code></td>
<td>替换前缀</td>
</tr>
</tbody></table>
<h4 id="子字符串"><a href="#子字符串" class="headerlink" title="子字符串"></a>子字符串</h4><table>
<thead>
<tr>
<th align="left">表示</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>$&#123;FOO:0:3&#125;</code></td>
<td>子串 <em>(位置，长度)</em></td>
</tr>
<tr>
<td align="left"><code>$&#123;FOO:(-3):3&#125;</code></td>
<td>从右边开始的子串</td>
</tr>
</tbody></table>
<h4 id="Length"><a href="#Length" class="headerlink" title="Length"></a>Length</h4><table>
<thead>
<tr>
<th align="left">表示</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>$&#123;#FOO&#125;</code></td>
<td><code>$FOO</code> 的长度</td>
</tr>
</tbody></table>
<h4 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h4><table>
<thead>
<tr>
<th align="left">表示</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>$&#123;FOO:-val&#125;</code></td>
<td><code>$FOO</code>，如果未设置，则为 <code>val</code></td>
</tr>
<tr>
<td align="left"><code>$&#123;FOO:=val&#125;</code></td>
<td>如果未设置，则将 <code>$FOO</code> 设置为 <code>val</code></td>
</tr>
<tr>
<td align="left"><code>$&#123;FOO:+val&#125;</code></td>
<td><code>val</code> 如果设置了<code>$FOO</code></td>
</tr>
<tr>
<td align="left"><code>$&#123;FOO:?message&#125;</code></td>
<td>如果 <code>$FOO</code> 未设置，则显示消息并退出</td>
</tr>
</tbody></table>
<!--rehype:className=code-nowrap left-align-->

<h3 id="替代-Substitution"><a href="#替代-Substitution" class="headerlink" title="替代 Substitution"></a>替代 Substitution</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;food:-Cake&#125;</span>  <span class="comment">#=&gt; $food or &quot;Cake&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">STR=<span class="string">&quot;/path/to/foo.cpp&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;STR%.cpp&#125;</span>    <span class="comment"># /path/to/foo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;STR%.cpp&#125;</span>.o  <span class="comment"># /path/to/foo.o</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;STR%/*&#125;</span>      <span class="comment"># /path/to</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;STR##*.&#125;</span>     <span class="comment"># cpp (extension)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;STR##*/&#125;</span>     <span class="comment"># foo.cpp (basepath)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;STR#*/&#125;</span>      <span class="comment"># path/to/foo.cpp</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;STR##*/&#125;</span>     <span class="comment"># foo.cpp</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;STR/foo/bar&#125;</span> <span class="comment"># /path/to/bar.cpp</span></span><br></pre></td></tr></table></figure>

<h3 id="切片-Slicing"><a href="#切片-Slicing" class="headerlink" title="切片 Slicing"></a>切片 Slicing</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">name=<span class="string">&quot;John&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;name&#125;</span>           <span class="comment"># =&gt; John</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;name:0:2&#125;</span>       <span class="comment"># =&gt; Jo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;name::2&#125;</span>        <span class="comment"># =&gt; Jo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;name::-1&#125;</span>       <span class="comment"># =&gt; Joh</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;name:(-1)&#125;</span>      <span class="comment"># =&gt; n</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;name:(-2)&#125;</span>      <span class="comment"># =&gt; hn</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;name:(-2):2&#125;</span>    <span class="comment"># =&gt; hn</span></span><br><span class="line"></span><br><span class="line">length=2</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;name:0:length&#125;</span>  <span class="comment"># =&gt; Jo</span></span><br></pre></td></tr></table></figure>

<p>见：<a target="_blank" rel="noopener" href="http://wiki.bash-hackers.org/syntax/pe">参数扩展</a></p>
<h3 id="基本路径和目录路径"><a href="#基本路径和目录路径" class="headerlink" title="基本路径和目录路径"></a>基本路径和目录路径</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SRC=<span class="string">&quot;/path/to/foo.cpp&quot;</span></span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">BASEPATH=<span class="variable">$&#123;SRC##*/&#125;</span>   </span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$BASEPATH</span>  <span class="comment"># =&gt; &quot;foo.cpp&quot;</span></span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">DIRPATH=<span class="variable">$&#123;SRC%$BASEPATH&#125;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$DIRPATH</span>   <span class="comment"># =&gt; &quot;/path/to/&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">STR=<span class="string">&quot;HELLO WORLD!&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;STR,&#125;</span>      <span class="comment"># =&gt; hELLO WORLD!</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;STR,,&#125;</span>     <span class="comment"># =&gt; hello world!</span></span><br><span class="line"></span><br><span class="line">STR=<span class="string">&quot;hello world!&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;STR^&#125;</span>      <span class="comment"># =&gt; Hello world!</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;STR^^&#125;</span>     <span class="comment"># =&gt; HELLO WORLD!</span></span><br><span class="line"></span><br><span class="line">ARR=(hello World)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;ARR[@],&#125;</span>&quot;</span> <span class="comment"># =&gt; hello world</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;ARR[@]^&#125;</span>&quot;</span> <span class="comment"># =&gt; Hello World</span></span><br></pre></td></tr></table></figure>

<h2 id="Bash-数组"><a href="#Bash-数组" class="headerlink" title="Bash 数组"></a>Bash 数组</h2><h3 id="定义数组"><a href="#定义数组" class="headerlink" title="定义数组"></a>定义数组</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Fruits=(<span class="string">&#x27;Apple&#x27;</span> <span class="string">&#x27;Banana&#x27;</span> <span class="string">&#x27;Orange&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Fruits[0]=<span class="string">&quot;Apple&quot;</span></span><br><span class="line">Fruits[1]=<span class="string">&quot;Banana&quot;</span></span><br><span class="line">Fruits[2]=<span class="string">&quot;Orange&quot;</span></span><br><span class="line"></span><br><span class="line">ARRAY1=(foo&#123;1..2&#125;) <span class="comment"># =&gt; foo1 foo2</span></span><br><span class="line">ARRAY2=(&#123;A..D&#125;)    <span class="comment"># =&gt; A B C D</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并 =&gt; foo1 foo2 A B C D</span></span><br><span class="line">ARRAY3=(<span class="variable">$&#123;ARRAY1[@]&#125;</span> <span class="variable">$&#123;ARRAY2[@]&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 声明构造</span></span><br><span class="line"><span class="built_in">declare</span> -a Numbers=(1 2 3)</span><br><span class="line">Numbers+=(4 5) <span class="comment"># 附加 =&gt; 1 2 3 4 5</span></span><br></pre></td></tr></table></figure>

<h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><table>
<thead>
<tr>
<th align="left">:-</th>
<th>-</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>$&#123;Fruits[0]&#125;</code></td>
<td>第一个元素</td>
</tr>
<tr>
<td align="left"><code>$&#123;Fruits[-1]&#125;</code></td>
<td>最后一个元素</td>
</tr>
<tr>
<td align="left"><code>$&#123;Fruits[*]&#125;</code></td>
<td>所有元素</td>
</tr>
<tr>
<td align="left"><code>$&#123;Fruits[@]&#125;</code></td>
<td>所有元素</td>
</tr>
<tr>
<td align="left"><code>$&#123;#Fruits[@]&#125;</code></td>
<td>总数</td>
</tr>
<tr>
<td align="left"><code>$&#123;#Fruits&#125;</code></td>
<td>第一节长度</td>
</tr>
<tr>
<td align="left"><code>$&#123;#Fruits[3]&#125;</code></td>
<td>第n个长度</td>
</tr>
<tr>
<td align="left"><code>$&#123;Fruits[@]:3:2&#125;</code></td>
<td>范围</td>
</tr>
<tr>
<td align="left"><code>$&#123;!Fruits[@]&#125;</code></td>
<td>所有 Key</td>
</tr>
</tbody></table>
<h3 id="迭代-Iteration"><a href="#迭代-Iteration" class="headerlink" title="迭代 Iteration"></a>迭代 Iteration</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Fruits=(<span class="string">&#x27;Apple&#x27;</span> <span class="string">&#x27;Banana&#x27;</span> <span class="string">&#x27;Orange&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> e <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;Fruits[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$e</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h4 id="有索引"><a href="#有索引" class="headerlink" title="有索引"></a>有索引</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;!Fruits[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">printf</span> <span class="string">&quot;%s\t%s\n&quot;</span> <span class="string">&quot;<span class="variable">$i</span>&quot;</span> <span class="string">&quot;<span class="variable">$&#123;Fruits[$i]&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><!--rehype:wrap-class=col-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Fruits=(<span class="string">&quot;<span class="variable">$&#123;Fruits[@]&#125;</span>&quot;</span> <span class="string">&quot;Watermelon&quot;</span>)         <span class="comment"># 添加</span></span><br><span class="line">Fruits+=(<span class="string">&#x27;Watermelon&#x27;</span>)                       <span class="comment"># 也是添加</span></span><br><span class="line">Fruits=( <span class="variable">$&#123;Fruits[@]/Ap*/&#125;</span> )                 <span class="comment"># 通过正则表达式匹配删除</span></span><br><span class="line"><span class="built_in">unset</span> Fruits[2]                              <span class="comment"># 删除一项</span></span><br><span class="line">Fruits=(<span class="string">&quot;<span class="variable">$&#123;Fruits[@]&#125;</span>&quot;</span>)                      <span class="comment"># 复制</span></span><br><span class="line">Fruits=(<span class="string">&quot;<span class="variable">$&#123;Fruits[@]&#125;</span>&quot;</span> <span class="string">&quot;<span class="variable">$&#123;Veggies[@]&#125;</span>&quot;</span>)      <span class="comment"># 连接</span></span><br><span class="line">lines=(`<span class="built_in">cat</span> <span class="string">&quot;logfile&quot;</span>`)                      <span class="comment"># 从文件中读取</span></span><br></pre></td></tr></table></figure>

<h3 id="数组作为参数"><a href="#数组作为参数" class="headerlink" title="数组作为参数"></a>数组作为参数</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">extract</span></span>()</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">local</span> -n myarray=<span class="variable">$1</span></span><br><span class="line">  <span class="built_in">local</span> idx=<span class="variable">$2</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;myarray[$idx]&#125;</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">Fruits=(<span class="string">&#x27;Apple&#x27;</span> <span class="string">&#x27;Banana&#x27;</span> <span class="string">&#x27;Orange&#x27;</span>)</span><br><span class="line">extract Fruits 2     <span class="comment"># =&gt; Orangle</span></span><br></pre></td></tr></table></figure>

<h2 id="Bash-字典"><a href="#Bash-字典" class="headerlink" title="Bash 字典"></a>Bash 字典</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">declare</span> -A sounds</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sounds[dog]=<span class="string">&quot;bark&quot;</span></span><br><span class="line">sounds[cow]=<span class="string">&quot;moo&quot;</span></span><br><span class="line">sounds[bird]=<span class="string">&quot;tweet&quot;</span></span><br><span class="line">sounds[wolf]=<span class="string">&quot;howl&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="使用字典"><a href="#使用字典" class="headerlink" title="使用字典"></a>使用字典</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;sounds[dog]&#125;</span> <span class="comment"># Dog&#x27;s sound</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;sounds[@]&#125;</span>   <span class="comment"># All values</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;!sounds[@]&#125;</span>  <span class="comment"># All keys</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#sounds[@]&#125;</span>  <span class="comment"># Number of elements</span></span><br><span class="line"><span class="built_in">unset</span> sounds[dog]   <span class="comment"># Delete dog</span></span><br></pre></td></tr></table></figure>

<h3 id="迭代"><a href="#迭代" class="headerlink" title="迭代"></a>迭代</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> val <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;sounds[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$val</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$&#123;!sounds[@]&#125;</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$key</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h2 id="Bash-条件句"><a href="#Bash-条件句" class="headerlink" title="Bash 条件句"></a>Bash 条件句</h2><h3 id="整数条件"><a href="#整数条件" class="headerlink" title="整数条件"></a>整数条件</h3><table>
<thead>
<tr>
<th align="left">条件</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>[[ NUM -eq NUM ]]</code></td>
<td>等于 <yel>Eq</yel>ual</td>
</tr>
<tr>
<td align="left"><code>[[ NUM -ne NUM ]]</code></td>
<td>不等于 <yel>N</yel>ot <yel>e</yel>qual</td>
</tr>
<tr>
<td align="left"><code>[[ NUM -lt NUM ]]</code></td>
<td>小于 <yel>L</yel>ess <yel>t</yel>han</td>
</tr>
<tr>
<td align="left"><code>[[ NUM -le NUM ]]</code></td>
<td>小于等于 <yel>L</yel>ess than or <yel>e</yel>qual</td>
</tr>
<tr>
<td align="left"><code>[[ NUM -gt NUM ]]</code></td>
<td>大于 <yel>G</yel>reater <yel>t</yel>han</td>
</tr>
<tr>
<td align="left"><code>[[ NUM -ge NUM ]]</code></td>
<td>大于等于 <yel>G</yel>reater than or <yel>e</yel>qual</td>
</tr>
<tr>
<td align="left"><code>(( NUM &lt; NUM ))</code></td>
<td>小于</td>
</tr>
<tr>
<td align="left"><code>(( NUM &lt;= NUM ))</code></td>
<td>小于或等于</td>
</tr>
<tr>
<td align="left"><code>(( NUM &gt; NUM ))</code></td>
<td>比…更大</td>
</tr>
<tr>
<td align="left"><code>(( NUM &gt;= NUM ))</code></td>
<td>大于等于</td>
</tr>
</tbody></table>
<h3 id="字符串条件"><a href="#字符串条件" class="headerlink" title="字符串条件"></a>字符串条件</h3><table>
<thead>
<tr>
<th align="left">条件</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>[[ -z STR ]]</code></td>
<td>空字符串</td>
</tr>
<tr>
<td align="left"><code>[[ -n STR ]]</code></td>
<td><yel>非</yel>空字符串</td>
</tr>
<tr>
<td align="left"><code>[[ STR == STR ]]</code></td>
<td>相等</td>
</tr>
<tr>
<td align="left"><code>[[ STR = STR ]]</code></td>
<td>相等(同上)</td>
</tr>
<tr>
<td align="left"><code>[[ STR &lt; STR ]]</code></td>
<td>小于 <em>(ASCII)</em></td>
</tr>
<tr>
<td align="left"><code>[[ STR &gt; STR ]]</code></td>
<td>大于 <em>(ASCII)</em></td>
</tr>
<tr>
<td align="left"><code>[[ STR != STR ]]</code></td>
<td>不相等</td>
</tr>
<tr>
<td align="left"><code>[[ STR =~ STR ]]</code></td>
<td>正则表达式</td>
</tr>
</tbody></table>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><!--rehype:wrap-class=row-span-3-->

<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [[ -z <span class="string">&quot;<span class="variable">$string</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;String is empty&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [[ -n <span class="string">&quot;<span class="variable">$string</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;String is not empty&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;This never happens&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h4 id="组合"><a href="#组合" class="headerlink" title="组合"></a>组合</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [[ X &amp;&amp; Y ]]; <span class="keyword">then</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h4 id="相等"><a href="#相等" class="headerlink" title="相等"></a>相等</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$A</span>&quot;</span> == <span class="string">&quot;<span class="variable">$B</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h4 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [[ <span class="string">&#x27;1. abc&#x27;</span> =~ ([a-z]+) ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;BASH_REMATCH[1]&#125;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h4 id="小于"><a href="#小于" class="headerlink" title="小于"></a>小于</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (( <span class="variable">$a</span> &lt; <span class="variable">$b</span> )); <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$a</span> is smaller than <span class="variable">$b</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h4 id="存在"><a href="#存在" class="headerlink" title="存在"></a>存在</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [[ -e <span class="string">&quot;file.txt&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;file exists&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h3 id="文件条件"><a href="#文件条件" class="headerlink" title="文件条件"></a>文件条件</h3><!--rehype:wrap-class=row-span-2-->

<table>
<thead>
<tr>
<th align="left">条件</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>[[ -e FILE ]]</code></td>
<td>存在</td>
</tr>
<tr>
<td align="left"><code>[[ -d FILE ]]</code></td>
<td>目录</td>
</tr>
<tr>
<td align="left"><code>[[ -f FILE ]]</code></td>
<td>文件</td>
</tr>
<tr>
<td align="left"><code>[[ -h FILE ]]</code></td>
<td>符号链接</td>
</tr>
<tr>
<td align="left"><code>[[ -s FILE ]]</code></td>
<td>大小 &gt; 0 字节</td>
</tr>
<tr>
<td align="left"><code>[[ -r FILE ]]</code></td>
<td>可读</td>
</tr>
<tr>
<td align="left"><code>[[ -w FILE ]]</code></td>
<td>可写</td>
</tr>
<tr>
<td align="left"><code>[[ -x FILE ]]</code></td>
<td>可执行文件</td>
</tr>
<tr>
<td align="left"><code>[[ f1 -nt f2 ]]</code></td>
<td>f1 比 f2 新</td>
</tr>
<tr>
<td align="left"><code>[[ f1 -ot f2 ]]</code></td>
<td>f2 比 f1 新</td>
</tr>
<tr>
<td align="left"><code>[[ f1 -ef f2 ]]</code></td>
<td>相同的文件</td>
</tr>
</tbody></table>
<h3 id="更多条件"><a href="#更多条件" class="headerlink" title="更多条件"></a>更多条件</h3><table>
<thead>
<tr>
<th align="left">条件</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>[[ -o noclobber ]]</code></td>
<td>如果启用 <pur>OPTION</pur></td>
</tr>
<tr>
<td align="left"><code>[[ ! EXPR ]]</code></td>
<td>不是 <pur>Not</pur></td>
</tr>
<tr>
<td align="left"><code>[[ X &amp;&amp; Y ]]</code></td>
<td>和 <pur>And</pur></td>
</tr>
<tr>
<td align="left"><code>[[ X || Y ]]</code></td>
<td>或者 <pur>Or</pur></td>
</tr>
</tbody></table>
<h3 id="逻辑和，或"><a href="#逻辑和，或" class="headerlink" title="逻辑和，或"></a>逻辑和，或</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> = <span class="string">&#x27;y&#x27;</span> -a <span class="variable">$2</span> -gt 0 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> = <span class="string">&#x27;n&#x27;</span> -o <span class="variable">$2</span> -lt 0 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;no&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h2 id="Bash-循环"><a href="#Bash-循环" class="headerlink" title="Bash 循环"></a>Bash 循环</h2><h3 id="基本-for-循环"><a href="#基本-for-循环" class="headerlink" title="基本 for 循环"></a>基本 for 循环</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> /etc/rc.*; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="类似-C-的-for-循环"><a href="#类似-C-的-for-循环" class="headerlink" title="类似 C 的 for 循环"></a>类似 C 的 for 循环</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> ((i = <span class="number">0</span> ; i &lt; <span class="number">100</span> ; i++)); <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="范围"><a href="#范围" class="headerlink" title="范围"></a>范围</h3><!--rehype:wrap-class=row-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..5&#125;; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Welcome <span class="variable">$i</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h4 id="步长"><a href="#步长" class="headerlink" title="步长"></a>步长</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;5..50..5&#125;; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Welcome <span class="variable">$i</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="自动递增"><a href="#自动递增" class="headerlink" title="自动递增"></a>自动递增</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">i=1</span><br><span class="line"><span class="keyword">while</span> [[ <span class="variable">$i</span> -lt 4 ]]; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Number: <span class="variable">$i</span>&quot;</span></span><br><span class="line">    ((i++))</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="自动递减"><a href="#自动递减" class="headerlink" title="自动递减"></a>自动递减</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">i=3</span><br><span class="line"><span class="keyword">while</span> [[ <span class="variable">$i</span> -gt 0 ]]; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Number: <span class="variable">$i</span>&quot;</span></span><br><span class="line">    ((i--))</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="Continue"><a href="#Continue" class="headerlink" title="Continue"></a>Continue</h3><figure class="highlight bash"><figcaption><span>&#123;data</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> number <span class="keyword">in</span> $(<span class="built_in">seq</span> 1 3); <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$number</span> == 2 ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">continue</span>;</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$number</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="Break"><a href="#Break" class="headerlink" title="Break"></a>Break</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> number <span class="keyword">in</span> $(<span class="built_in">seq</span> 1 3); <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$number</span> == 2 ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># 跳过整个循环的其余部分。</span></span><br><span class="line">        <span class="built_in">break</span>;</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="comment"># 这只会打印 1</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$number</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="Until"><a href="#Until" class="headerlink" title="Until"></a>Until</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">count=0</span><br><span class="line"><span class="keyword">until</span> [ <span class="variable">$count</span> -gt 10 ]; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$count</span>&quot;</span></span><br><span class="line">    ((count++))</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="死循环"><a href="#死循环" class="headerlink" title="死循环"></a>死循环</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="comment"># 下面是一些代码</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="死循环-简写"><a href="#死循环-简写" class="headerlink" title="死循环(简写)"></a>死循环(简写)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> :; <span class="keyword">do</span></span><br><span class="line">    <span class="comment"># 下面是一些代码</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="读取文件的每一行"><a href="#读取文件的每一行" class="headerlink" title="读取文件的每一行"></a>读取文件的每一行</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> file.txt | <span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$line</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h2 id="Bash-函数"><a href="#Bash-函数" class="headerlink" title="Bash 函数"></a>Bash 函数</h2><h3 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">myfunc</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;hello <span class="variable">$1</span>&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同上(替代语法)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">myfunc</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;hello <span class="variable">$1</span>&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">myfunc <span class="string">&quot;John&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">myfunc</span></span>() &#123;</span><br><span class="line">    <span class="built_in">local</span> myresult=<span class="string">&#x27;some value&#x27;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$myresult</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">result=<span class="string">&quot;<span class="subst">$(myfunc)</span>&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="抛出错误"><a href="#抛出错误" class="headerlink" title="抛出错误"></a>抛出错误</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">myfunc</span></span>() &#123;</span><br><span class="line">    <span class="built_in">return</span> 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> myfunc; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;success&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;failure&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h2 id="Bash-选项"><a href="#Bash-选项" class="headerlink" title="Bash 选项"></a>Bash 选项</h2><!--rehype:body-class=cols-2-->

<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><p>避免覆盖文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># (echo &quot;hi&quot; &gt; foo)</span></span><br><span class="line"><span class="built_in">set</span> -o noclobber</span><br></pre></td></tr></table></figure>

<p>用于出错时退出，避免级联错误</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> -o errexit   </span><br></pre></td></tr></table></figure>

<p>揭示隐藏的失败</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> -o pipefail  </span><br></pre></td></tr></table></figure>

<p>公开未设置的变量</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> -o nounset</span><br></pre></td></tr></table></figure>

<h3 id="全局选项"><a href="#全局选项" class="headerlink" title="全局选项"></a>全局选项</h3><p>不匹配的 glob 被删除</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">shopt</span> -s nullglob   <span class="comment"># (&#x27;*.foo&#x27; =&gt; &#x27;&#x27;)</span></span><br></pre></td></tr></table></figure>

<p>不匹配的 glob 抛出错误</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">shopt</span> -s failglob  </span><br></pre></td></tr></table></figure>

<p>不区分大小写的球体</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">shopt</span> -s nocaseglob </span><br></pre></td></tr></table></figure>

<p>通配符匹配点文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">shopt</span> -s dotglob    <span class="comment"># (&quot;*.sh&quot; =&gt; &quot;.foo.sh&quot;)</span></span><br></pre></td></tr></table></figure>

<p>允许 ** 进行递归匹配</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">shopt</span> -s globstar   <span class="comment"># (&#x27;lib/**/*.rb&#x27; =&gt; &#x27;lib/a/b/c.rb&#x27;)</span></span><br></pre></td></tr></table></figure>

<h2 id="Bash-历史"><a href="#Bash-历史" class="headerlink" title="Bash 历史"></a>Bash 历史</h2><!--rehype:body-class=cols-2-->

<h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><table>
<thead>
<tr>
<th align="left">命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>history</code></td>
<td>显示历史</td>
</tr>
<tr>
<td align="left"><code>sudo !!</code></td>
<td>使用 <code>sudo</code> 运行上一个命令</td>
</tr>
<tr>
<td align="left"><code>shopt -s histverify</code></td>
<td>不要立即执行扩展结果</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<h3 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h3><table>
<thead>
<tr>
<th align="left">表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>!$</code></td>
<td>展开最新命令的最后一个参数</td>
</tr>
<tr>
<td align="left"><code>!*</code></td>
<td>展开最新命令的所有参数</td>
</tr>
<tr>
<td align="left"><code>!-n</code></td>
<td>展开第 <code>n</code> 个最近的命令</td>
</tr>
<tr>
<td align="left"><code>!n</code></td>
<td>展开历史中的第 <code>n</code> 个命令</td>
</tr>
<tr>
<td align="left"><code>!&lt;command&gt;</code></td>
<td>展开最近调用的命令 <code>&lt;command&gt;</code></td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<h3 id="操作-1"><a href="#操作-1" class="headerlink" title="操作"></a>操作</h3><table>
<thead>
<tr>
<th align="left">代码</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>!!</code></td>
<td>再次执行最后一条命令</td>
</tr>
<tr>
<td align="left"><code>!!:s/&lt;FROM&gt;/&lt;TO&gt;/</code></td>
<td>在最近的命令中将第一次出现的 <code>&lt;FROM&gt;</code> 替换为 <code>&lt;TO&gt;</code></td>
</tr>
<tr>
<td align="left"><code>!!:gs/&lt;FROM&gt;/&lt;TO&gt;/</code></td>
<td>在最近的命令中将所有出现的 <code>&lt;FROM&gt;</code> 替换为 <code>&lt;TO&gt;</code></td>
</tr>
<tr>
<td align="left"><code>!$:t</code></td>
<td>仅从最近命令的最后一个参数扩展基本名称</td>
</tr>
<tr>
<td align="left"><code>!$:h</code></td>
<td>仅从最近命令的最后一个参数展开目录</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<p><code>!!</code> 和 <code>!$</code> 可以替换为任何有效的扩展。</p>
<h3 id="切片-Slices"><a href="#切片-Slices" class="headerlink" title="切片 Slices"></a>切片 Slices</h3><table>
<thead>
<tr>
<th align="left">代码</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>!!:n</code></td>
<td>仅扩展最近命令中的第 <code>n</code> 个标记(命令为 <code>0</code>；第一个参数为 <code>1</code>)</td>
</tr>
<tr>
<td align="left"><code>!^</code></td>
<td>从最近的命令展开第一个参数</td>
</tr>
<tr>
<td align="left"><code>!$</code></td>
<td>从最近的命令中展开最后一个标记</td>
</tr>
<tr>
<td align="left"><code>!!:n-m</code></td>
<td>从最近的命令扩展令牌范围</td>
</tr>
<tr>
<td align="left"><code>!!:n-$</code></td>
<td>从最近的命令中将第 <code>n</code> 个标记展开到最后</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<p><code>!!</code> 可以替换为任何有效的扩展，即 <code>!cat</code>、<code>!-2</code>、<code>!42</code> 等。</p>
<h2 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h2><h3 id="数值计算"><a href="#数值计算" class="headerlink" title="数值计算"></a>数值计算</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$((a + <span class="number">200</span>))      <span class="comment"># $a 加 200</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$((<span class="variable">$RANDOM</span>%<span class="number">200</span>))  <span class="comment"># 随机数 0..199</span></span><br></pre></td></tr></table></figure>

<h3 id="子-shell"><a href="#子-shell" class="headerlink" title="子 shell"></a>子 shell</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(<span class="built_in">cd</span> somedir; <span class="built_in">echo</span> <span class="string">&quot;I&#x27;m now in <span class="variable">$PWD</span>&quot;</span>)</span><br><span class="line"><span class="built_in">pwd</span> <span class="comment"># 仍然在第一个目录</span></span><br></pre></td></tr></table></figure>

<h3 id="检查命令"><a href="#检查命令" class="headerlink" title="检查命令"></a>检查命令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">command</span> -V <span class="built_in">cd</span></span><br><span class="line"><span class="comment">#=&gt; &quot;cd 是一个函数/别名/其他&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><!--rehype:wrap-class=row-span-2 col-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python hello.py &gt; output.txt   <span class="comment"># 标准输出到(文件)</span></span><br><span class="line">python hello.py &gt;&gt; output.txt  <span class="comment"># 标准输出到(文件)，追加</span></span><br><span class="line">python hello.py 2&gt; error.log   <span class="comment"># 标准错误到(文件)</span></span><br><span class="line">python hello.py 2&gt;&amp;1           <span class="comment"># 标准错误到标准输出</span></span><br><span class="line">python hello.py 2&gt;/dev/null    <span class="comment"># 标准错误到(空null)</span></span><br><span class="line">python hello.py &amp;&gt;/dev/null    <span class="comment"># 标准输出和标准错误到(空null)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python hello.py &lt; foo.txt      <span class="comment"># 将 foo.txt 提供给 python 的标准输入</span></span><br></pre></td></tr></table></figure>

<h3 id="来源相对"><a href="#来源相对" class="headerlink" title="来源相对"></a>来源相对</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> <span class="string">&quot;<span class="variable">$&#123;0%/*&#125;</span>/../share/foo.sh&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="脚本目录"><a href="#脚本目录" class="headerlink" title="脚本目录"></a>脚本目录</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">DIR=<span class="string">&quot;<span class="variable">$&#123;0%/*&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="Case-switch"><a href="#Case-switch" class="headerlink" title="Case&#x2F;switch"></a>Case&#x2F;switch</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">    start | up)</span><br><span class="line">    vagrant up</span><br><span class="line">    ;;</span><br><span class="line">    *)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Usage: <span class="variable">$0</span> &#123;start|stop|ssh&#125;&quot;</span></span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<h3 id="陷阱错误"><a href="#陷阱错误" class="headerlink" title="陷阱错误"></a>陷阱错误</h3><!--rehype:wrap-class=col-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">trap</span> <span class="string">&#x27;echo Error at about $LINENO&#x27;</span> ERR</span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">traperr</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;ERROR: <span class="variable">$&#123;BASH_SOURCE[1]&#125;</span> at about <span class="variable">$&#123;BASH_LINENO[0]&#125;</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">set</span> -o errtrace</span><br><span class="line"><span class="built_in">trap</span> traperr ERR</span><br></pre></td></tr></table></figure>

<h3 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">printf</span> <span class="string">&quot;Hello %s, I&#x27;m %s&quot;</span> Sven Olga</span><br><span class="line"><span class="comment">#=&gt; &quot;Hello Sven, I&#x27;m Olga</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span> <span class="string">&quot;1 + 1 = %d&quot;</span> 2</span><br><span class="line"><span class="comment">#=&gt; &quot;1 + 1 = 2&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span> <span class="string">&quot;Print a float: %f&quot;</span> 2</span><br><span class="line"><span class="comment">#=&gt; &quot;Print a float: 2.000000&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="获取选项"><a href="#获取选项" class="headerlink" title="获取选项"></a>获取选项</h3><!--rehype:wrap-class=col-span-2-->

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> [[ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> =~ ^- &amp;&amp; ! <span class="string">&quot;<span class="variable">$1</span>&quot;</span> == <span class="string">&quot;--&quot;</span> ]]; <span class="keyword">do</span> <span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">    -V | --version )</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$version</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line">    ;;</span><br><span class="line">    -s | --string )</span><br><span class="line">    <span class="built_in">shift</span>; string=<span class="variable">$1</span></span><br><span class="line">    ;;</span><br><span class="line">    -f | --flag )</span><br><span class="line">    flag=1</span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span>; <span class="built_in">shift</span>; <span class="keyword">done</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$1</span>&quot;</span> == <span class="string">&#x27;--&#x27;</span> ]]; <span class="keyword">then</span> <span class="built_in">shift</span>; <span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h3 id="检查命令的结果"><a href="#检查命令的结果" class="headerlink" title="检查命令的结果"></a>检查命令的结果</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> ping -c 1 google.com; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;看来您的互联网连接正常&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h3 id="grep-检查"><a href="#grep-检查" class="headerlink" title="grep 检查"></a>grep 检查</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> grep -q <span class="string">&#x27;foo&#x27;</span> ~/.bash_history; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;您过去似乎输入过“foo”&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h3 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h3><!--rehype:wrap-class=row-span-6-->

<table>
<thead>
<tr>
<th align="left">:–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>cat</code></td>
<td>用于显示文本文件内容，全部输出</td>
</tr>
<tr>
<td align="left"><code>EOF</code></td>
<td><code>end of file</code>，表示文本结束符</td>
</tr>
</tbody></table>
<hr>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt; output.txt &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">this is test eof</span></span><br><span class="line"><span class="string">this is test eof2</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure>

<p>输出 <code>cat output.txt</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">this is test eof</span><br><span class="line">this is test eof2</span><br></pre></td></tr></table></figure>

<p>追加内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt;&gt;2.txt &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">456</span></span><br><span class="line"><span class="string">789</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure>

<p><code>$</code> 等特殊字符时，须利用转义字符 <code>\</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt; file &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">export ORACLE_SID=yqpt </span></span><br><span class="line"><span class="string">export PATH=\$PATH:\$ORACLE_HOME/bin  </span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure>

<p>取消变量替换，<code>EOF</code> 被加上双引号或者单引号，即可取消变量的替换</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt; <span class="string">&quot;EOF&quot;</span> &gt; output.sh</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;This is output&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$1</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p>所有TAB键将全部忽略[不能是空格]</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt; -EOF</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;This is output&quot;</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h3 id="特殊变量"><a href="#特殊变量" class="headerlink" title="特殊变量"></a>特殊变量</h3><!--rehype:wrap-class=row-span-2-->

<table>
<thead>
<tr>
<th align="left">表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>$?</code></td>
<td>最后一个任务的退出状态</td>
</tr>
<tr>
<td align="left"><code>$!</code></td>
<td>最后一个后台任务的 PID</td>
</tr>
<tr>
<td align="left"><code>$$</code></td>
<td>shell PID</td>
</tr>
<tr>
<td align="left"><code>$0</code></td>
<td>shell 脚本的文件名</td>
</tr>
</tbody></table>
<p>见<a target="_blank" rel="noopener" href="http://wiki.bash-hackers.org/syntax/shellvars#special_parameters_and_shell_variables">特殊参数</a>。</p>
<h3 id="反斜杠转义"><a href="#反斜杠转义" class="headerlink" title="反斜杠转义"></a>反斜杠转义</h3><!--rehype:wrap-class=row-span-2-->

<ul>
<li>&nbsp;</li>
<li>!</li>
<li>&quot;</li>
<li>#</li>
<li>&amp;</li>
<li>&#39;</li>
<li>(</li>
<li>)</li>
<li>,</li>
<li>;</li>
<li>&lt;</li>
<li>&gt;</li>
<li>[</li>
<li>|</li>
<li>\</li>
<li>]</li>
<li>^</li>
<li>{</li>
<li>}</li>
<li>`</li>
<li>$</li>
<li>*</li>
<li>?<!--rehype:className=cols-4 style-none--></li>
</ul>
<p>使用 <code>\</code> 转义这些特殊字符</p>
<h3 id="Heredoc"><a href="#Heredoc" class="headerlink" title="Heredoc"></a>Heredoc</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">END</span></span><br><span class="line"><span class="string">hello world</span></span><br><span class="line"><span class="string">END</span></span><br></pre></td></tr></table></figure>

<h3 id="转到上一个目录"><a href="#转到上一个目录" class="headerlink" title="转到上一个目录"></a>转到上一个目录</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">pwd</span>     <span class="comment"># /home/user/foo</span></span><br><span class="line"><span class="built_in">cd</span> bar/</span><br><span class="line"><span class="built_in">pwd</span>     <span class="comment"># /home/user/foo/bar</span></span><br><span class="line"><span class="built_in">cd</span> -</span><br><span class="line"><span class="built_in">pwd</span>     <span class="comment"># /home/user/foo</span></span><br></pre></td></tr></table></figure>

<h3 id="读取输入"><a href="#读取输入" class="headerlink" title="读取输入"></a>读取输入</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;Proceed? [y/n]: &quot;</span></span><br><span class="line"><span class="built_in">read</span> ans</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$ans</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">read</span> -n 1 ans    <span class="comment"># 只有一个字符</span></span><br></pre></td></tr></table></figure>

<h3 id="条件执行"><a href="#条件执行" class="headerlink" title="条件执行"></a>条件执行</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git commit &amp;&amp; git push</span><br><span class="line">git commit || <span class="built_in">echo</span> <span class="string">&quot;Commit failed&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> -euo pipefail</span><br><span class="line">IFS=$<span class="string">&#x27;\n\t&#x27;</span></span><br></pre></td></tr></table></figure>

<p>参见：<a target="_blank" rel="noopener" href="http://redsymbol.net/articles/unofficial-bash-strict-mode/">非官方 bash 严格模式</a></p>
<h3 id="可选参数"><a href="#可选参数" class="headerlink" title="可选参数"></a>可选参数</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">args=(<span class="string">&quot;<span class="variable">$@</span>&quot;</span>)</span><br><span class="line">args+=(foo)</span><br><span class="line">args+=(bar)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;args[@]&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure>

<p>将参数放入数组中，然后追加</p>
<h3 id="调试模式"><a href="#调试模式" class="headerlink" title="调试模式"></a>调试模式</h3><p>启用调试模式，会把脚本中的每条命令的执行情况打印出来。它可以在整个会话或脚本上运行，也可以在脚本内以编程方式启用。</p>
<p>以调试模式运行脚本(整个脚本都会打印调试信息)：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ bash -x myscript.sh</span><br></pre></td></tr></table></figure>

<p>在 bash 脚本中打开调试(针对部分内容打印调试信息)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">set</span> -x   <span class="comment"># Enable debugging</span></span><br><span class="line"><span class="comment"># some code here</span></span><br><span class="line"><span class="built_in">set</span> +x   <span class="comment"># Disable debugging output.</span></span><br></pre></td></tr></table></figure>

<h2 id="Bash-颜色"><a href="#Bash-颜色" class="headerlink" title="Bash 颜色"></a>Bash 颜色</h2><h3 id="颜色着色语法示例"><a href="#颜色着色语法示例" class="headerlink" title="颜色着色语法示例"></a>颜色着色语法示例</h3><!--rehype:wrap-class=row-span-2-->

<p>您可以通过为其输出着色来使您的 BASH 脚本更漂亮，使用以下模板编写彩色文本：</p>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;\e[31m命令行中显示红色文字\e[0m&quot;</span></span><br></pre></td></tr></table></figure>

<p><red>命令行中显示红色文字</red></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ echo -e &quot;\e[42m绿色背景\e[0m&quot;</span><br></pre></td></tr></table></figure>

<p><code>绿色背景</code><!--rehype:style=background:green;color: black;--></p>
<table>
<thead>
<tr>
<th align="left">Option</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-e</code></td>
<td>启用反斜杠转义的解释</td>
</tr>
<tr>
<td align="left"><code>\e[</code> 或 <code>\x1b[</code> 或 <code>\033[</code></td>
<td>开始颜色修改</td>
</tr>
<tr>
<td align="left"><code>COLORm</code></td>
<td>颜色代码 + <code>m</code> 在末尾</td>
</tr>
<tr>
<td align="left"><code>\e[0m</code> 或 <code>\x1b[0m</code> 或 <code>\033[0m</code></td>
<td>结束颜色修改</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<p><code>0x1b</code> 字面上称为 <code>ESC</code></p>
<h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;\e[3m下划线文本\e[0m&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>下划线文本</code><!--rehype:style=text-decoration: underline;color: inherit;--></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -e <span class="string">&quot;\e[1;33;4;44m粗体下划线蓝色背景黄色文字的文本\e[0m&quot;</span></span><br></pre></td></tr></table></figure>
<!--rehype:className=wrap-text-->

<p><code>粗体下划线蓝色背景黄色文字的文本</code><!--rehype:style=text-decoration: underline;color: inherit;font-weight: bold;color: #cdcd00;background: #0000ee;--></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">\e[         <span class="comment"># 启用转义</span></span><br><span class="line">1;33;4;44   <span class="comment"># 参数 (1;33;4;44)</span></span><br><span class="line">m           <span class="comment"># 设置图形模式</span></span><br></pre></td></tr></table></figure>

<h4 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h4><table>
<thead>
<tr>
<th align="left">:-</th>
<th>–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>0</code></td>
<td>普通字符(复位或正常)</td>
<td>关闭所有属性</td>
</tr>
<tr>
<td align="left"><code>1</code></td>
<td><strong>粗体</strong>字</td>
<td></td>
</tr>
<tr>
<td align="left"><code>2</code></td>
<td>弱化(降低强度)</td>
<td>未广泛支持</td>
</tr>
<tr>
<td align="left"><code>3</code></td>
<td>斜体</td>
<td>未广泛支持有时为反相显示</td>
</tr>
<tr>
<td align="left"><code>4</code></td>
<td>下划线</td>
<td></td>
</tr>
<tr>
<td align="left"><code>5</code></td>
<td>缓慢闪烁</td>
<td></td>
</tr>
<tr>
<td align="left"><code>6</code></td>
<td>快速闪烁</td>
<td></td>
</tr>
<tr>
<td align="left"><code>7</code></td>
<td>反显</td>
<td></td>
</tr>
<tr>
<td align="left"><code>8</code></td>
<td>隐藏</td>
<td>未广泛支持</td>
</tr>
<tr>
<td align="left"><code>9</code></td>
<td>划除</td>
<td></td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<h3 id="ANSI-—-颜色转义码"><a href="#ANSI-—-颜色转义码" class="headerlink" title="ANSI — 颜色转义码"></a>ANSI — 颜色转义码</h3><table>
<thead>
<tr>
<th align="left">颜色</th>
<th>名称</th>
<th>前景色</th>
<th>背景色</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>Black</code></td>
<td>黑色</td>
<td>30</td>
<td>40</td>
<td><code>黑</code><!--rehype:style=background:#000;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
<tr>
<td align="left"><code>Red</code></td>
<td>红色</td>
<td>31</td>
<td>41</td>
<td><code>红</code><!--rehype:style=background:#c23621;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
<tr>
<td align="left"><code>Green</code></td>
<td>绿色</td>
<td>32</td>
<td>42</td>
<td><code>绿</code><!--rehype:style=background:#25bc26;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
<tr>
<td align="left"><code>Yellow</code></td>
<td>黄色</td>
<td>33</td>
<td>43</td>
<td><code>黄</code><!--rehype:style=background:#cdcd00;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
<tr>
<td align="left"><code>Blue</code></td>
<td>蓝色</td>
<td>34</td>
<td>44</td>
<td><code>蓝</code><!--rehype:style=background:#0000ee;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
<tr>
<td align="left"><code>Purple</code></td>
<td>紫色</td>
<td>35</td>
<td>45</td>
<td><code>紫</code><!--rehype:style=background:#cd00cd;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
<tr>
<td align="left"><code>Cyan</code></td>
<td>青色</td>
<td>36</td>
<td>46</td>
<td><code>青</code><!--rehype:style=background:#00AAAA;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
<tr>
<td align="left"><code>White</code></td>
<td>白色</td>
<td>37</td>
<td>47</td>
<td><code>白</code><!--rehype:style=background:#e5e5e5;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
</tbody></table>
<!--rehype:className=show-header left-align-->

<h3 id="ANSI-—-颜色转义码-亮色"><a href="#ANSI-—-颜色转义码-亮色" class="headerlink" title="ANSI — 颜色转义码(亮色)"></a>ANSI — 颜色转义码(亮色)</h3><table>
<thead>
<tr>
<th align="left">颜色</th>
<th>前色</th>
<th>背色</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>BrightBlack(Gray)</code> 灰色</td>
<td>90</td>
<td>100</td>
<td><code>90</code><!--rehype:style=background:#555555;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
<tr>
<td align="left"><code>Bright Red</code> 亮红色</td>
<td>91</td>
<td>101</td>
<td><code>91</code><!--rehype:style=background:#FF5555;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
<tr>
<td align="left"><code>Bright Green</code> 亮绿色</td>
<td>92</td>
<td>102</td>
<td><code>92</code><!--rehype:style=background:#55FF55;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
<tr>
<td align="left"><code>Bright Yellow</code> 亮黄色</td>
<td>93</td>
<td>103</td>
<td><code>93</code><!--rehype:style=background:#FFFF55;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
<tr>
<td align="left"><code>Bright Blue</code> 亮蓝色</td>
<td>94</td>
<td>104</td>
<td><code>94</code><!--rehype:style=background:#5555FF;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
<tr>
<td align="left"><code>Bright Magenta</code> 亮紫色</td>
<td>95</td>
<td>105</td>
<td><code>95</code><!--rehype:style=background:#FF55FF;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
<tr>
<td align="left"><code>Bright Cyan</code> 亮青色</td>
<td>96</td>
<td>106</td>
<td><code>96</code><!--rehype:style=background:#55FFFF;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
<tr>
<td align="left"><code>Bright White</code> 浅灰</td>
<td>97</td>
<td>107</td>
<td><code>97</code><!--rehype:style=background:#ffffff;padding:0.2rem 1.2rem;border: 1px solid #333;--></td>
</tr>
</tbody></table>
<!--rehype:className=show-header left-align-->

<h3 id="可用功能"><a href="#可用功能" class="headerlink" title="可用功能"></a>可用功能</h3><!--rehype:wrap-class=col-span-2-->

<table>
<thead>
<tr>
<th align="left">:-</th>
<th>–</th>
<th>–</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>n</code> A</td>
<td>光标上移</td>
<td>光标向指定的方向移动 <code>n</code>(默认1)格</td>
</tr>
<tr>
<td align="left"><code>n</code> B</td>
<td>光标下移</td>
<td>光标向指定的方向移动 <code>n</code>(默认1)格</td>
</tr>
<tr>
<td align="left"><code>n</code> C</td>
<td>光标前移</td>
<td>光标向指定的方向移动 <code>n</code>(默认1)格</td>
</tr>
<tr>
<td align="left"><code>n</code> D</td>
<td>光标后移</td>
<td>光标向指定的方向移动 <code>n</code>(默认1)格</td>
</tr>
<tr>
<td align="left"><code>n</code> E</td>
<td>光标移到下一行</td>
<td>光标移动到下面第 <code>n</code>(默认1)行的开头(非ANSI.SYS)</td>
</tr>
<tr>
<td align="left"><code>n</code> F</td>
<td>光标移到上一行</td>
<td>光标移动到上面第 <code>n</code>(默认1)行的开头(非ANSI.SYS)</td>
</tr>
<tr>
<td align="left"><code>n</code> G</td>
<td>光标水平绝对</td>
<td>光标移动到第 <code>n</code>(默认1)列(非ANSI.SYS)</td>
</tr>
<tr>
<td align="left"><code>n</code>;<code>m</code> H</td>
<td>光标位置</td>
<td>光标移动到第 <code>n</code>行、第 <code>m</code> 列。值从1开始，且默认为1(左上角)</td>
</tr>
<tr>
<td align="left"><code>n</code> J</td>
<td>ED – 擦除显示</td>
<td>清除屏幕的部分区域</td>
</tr>
<tr>
<td align="left"><code>n</code> K</td>
<td>EL – 擦除行</td>
<td>清除行内的部分区域</td>
</tr>
<tr>
<td align="left"><code>n</code> S</td>
<td>SU – 向上滚动</td>
<td>整页向上滚动 <code>n</code>(默认1)行。新行添加到底部 (非ANSI.SYS)</td>
</tr>
<tr>
<td align="left"><code>n</code> T</td>
<td>SD – 向下滚动</td>
<td>整页向下滚动 <code>n</code>(默认1)行。新行添加到顶部 (非ANSI.SYS)</td>
</tr>
<tr>
<td align="left"><code>n</code>;<code>m</code>f</td>
<td>HVP – 水平垂直位置</td>
<td>同CUP</td>
</tr>
<tr>
<td align="left"><code>n</code> <code>m</code></td>
<td>SGR – 选择图形再现</td>
<td>设置SGR参数，包括文字颜色</td>
</tr>
<tr>
<td align="left"><code>5i</code></td>
<td>打开辅助端口</td>
<td>启用辅助串行端口，通常用于本地串行打印机</td>
</tr>
<tr>
<td align="left"><code>4i</code></td>
<td>关闭辅助端口</td>
<td>禁用辅助串行端口，通常用于本地串行打印机</td>
</tr>
<tr>
<td align="left"><code>6n</code></td>
<td>DSR – 设备状态报告</td>
<td>以 <code>ESC[n;mR</code> (就像在键盘上输入)向应用程序报告光标位置(CPR)，其中 <code>n</code>是行， <code>m</code> 是列</td>
</tr>
<tr>
<td align="left"><code>s</code></td>
<td>SCP – 保存光标位置</td>
<td>保存光标的当前位置</td>
</tr>
<tr>
<td align="left"><code>u</code></td>
<td>RCP – 恢复光标位置</td>
<td>恢复保存的光标位置</td>
</tr>
</tbody></table>
<!--rehype:className=left-align-->

<h2 id="另见"><a href="#另见" class="headerlink" title="另见"></a>另见</h2><ul>
<li><a target="_blank" rel="noopener" href="https://jaywcjlove.github.io/shell-tutorial">Shell 教程</a> <em>(jaywcjlove.github.io)</em></li>
<li><a target="_blank" rel="noopener" href="https://devhints.io/bash">Devhints</a> <em>(devhints.io)</em></li>
<li><a target="_blank" rel="noopener" href="http://wiki.bash-hackers.org/">Bash-hackers wiki</a> <em>(bash-hackers.org)</em></li>
<li><a target="_blank" rel="noopener" href="http://wiki.bash-hackers.org/syntax/shellvars">Shell vars</a> <em>(bash-hackers.org)</em></li>
<li><a target="_blank" rel="noopener" href="https://learnxinyminutes.com/docs/bash/">Learn bash in y minutes</a> <em>(learnxinyminutes.com)</em></li>
<li><a target="_blank" rel="noopener" href="http://mywiki.wooledge.org/BashGuide">Bash Guide</a> <em>(mywiki.wooledge.org)</em></li>
<li><a target="_blank" rel="noopener" href="https://www.shellcheck.net/">ShellCheck</a> <em>(shellcheck.net)</em></li>
<li><a target="_blank" rel="noopener" href="https://devmanual.gentoo.org/tools-reference/bash/index.html">shell - Standard Shell</a> <em>(devmanual.gentoo.org)</em></li>
<li><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/ANSI%E8%BD%AC%E4%B9%89%E5%BA%8F%E5%88%97">ANSI 转义序列</a> <em>(zh.wikipedia.org)</em></li>
</ul>
</div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">太空毅栈</div><div class="author-info__description">个人博客，记录生活，分享技术。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/caoyixiong"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;amp;uin=409677557&amp;amp;site=qq&amp;amp;menu=yes" target="_blank" title="QQ"><i class="fab fa-qq" style="color: #24292e;"></i></a><a class="social-icon" href="/img/wechat.jpg" target="_blank" title="微信"><i class="fab fa-weixin" style="color: #24292e;"></i></a><a class="social-icon" href="https://github.com/caoyixiong" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:409677557@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">如果阅读过程中遇到了问题，请及时评论或者留言，看到了会在第一时间给出回复。</div></div><!-- !=partial('includes/widget/card_wx', {}, {cache: true})--><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/5c3d4808.html" title="第一个Go程序">第一个Go程序</a><time datetime="2024-08-23T16:46:21.634Z" title="发表于 2024-08-24 00:46:21">2024-08-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/65b9ed48.html" title="GOPATH">GOPATH</a><time datetime="2024-08-21T16:28:07.159Z" title="发表于 2024-08-22 00:28:07">2024-08-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/6b9fbde2.html" title="Gin 快速入门">Gin 快速入门</a><time datetime="2024-08-19T17:27:21.321Z" title="发表于 2024-08-20 01:27:21">2024-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/a25657cf.html" title="Go 环境搭建">Go 环境搭建</a><time datetime="2024-08-19T17:27:21.321Z" title="发表于 2024-08-20 01:27:21">2024-08-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/6999fca8.html" title="go get 包下载失败">go get 包下载失败</a><time datetime="2024-08-19T16:01:05.960Z" title="发表于 2024-08-20 00:01:05">2024-08-20</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Go/"><span class="card-category-list-name">Go</span><span class="card-category-list-count">6</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Go/" style="font-size: 1.5em; color: #99a9bf">Go</a> <a href="/tags/Gin/" style="font-size: 1.1em; color: #999">Gin</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">2024年08月</span><span class="card-archive-list-count">6</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">6</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2016-05-13T00:30:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">3.8k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-08-25T03:30:07.171Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/home.jpg')"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">公益广告</p><div class="bg-ad"><div>国家反诈中心是国务院打击治理电信网络新型违法犯罪工作部际联席会议合成作战平台，集资源整合、情报研判、侦查指挥为一体，在打击、防范、治理电信网络诈骗等新型违法犯罪中发挥着重要作用。</div><div class="btn-xz-box"><a class="btn-xz" href="https://caoyixiong.com/">主页</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">导航</p><ul class="ft-links"><li><a href="https://caoyixiong.com/about/">关于博主</a><a href="https://caoyixiong.com/categories/">文章分类</a></li><li><a href="https://caoyixiong.com/sponsor/">来杯咖啡</a><a href="https://caoyixiong.com/tags/">文章标签</a></li><li><a href="https://caoyixiong.com/comments/">说点什么</a><a href="https://caoyixiong.com/archives/">文章归档</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">友链</p><div class="ft-img-group"><div class="img-group-item"><a href="https://caoyixiong.com/"><img src="/img/avatar.jpg" alt=""/></a></div></div></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-8sxa.vercel.app',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-8sxa.vercel.app',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-8sxa.vercel.app',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script data-pjax defer src="https://npm.elemecdn.com/tzy-blog/lib/js/theme/chocolate.js"></script><script data-pjax defer src="/js/cursor.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.22.1/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.65.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js?v=4.13.0"></script></div></div></body></html>